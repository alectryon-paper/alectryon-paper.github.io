<!DOCTYPE html>
<html><head><title>Tactics.v</title><meta charset="utf-8"><meta content="Alectryon v0.2" name="generator"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Serif:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" rel="stylesheet"><link href="https://unpkg.com/firacode/distr/fira_code.css" rel="stylesheet"><link href="alectryon.css" rel="stylesheet"><script src="alectryon.js"></script><style type="text/css">.highlight .hll { background-color: #ffffcc }
.highlight .c { color: #555753; font-style: italic } /* Comment */
.highlight .err { color: #a40000; border: 1px solid #cc0000 } /* Error */
.highlight .g { color: #000000 } /* Generic */
.highlight .k { color: #8f5902 } /* Keyword */
.highlight .l { color: #2e3436 } /* Literal */
.highlight .n { color: #000000 } /* Name */
.highlight .o { color: #000000 } /* Operator */
.highlight .x { color: #2e3436 } /* Other */
.highlight .p { color: #000000 } /* Punctuation */
.highlight .ch { color: #555753; font-weight: bold; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #555753; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #3465a4; font-style: italic } /* Comment.Preproc */
.highlight .cpf { color: #555753; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #555753; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3465a4; font-weight: bold; font-style: italic } /* Comment.Special */
.highlight .gd { color: #a40000 } /* Generic.Deleted */
.highlight .ge { color: #000000; font-style: italic } /* Generic.Emph */
.highlight .gr { color: #a40000 } /* Generic.Error */
.highlight .gh { color: #a40000; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #4e9a06 } /* Generic.Inserted */
.highlight .go { color: #000000; font-style: italic } /* Generic.Output */
.highlight .gp { color: #8f5902 } /* Generic.Prompt */
.highlight .gs { color: #000000; font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #000000; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #000000; font-style: italic } /* Generic.Traceback */
.highlight .kc { color: #204a87; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #4e9a06; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #4e9a06; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #204a87 } /* Keyword.Pseudo */
.highlight .kr { color: #8f5902 } /* Keyword.Reserved */
.highlight .kt { color: #204a87 } /* Keyword.Type */
.highlight .ld { color: #2e3436 } /* Literal.Date */
.highlight .m { color: #2e3436 } /* Literal.Number */
.highlight .s { color: #ad7fa8 } /* Literal.String */
.highlight .na { color: #c4a000 } /* Name.Attribute */
.highlight .nb { color: #75507b } /* Name.Builtin */
.highlight .nc { color: #204a87 } /* Name.Class */
.highlight .no { color: #ce5c00 } /* Name.Constant */
.highlight .nd { color: #3465a4; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #c4a000; text-decoration: underline } /* Name.Entity */
.highlight .ne { color: #cc0000 } /* Name.Exception */
.highlight .nf { color: #a40000 } /* Name.Function */
.highlight .nl { color: #3465a4; font-weight: bold } /* Name.Label */
.highlight .nn { color: #000000 } /* Name.Namespace */
.highlight .nx { color: #000000 } /* Name.Other */
.highlight .py { color: #000000 } /* Name.Property */
.highlight .nt { color: #a40000 } /* Name.Tag */
.highlight .nv { color: #ce5c00 } /* Name.Variable */
.highlight .ow { color: #8f5902 } /* Operator.Word */
.highlight .w { color: #d3d7cf; text-decoration: underline } /* Text.Whitespace */
.highlight .mb { color: #2e3436 } /* Literal.Number.Bin */
.highlight .mf { color: #2e3436 } /* Literal.Number.Float */
.highlight .mh { color: #2e3436 } /* Literal.Number.Hex */
.highlight .mi { color: #2e3436 } /* Literal.Number.Integer */
.highlight .mo { color: #2e3436 } /* Literal.Number.Oct */
.highlight .sa { color: #ad7fa8 } /* Literal.String.Affix */
.highlight .sb { color: #ad7fa8 } /* Literal.String.Backtick */
.highlight .sc { color: #ad7fa8; font-weight: bold } /* Literal.String.Char */
.highlight .dl { color: #ad7fa8 } /* Literal.String.Delimiter */
.highlight .sd { color: #ad7fa8 } /* Literal.String.Doc */
.highlight .s2 { color: #ad7fa8 } /* Literal.String.Double */
.highlight .se { color: #ad7fa8; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #ad7fa8; text-decoration: underline } /* Literal.String.Heredoc */
.highlight .si { color: #ce5c00 } /* Literal.String.Interpol */
.highlight .sx { color: #ad7fa8 } /* Literal.String.Other */
.highlight .sr { color: #ad7fa8 } /* Literal.String.Regex */
.highlight .s1 { color: #ad7fa8 } /* Literal.String.Single */
.highlight .ss { color: #8f5902 } /* Literal.String.Symbol */
.highlight .bp { color: #5c35cc } /* Name.Builtin.Pseudo */
.highlight .fm { color: #a40000 } /* Name.Function.Magic */
.highlight .vc { color: #ce5c00 } /* Name.Variable.Class */
.highlight .vg { color: #ce5c00; text-decoration: underline } /* Name.Variable.Global */
.highlight .vi { color: #ce5c00 } /* Name.Variable.Instance */
.highlight .vm { color: #ce5c00 } /* Name.Variable.Magic */
.highlight .il { color: #2e3436 } /* Literal.Number.Integer.Long */</style></head><body><article class="alectryon-root alectryon-standalone alectryon-centered alectryon-coqdoc"><div class="alectryon-header">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running <a href="https://coq.inria.fr/">Coq</a>+<a href="https://github.com/ejgallego/coq-serapi">SerAPI</a> v8.10.0+0.7.0. Coq sources are in this panel; goals and messages will appear in the other. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus.</div><div class="doc">
<a name="lab1"></a><h1 class="section">Tactics: More Basic Tactics</h1>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
This chapter introduces several additional proof strategies
    and tactics that allow us to begin proving more interesting
    properties of functional programs.  We will see:

<div class="paragraph"> </div>
<ul class="doclist">
<li> how to use auxiliary lemmas in both "forward-style" and
      "backward-style" proofs;

</li>
<li> how to reason about data constructors (in particular, how to use
      the fact that they are injective and disjoint);

</li>
<li> how to strengthen an induction hypothesis (and when such
      strengthening is required); and

</li>
<li> more details on how to reason by case analysis. 
</li>
</ul>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Set Warnings</span> <span class="s2">&quot;-notation-overridden,-parsing&quot;</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">From</span> LF <span class="kn">Require Export</span> Poly.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(* ################################################################# *)</span></span></span></pre><div class="doc">
<a name="lab2"></a><h1 class="section">The <span class="inlinecode"><span class="id" title="tactic">apply</span></span> Tactic</h1>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
We often encounter situations where the goal to be proved is
    <i>exactly</i> the same as some hypothesis in the context or some
    previously proved lemma. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk0" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk0"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">silly1</span> : <span class="kr">forall</span> (<span class="nv">n</span> <span class="nv">m</span> <span class="nv">o</span> <span class="nv">p</span> : nat),
     n = m  -&gt;
     [n;o] = [n;p] -&gt;
     [n;o] = [m;p].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> <span class="nv">o</span> <span class="nv">p</span> : nat,
n = m -&gt; [n; o] = [n; p] -&gt; [n; o] = [m; p]</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk1" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk1"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> <span class="nv">o</span> <span class="nv">p</span> : nat,
n = m -&gt; [n; o] = [n; p] -&gt; [n; o] = [m; p]</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk2" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk2"><span class="highlight"><span class="nb">intros</span> n m o p eq1 eq2.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m, o, p</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = m</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">[n; o] = [n; p]</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">[n; o] = [m; p]</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk3" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk3"><span class="highlight"><span class="nb">rewrite</span> &lt;- eq1.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m, o, p</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = m</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">[n; o] = [n; p]</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">[n; o] = [n; p]</span></div></blockquote></div></div></small></span></pre><div class="doc">
Here, we could finish with "<span class="inlinecode"><span class="id" title="tactic">rewrite</span></span> <span class="inlinecode">‚Üí</span> <span class="inlinecode"><span class="id" title="var">eq2</span>.</span> <span class="inlinecode"><span class="id" title="tactic">reflexivity</span>.</span>" as we
    have done several times before.  We can achieve the same effect in
    a single step by using the <span class="inlinecode"><span class="id" title="tactic">apply</span></span> tactic instead: 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> eq2.</span></span><span class="coq-wsp">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
The <span class="inlinecode"><span class="id" title="tactic">apply</span></span> tactic also works with <i>conditional</i> hypotheses
    and lemmas: if the statement being applied is an implication, then
    the premises of this implication will be added to the list of
    subgoals needing to be proved. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk4" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk4"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">silly2</span> : <span class="kr">forall</span> (<span class="nv">n</span> <span class="nv">m</span> <span class="nv">o</span> <span class="nv">p</span> : nat),
     n = m  -&gt;
     (<span class="kr">forall</span> (<span class="nv">q</span> <span class="nv">r</span> : nat), q = r -&gt; [q;o] = [r;p]) -&gt;
     [n;o] = [m;p].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> <span class="nv">o</span> <span class="nv">p</span> : nat,
n = m -&gt;
(<span class="kr">forall</span> <span class="nv">q</span> <span class="nv">r</span> : nat, q = r -&gt; [q; o] = [r; p]) -&gt;
[n; o] = [m; p]</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk5" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk5"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> <span class="nv">o</span> <span class="nv">p</span> : nat,
n = m -&gt;
(<span class="kr">forall</span> <span class="nv">q</span> <span class="nv">r</span> : nat, q = r -&gt; [q; o] = [r; p]) -&gt;
[n; o] = [m; p]</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk6" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk6"><span class="highlight"><span class="nb">intros</span> n m o p eq1 eq2.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m, o, p</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = m</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">q</span> <span class="nv">r</span> : nat, q = r -&gt; [q; o] = [r; p]</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">[n; o] = [m; p]</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk7" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk7"><span class="highlight"><span class="nb">apply</span> eq2.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m, o, p</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = m</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">q</span> <span class="nv">r</span> : nat, q = r -&gt; [q; o] = [r; p]</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">n = m</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> eq1.</span></span><span class="coq-wsp">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Typically, when we use <span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span>, the statement <span class="inlinecode"><span class="id" title="var">H</span></span> will
    begin with a <span class="inlinecode"><span class="id" title="keyword">‚àÄ</span></span> that binds some <i>universal variables</i>.  When
    Coq matches the current goal against the conclusion of <span class="inlinecode"><span class="id" title="var">H</span></span>, it
    will try to find appropriate values for these variables.  For
    example, when we do <span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">eq2</span></span> in the following proof, the
    universal variable <span class="inlinecode"><span class="id" title="var">q</span></span> in <span class="inlinecode"><span class="id" title="var">eq2</span></span> gets instantiated with <span class="inlinecode"><span class="id" title="var">n</span></span> and <span class="inlinecode"><span class="id" title="var">r</span></span>
    gets instantiated with <span class="inlinecode"><span class="id" title="var">m</span></span>. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk8" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk8"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">silly2a</span> : <span class="kr">forall</span> (<span class="nv">n</span> <span class="nv">m</span> : nat),
     (n,n) = (m,m)  -&gt;
     (<span class="kr">forall</span> (<span class="nv">q</span> <span class="nv">r</span> : nat), (q,q) = (r,r) -&gt; [q] = [r]) -&gt;
     [n] = [m].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> : nat,
(n, n) = (m, m) -&gt;
(<span class="kr">forall</span> <span class="nv">q</span> <span class="nv">r</span> : nat, (q, q) = (r, r) -&gt; [q] = [r]) -&gt;
[n] = [m]</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk9" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk9"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> : nat,
(n, n) = (m, m) -&gt;
(<span class="kr">forall</span> <span class="nv">q</span> <span class="nv">r</span> : nat, (q, q) = (r, r) -&gt; [q] = [r]) -&gt;
[n] = [m]</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chka" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chka"><span class="highlight"><span class="nb">intros</span> n m eq1 eq2.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n, n) = (m, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">q</span> <span class="nv">r</span> : nat, (q, q) = (r, r) -&gt; [q] = [r]</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">[n] = [m]</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkb" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkb"><span class="highlight"><span class="nb">apply</span> eq2.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n, n) = (m, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">q</span> <span class="nv">r</span> : nat, (q, q) = (r, r) -&gt; [q] = [r]</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(n, n) = (m, m)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> eq1.</span></span><span class="coq-wsp">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
<a name="lab3"></a><h4 class="section">Exercise: 2 stars, standard, optional (silly_ex)</h4>
<div class="paragraph"> </div>

    Complete the following proof without using <span class="inlinecode"><span class="id" title="tactic">simpl</span></span>. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkc" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkc"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">silly_ex</span> :
     (<span class="kr">forall</span> <span class="nv">n</span>, evenb n = true -&gt; oddb (S n) = true) -&gt;
     oddb <span class="mi">3</span> = true -&gt;
     evenb <span class="mi">4</span> = true.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">forall</span> <span class="nv">n</span> : nat, evenb n = true -&gt; oddb (S n) = true) -&gt;
oddb <span class="mi">3</span> = true -&gt; evenb <span class="mi">4</span> = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkd" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkd"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">forall</span> <span class="nv">n</span> : nat, evenb n = true -&gt; oddb (S n) = true) -&gt;
oddb <span class="mi">3</span> = true -&gt; evenb <span class="mi">4</span> = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">  <span class="c">(* FILL IN HERE *)</span></span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Admitted</span>.</span></span></span></pre><div class="doc">
<font size="-2">‚òê</font>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
To use the <span class="inlinecode"><span class="id" title="tactic">apply</span></span> tactic, the (conclusion of the) fact
    being applied must match the goal exactly -- for example, <span class="inlinecode"><span class="id" title="tactic">apply</span></span>
    will not work if the left and right sides of the equality are
    swapped. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chke" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chke"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">silly3_firsttry</span> : <span class="kr">forall</span> (<span class="nv">n</span> : nat),
     true = (n =? <span class="mi">5</span>)  -&gt;
     (S (S n)) =? <span class="mi">7</span> = true.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat,
true = (n =? <span class="mi">5</span>) -&gt; (S (S n) =? <span class="mi">7</span>) = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkf" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkf"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat,
true = (n =? <span class="mi">5</span>) -&gt; (S (S n) =? <span class="mi">7</span>) = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk10" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk10"><span class="highlight"><span class="nb">intros</span> n H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">true = (n =? <span class="mi">5</span>)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(S (S n) =? <span class="mi">7</span>) = true</span></div></blockquote></div></div></small></span></pre><div class="doc">
Here we cannot use <span class="inlinecode"><span class="id" title="tactic">apply</span></span> directly, but we can use the <span class="inlinecode"><span class="id" title="tactic">symmetry</span></span>
    tactic, which switches the left and right sides of an equality in
    the goal. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight">  </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk11" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk11"><span class="highlight"><span class="nb">symmetry</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">true = (n =? <span class="mi">5</span>)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">true = (S (S n) =? <span class="mi">7</span>)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk12" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk12"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">true = (n =? <span class="mi">5</span>)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">true = (n =? <span class="mi">5</span>)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span></pre><div class="doc">
(This <span class="inlinecode"><span class="id" title="tactic">simpl</span></span> is optional, since <span class="inlinecode"><span class="id" title="tactic">apply</span></span> will perform
             simplification first, if needed.) 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> H.</span></span><span class="coq-wsp">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
<a name="lab4"></a><h4 class="section">Exercise: 3 stars, standard (apply_exercise1)</h4>
<div class="paragraph"> </div>

    (<i>Hint</i>: You can use <span class="inlinecode"><span class="id" title="tactic">apply</span></span> with previously defined lemmas, not
    just hypotheses in the context.  Remember that <span class="inlinecode"><span class="id" title="keyword">Search</span></span> is
    your friend.) 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk13" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk13"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">rev_exercise1</span> : <span class="kr">forall</span> (<span class="nv">l</span> <span class="nv">l&#39;</span> : list nat),
     l = rev l&#39; -&gt;
     l&#39; = rev l.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">l</span> <span class="nv">l&#39;</span> : list nat, l = rev l&#39; -&gt; l&#39; = rev l</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk14" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk14"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">l</span> <span class="nv">l&#39;</span> : list nat, l = rev l&#39; -&gt; l&#39; = rev l</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">  <span class="c">(* FILL IN HERE *)</span></span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Admitted</span>.</span></span></span></pre><div class="doc">
<font size="-2">‚òê</font>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
<a name="lab5"></a><h4 class="section">Exercise: 1 star, standard, optional (apply_rewrite)</h4>
<div class="paragraph"> </div>

    Briefly explain the difference between the tactics <span class="inlinecode"><span class="id" title="tactic">apply</span></span> and
    <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span>.  What are the situations where both can usefully be
    applied? 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight"><span class="c">(* FILL IN HERE </span>

<span class="c">    [] *)</span>

<span class="c">(* ################################################################# *)</span></span></span></pre><div class="doc">
<a name="lab6"></a><h1 class="section">The <span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="keyword">with</span></span> Tactic</h1>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
The following silly example uses two rewrites in a row to
    get from <span class="inlinecode">[<span class="id" title="var">a</span>;<span class="id" title="var">b</span>]</span> to <span class="inlinecode">[<span class="id" title="var">e</span>;<span class="id" title="var">f</span>]</span>. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk15" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk15"><span class="highlight"><span class="kn">Example</span> <span class="nf">trans_eq_example</span> : <span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span> <span class="nv">e</span> <span class="nv">f</span> : nat),
     [a;b] = [c;d] -&gt;
     [c;d] = [e;f] -&gt;
     [a;b] = [e;f].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span> <span class="nv">e</span> <span class="nv">f</span> : nat,
[a; b] = [c; d] -&gt; [c; d] = [e; f] -&gt; [a; b] = [e; f]</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk16" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk16"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span> <span class="nv">e</span> <span class="nv">f</span> : nat,
[a; b] = [c; d] -&gt; [c; d] = [e; f] -&gt; [a; b] = [e; f]</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk17" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk17"><span class="highlight"><span class="nb">intros</span> a b c d e f eq1 eq2.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">a, b, c, d, e, f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">[a; b] = [c; d]</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">[c; d] = [e; f]</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">[a; b] = [e; f]</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk18" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk18"><span class="highlight"><span class="nb">rewrite</span> -&gt; eq1.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">a, b, c, d, e, f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">[a; b] = [c; d]</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">[c; d] = [e; f]</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">[c; d] = [e; f]</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk19" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk19"><span class="highlight"><span class="nb">rewrite</span> -&gt; eq2.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">a, b, c, d, e, f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">[a; b] = [c; d]</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">[c; d] = [e; f]</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">[e; f] = [e; f]</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="coq-wsp">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Since this is a common pattern, we might like to pull it out
    as a lemma recording, once and for all, the fact that equality is
    transitive. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk1a" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk1a"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">trans_eq</span> : <span class="kr">forall</span> (<span class="nv">X</span>:<span class="kt">Type</span>) (<span class="nv">n</span> <span class="nv">m</span> <span class="nv">o</span> : X),
  n = m -&gt; m = o -&gt; n = o.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">n</span> <span class="nv">m</span> <span class="nv">o</span> : X), n = m -&gt; m = o -&gt; n = o</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk1b" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk1b"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">n</span> <span class="nv">m</span> <span class="nv">o</span> : X), n = m -&gt; m = o -&gt; n = o</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk1c" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk1c"><span class="highlight"><span class="nb">intros</span> X n m o eq1 eq2.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n, m, o</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = m</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = o</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">n = o</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk1d" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk1d"><span class="highlight"><span class="nb">rewrite</span> -&gt; eq1.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n, m, o</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = m</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = o</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">m = o</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk1e" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk1e"><span class="highlight"><span class="nb">rewrite</span> -&gt; eq2.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">n, m, o</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = m</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = o</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">o = o</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="coq-wsp">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Now, we should be able to use <span class="inlinecode"><span class="id" title="var">trans_eq</span></span> to prove the above
    example.  However, to do this we need a slight refinement of the
    <span class="inlinecode"><span class="id" title="tactic">apply</span></span> tactic. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk1f" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk1f"><span class="highlight"><span class="kn">Example</span> <span class="nf">trans_eq_example&#39;</span> : <span class="kr">forall</span> (<span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span> <span class="nv">e</span> <span class="nv">f</span> : nat),
     [a;b] = [c;d] -&gt;
     [c;d] = [e;f] -&gt;
     [a;b] = [e;f].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span> <span class="nv">e</span> <span class="nv">f</span> : nat,
[a; b] = [c; d] -&gt; [c; d] = [e; f] -&gt; [a; b] = [e; f]</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk20" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk20"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">c</span> <span class="nv">d</span> <span class="nv">e</span> <span class="nv">f</span> : nat,
[a; b] = [c; d] -&gt; [c; d] = [e; f] -&gt; [a; b] = [e; f]</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk21" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk21"><span class="highlight"><span class="nb">intros</span> a b c d e f eq1 eq2.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">a, b, c, d, e, f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">[a; b] = [c; d]</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">[c; d] = [e; f]</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">[a; b] = [e; f]</span></div></blockquote></div></div></small></span></pre><div class="doc">
If we simply tell Coq <span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">trans_eq</span></span> at this point, it can
    tell (by matching the goal against the conclusion of the lemma)
    that it should instantiate <span class="inlinecode"><span class="id" title="var">X</span></span> with <span class="inlinecode">[<span class="id" title="var">nat</span>]</span>, <span class="inlinecode"><span class="id" title="var">n</span></span> with <span class="inlinecode">[<span class="id" title="var">a</span>,<span class="id" title="var">b</span>]</span>, and
    <span class="inlinecode"><span class="id" title="var">o</span></span> with <span class="inlinecode">[<span class="id" title="var">e</span>,<span class="id" title="var">f</span>]</span>.  However, the matching process doesn't determine
    an instantiation for <span class="inlinecode"><span class="id" title="var">m</span></span>: we have to supply one explicitly by
    adding <span class="inlinecode"><span class="id" title="keyword">with</span></span> <span class="inlinecode">(<span class="id" title="var">m</span>:=[<span class="id" title="var">c</span>,<span class="id" title="var">d</span>])</span> to the invocation of <span class="inlinecode"><span class="id" title="tactic">apply</span></span>. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight">  </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk22" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk22"><span class="highlight"><span class="nb">apply</span> trans_eq <span class="kr">with</span> (m:=[c;d]).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">a, b, c, d, e, f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">[a; b] = [c; d]</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">[c; d] = [e; f]</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">[a; b] = [c; d]</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Tactics-v-chk23" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">a, b, c, d, e, f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">[a; b] = [c; d]</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">[c; d] = [e; f]</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Tactics-v-chk23"><hr></label><div class="goal-conclusion"><span class="highlight">[c; d] = [e; f]</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk24" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk24"><span class="highlight"><span class="nb">apply</span> eq1.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">a, b, c, d, e, f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">[a; b] = [c; d]</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">[c; d] = [e; f]</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">[c; d] = [e; f]</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> eq2.</span></span><span class="coq-wsp">   </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Actually, we usually don't have to include the name <span class="inlinecode"><span class="id" title="var">m</span></span> in
    the <span class="inlinecode"><span class="id" title="keyword">with</span></span> clause; Coq is often smart enough to figure out which
    instantiation we're giving. We could instead write: <span class="inlinecode"><span class="id" title="tactic">apply</span></span>
<span class="inlinecode"><span class="id" title="var">trans_eq</span></span> <span class="inlinecode"><span class="id" title="keyword">with</span></span> <span class="inlinecode">[<span class="id" title="var">c</span>;<span class="id" title="var">d</span>]</span>. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
<a name="lab7"></a><h4 class="section">Exercise: 3 stars, standard, optional (apply_with_exercise)</h4>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk25" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk25"><span class="highlight"><span class="kn">Example</span> <span class="nf">trans_eq_exercise</span> : <span class="kr">forall</span> (<span class="nv">n</span> <span class="nv">m</span> <span class="nv">o</span> <span class="nv">p</span> : nat),
     m = (minustwo o) -&gt;
     (n + p) = m -&gt;
     (n + p) = (minustwo o).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> <span class="nv">o</span> <span class="nv">p</span> : nat,
m = minustwo o -&gt; n + p = m -&gt; n + p = minustwo o</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk26" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk26"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> <span class="nv">o</span> <span class="nv">p</span> : nat,
m = minustwo o -&gt; n + p = m -&gt; n + p = minustwo o</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">  <span class="c">(* FILL IN HERE *)</span></span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Admitted</span>.</span></span></span></pre><div class="doc">
<font size="-2">‚òê</font>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight"><span class="c">(* ################################################################# *)</span></span></span></pre><div class="doc">
<a name="lab8"></a><h1 class="section">The <span class="inlinecode"><span class="id" title="tactic">injection</span></span> and <span class="inlinecode"><span class="id" title="tactic">discriminate</span></span> Tactics</h1>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
Recall the definition of natural numbers:

<div class="paragraph"> </div>

     Inductive nat : Type :=
       | O : nat
       | S : nat -&gt; nat.

<div class="paragraph"> </div>

    It is obvious from this definition that every number has one of
    two forms: either it is the constructor <span class="inlinecode"><span class="id" title="var">O</span></span> or it is built by
    applying the constructor <span class="inlinecode"><span class="id" title="var">S</span></span> to another number.  But there is more
    here than meets the eye: implicit in the definition (and in our
    informal understanding of how datatype declarations work in other
    programming languages) are two more facts:

<div class="paragraph"> </div>
<ul class="doclist">
<li> The constructor <span class="inlinecode"><span class="id" title="var">S</span></span> is <i>injective</i>.  That is, if <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span>, it
      must be the case that <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>.

<div class="paragraph"> </div>
</li>
<li> The constructors <span class="inlinecode"><span class="id" title="var">O</span></span> and <span class="inlinecode"><span class="id" title="var">S</span></span> are <i>disjoint</i>.  That is, <span class="inlinecode"><span class="id" title="var">O</span></span> is not
      equal to <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> for any <span class="inlinecode"><span class="id" title="var">n</span></span>.

</li>
</ul>
<div class="paragraph"> </div>

    Similar principles apply to all inductively defined types: all
    constructors are injective, and the values built from distinct
    constructors are never equal.  For lists, the <span class="inlinecode"><span class="id" title="var">cons</span></span> constructor
    is injective and <span class="inlinecode"><span class="id" title="var">nil</span></span> is different from every non-empty list.
    For booleans, <span class="inlinecode"><span class="id" title="var">true</span></span> and <span class="inlinecode"><span class="id" title="var">false</span></span> are different.  (Since neither
    <span class="inlinecode"><span class="id" title="var">true</span></span> nor <span class="inlinecode"><span class="id" title="var">false</span></span> take any arguments, their injectivity is not
    interesting.)  And so on. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
For example, we can prove the injectivity of <span class="inlinecode"><span class="id" title="var">S</span></span> by using the
    <span class="inlinecode"><span class="id" title="var">pred</span></span> function defined in <span class="inlinecode"><span class="id" title="var">Basics.v</span></span>. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk27" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk27"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">S_injective</span> : <span class="kr">forall</span> (<span class="nv">n</span> <span class="nv">m</span> : nat),
  S n = S m -&gt;
  n = m.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> : nat, S n = S m -&gt; n = m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk28" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk28"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> : nat, S n = S m -&gt; n = m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk29" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk29"><span class="highlight"><span class="nb">intros</span> n m H1.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">S n = S m</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">n = m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk2a" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk2a"><span class="highlight"><span class="nb">assert</span> (H2: n = pred (S n)).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">S n = S m</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">n = Nat.pred (S n)</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Tactics-v-chk2b" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">S n = S m</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = Nat.pred (S n)</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Tactics-v-chk2b"><hr></label><div class="goal-conclusion"><span class="highlight">n = m</span></div></blockquote></div></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk2c" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk2c"><span class="highlight">{</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">S n = S m</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">n = Nat.pred (S n)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk2d" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk2d"><span class="highlight">}</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">S n = S m</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = Nat.pred (S n)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">n = m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk2e" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk2e"><span class="highlight"><span class="nb">rewrite</span> H2.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">S n = S m</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = Nat.pred (S n)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Nat.pred (S n) = m</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk2f" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk2f"><span class="highlight"><span class="nb">rewrite</span> H1.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">S n = S m</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = Nat.pred (S n)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Nat.pred (S m) = m</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
This technique can be generalized to any constructor by
    writing the equivalent of <span class="inlinecode"><span class="id" title="var">pred</span></span> for that constructor -- i.e.,
    writing a function that "undoes" one application of the
    constructor. As a more convenient alternative, Coq provides a
    tactic called <span class="inlinecode"><span class="id" title="tactic">injection</span></span> that allows us to exploit the
    injectivity of any constructor.  Here is an alternate proof of the
    above theorem using <span class="inlinecode"><span class="id" title="tactic">injection</span></span>: 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk30" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk30"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">S_injective&#39;</span> : <span class="kr">forall</span> (<span class="nv">n</span> <span class="nv">m</span> : nat),
  S n = S m -&gt;
  n = m.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> : nat, S n = S m -&gt; n = m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk31" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk31"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> : nat, S n = S m -&gt; n = m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk32" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk32"><span class="highlight"><span class="nb">intros</span> n m H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">S n = S m</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">n = m</span></div></blockquote></div></div></small></span></pre><div class="doc">
By writing <span class="inlinecode"><span class="id" title="tactic">injection</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span> at this point, we are asking Coq to
    generate all equations that it can infer from <span class="inlinecode"><span class="id" title="var">H</span></span> using the
    injectivity of constructors. Each such equation is added as a
    premise to the goal. In the present example, adds the premise
    <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight">  </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk33" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk33"><span class="highlight"><span class="nb">injection</span> H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">S n = S m</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">n = m -&gt; n = m</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk34" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk34"><span class="highlight"><span class="nb">intros</span> Hnm.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">S n = S m</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnm</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = m</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">n = m</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> Hnm.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Here's a more interesting example that shows how <span class="inlinecode"><span class="id" title="tactic">injection</span></span> can
    derive multiple equations at once. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk35" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk35"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">injection_ex1</span> : <span class="kr">forall</span> (<span class="nv">n</span> <span class="nv">m</span> <span class="nv">o</span> : nat),
  [n; m] = [o; o] -&gt;
  [n] = [m].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> <span class="nv">o</span> : nat, [n; m] = [o; o] -&gt; [n] = [m]</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk36" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk36"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> <span class="nv">o</span> : nat, [n; m] = [o; o] -&gt; [n] = [m]</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk37" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk37"><span class="highlight"><span class="nb">intros</span> n m o H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m, o</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">[n; m] = [o; o]</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">[n] = [m]</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk38" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk38"><span class="highlight"><span class="nb">injection</span> H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m, o</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">[n; m] = [o; o]</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">m = o -&gt; n = o -&gt; [n] = [m]</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk39" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk39"><span class="highlight"><span class="nb">intros</span> H1 H2.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m, o</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">[n; m] = [o; o]</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = o</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = o</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">[n] = [m]</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk3a" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk3a"><span class="highlight"><span class="nb">rewrite</span> H1.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m, o</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">[n; m] = [o; o]</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = o</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = o</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">[n] = [o]</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk3b" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk3b"><span class="highlight"><span class="nb">rewrite</span> H2.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m, o</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">[n; m] = [o; o]</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = o</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = o</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">[o] = [o]</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
The "<span class="inlinecode"><span class="id" title="keyword">as</span></span>" variant of <span class="inlinecode"><span class="id" title="tactic">injection</span></span> permits us to choose names for
    the introduced equations rather than letting Coq do it. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk3c" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk3c"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">injection_ex2</span> : <span class="kr">forall</span> (<span class="nv">n</span> <span class="nv">m</span> : nat),
  [n] = [m] -&gt;
  n = m.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> : nat, [n] = [m] -&gt; n = m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk3d" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk3d"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> : nat, [n] = [m] -&gt; n = m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk3e" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk3e"><span class="highlight"><span class="nb">intros</span> n m H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">[n] = [m]</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">n = m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk3f" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk3f"><span class="highlight"><span class="nb">injection</span> H <span class="kr">as</span> Hnm.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnm</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = m</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">n = m</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk40" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk40"><span class="highlight"><span class="nb">rewrite</span> Hnm.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hnm</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = m</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">m = m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
<a name="lab9"></a><h4 class="section">Exercise: 1 star, standard (injection_ex3)</h4>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk41" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk41"><span class="highlight"><span class="kn">Example</span> <span class="nf">injection_ex3</span> : <span class="kr">forall</span> (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">x</span> <span class="nv">y</span> <span class="nv">z</span> : X) (<span class="nv">l</span> <span class="nv">j</span> : list X),
  x :: y :: l = z :: j -&gt;
  y :: l = x :: j -&gt;
  x = y.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">x</span> <span class="nv">y</span> <span class="nv">z</span> : X) (<span class="nv">l</span> <span class="nv">j</span> : list X),
x :: y :: l = z :: j -&gt; y :: l = x :: j -&gt; x = y</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk42" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk42"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">x</span> <span class="nv">y</span> <span class="nv">z</span> : X) (<span class="nv">l</span> <span class="nv">j</span> : list X),
x :: y :: l = z :: j -&gt; y :: l = x :: j -&gt; x = y</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">  <span class="c">(* FILL IN HERE *)</span></span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Admitted</span>.</span></span></span></pre><div class="doc">
<font size="-2">‚òê</font>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
So much for injectivity of constructors.  What about disjointness?

<div class="paragraph"> </div>

    The principle of disjointness says that two terms beginning with
    different constructors (like <span class="inlinecode"><span class="id" title="var">O</span></span> and <span class="inlinecode"><span class="id" title="var">S</span></span>, or <span class="inlinecode"><span class="id" title="var">true</span></span> and <span class="inlinecode"><span class="id" title="var">false</span></span>)
    can never be equal.  This means that, any time we find ourselves
    working in a context where we've <i>assumed</i> that two such terms are
    equal, we are justified in concluding anything we want to (because
    the assumption is nonsensical).

<div class="paragraph"> </div>

    The <span class="inlinecode"><span class="id" title="tactic">discriminate</span></span> tactic embodies this principle: It is used on a
    hypothesis involving an equality between different
    constructors (e.g., <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">O</span></span>), and it solves the current goal
    immediately.  For example: 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk43" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk43"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">eqb_0_l</span> : <span class="kr">forall</span> <span class="nv">n</span>,
   <span class="mi">0</span> =? n = true -&gt; n = <span class="mi">0</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat, (<span class="mi">0</span> =? n) = true -&gt; n = <span class="mi">0</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk44" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk44"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat, (<span class="mi">0</span> =? n) = true -&gt; n = <span class="mi">0</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk45" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk45"><span class="highlight"><span class="nb">intros</span> n.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="mi">0</span> =? n) = true -&gt; n = <span class="mi">0</span></span></div></blockquote></div></div></small></span></pre><div class="doc">
We can proceed by case analysis on <span class="inlinecode"><span class="id" title="var">n</span></span>. The first case is
    trivial. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight">  </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk46" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk46"><span class="highlight"><span class="nb">destruct</span> n <span class="kr">as</span> [| n&#39;] <span class="nb">eqn</span>:E.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = <span class="mi">0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="mi">0</span> =? <span class="mi">0</span>) = true -&gt; <span class="mi">0</span> = <span class="mi">0</span></span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Tactics-v-chk47" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = S n&#39;</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Tactics-v-chk47"><hr></label><div class="goal-conclusion"><span class="highlight">(<span class="mi">0</span> =? S n&#39;) = true -&gt; S n&#39; = <span class="mi">0</span></span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk48" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk48"><span class="highlight">- <span class="c">(* n = 0 *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = <span class="mi">0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="mi">0</span> =? <span class="mi">0</span>) = true -&gt; <span class="mi">0</span> = <span class="mi">0</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk49" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk49"><span class="highlight"><span class="nb">intros</span> H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = <span class="mi">0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="mi">0</span> =? <span class="mi">0</span>) = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="mi">0</span> = <span class="mi">0</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span></span></pre><div class="doc">
However, the second one doesn't look so simple: assuming <span class="inlinecode">0</span>
<span class="inlinecode">=?</span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n'</span>)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">true</span></span>, we must show <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n'</span></span> <span class="inlinecode">=</span> <span class="inlinecode">0</span>!  The way forward is to
    observe that the assumption itself is nonsensical: 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight">  </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk4a" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk4a"><span class="highlight">- <span class="c">(* n = S n&#39; *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = S n&#39;</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="mi">0</span> =? S n&#39;) = true -&gt; S n&#39; = <span class="mi">0</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk4b" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk4b"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = S n&#39;</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">false = true -&gt; S n&#39; = <span class="mi">0</span></span></div></blockquote></div></div></small></span></pre><div class="doc">
If we use <span class="inlinecode"><span class="id" title="tactic">discriminate</span></span> on this hypothesis, Coq confirms
    that the subgoal we are working on is impossible and removes it
    from further consideration. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight">    </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk4c" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk4c"><span class="highlight"><span class="nb">intros</span> H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = S n&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">false = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">S n&#39; = <span class="mi">0</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">discriminate</span> H.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
This is an instance of a logical principle known as the <i>principle
    of explosion</i>, which asserts that a contradictory hypothesis
    entails anything, even false things! 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk4d" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk4d"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">discriminate_ex1</span> : <span class="kr">forall</span> (<span class="nv">n</span> : nat),
  S n = O -&gt;
  <span class="mi">2</span> + <span class="mi">2</span> = <span class="mi">5</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat, S n = <span class="mi">0</span> -&gt; <span class="mi">2</span> + <span class="mi">2</span> = <span class="mi">5</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk4e" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk4e"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat, S n = <span class="mi">0</span> -&gt; <span class="mi">2</span> + <span class="mi">2</span> = <span class="mi">5</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk4f" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk4f"><span class="highlight"><span class="nb">intros</span> n contra.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">S n = <span class="mi">0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="mi">2</span> + <span class="mi">2</span> = <span class="mi">5</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">discriminate</span> contra.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk50" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk50"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">discriminate_ex2</span> : <span class="kr">forall</span> (<span class="nv">n</span> <span class="nv">m</span> : nat),
  false = true -&gt;
  [n] = [m].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> : nat, false = true -&gt; [n] = [m]</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk51" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk51"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> : nat, false = true -&gt; [n] = [m]</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk52" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk52"><span class="highlight"><span class="nb">intros</span> n m contra.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">contra</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">false = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">[n] = [m]</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">discriminate</span> contra.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
If you find the principle of explosion confusing, remember
    that these proofs are <i>not</i> showing that the conclusion of the
    statement holds.  Rather, they are showing that, if the
    nonsensical situation described by the premise did somehow arise,
    then the nonsensical conclusion would follow.  We'll explore the
    principle of explosion of more detail in the next chapter. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
<a name="lab10"></a><h4 class="section">Exercise: 1 star, standard (discriminate_ex3)</h4>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk53" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk53"><span class="highlight"><span class="kn">Example</span> <span class="nf">discriminate_ex3</span> :
  <span class="kr">forall</span> (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">x</span> <span class="nv">y</span> <span class="nv">z</span> : X) (<span class="nv">l</span> <span class="nv">j</span> : list X),
    x :: y :: l = [] -&gt;
    x = z.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">x</span> <span class="nv">y</span> <span class="nv">z</span> : X) (<span class="nv">l</span> : list X),
list X -&gt; x :: y :: l = [ ] -&gt; x = z</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk54" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk54"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">x</span> <span class="nv">y</span> <span class="nv">z</span> : X) (<span class="nv">l</span> : list X),
list X -&gt; x :: y :: l = [ ] -&gt; x = z</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">  <span class="c">(* FILL IN HERE *)</span></span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Admitted</span>.</span></span></span></pre><div class="doc">
<font size="-2">‚òê</font>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
The injectivity of constructors allows us to reason that
    <span class="inlinecode"><span class="id" title="keyword">‚àÄ</span></span> <span class="inlinecode">(<span class="id" title="var">n</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">nat</span>),</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">‚Üí</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>.  The converse of this
    implication is an instance of a more general fact about both
    constructors and functions, which we will find convenient in a few
    places below: 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk55" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk55"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">f_equal</span> : <span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">f</span>: A -&gt; B) (<span class="nv">x</span> <span class="nv">y</span>: A),
  x = y -&gt; f x = f y.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">f</span> : A -&gt; B) (<span class="nv">x</span> <span class="nv">y</span> : A),
x = y -&gt; f x = f y</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk56" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk56"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>) (<span class="nv">f</span> : A -&gt; B) (<span class="nv">x</span> <span class="nv">y</span> : A),
x = y -&gt; f x = f y</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk57" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk57"><span class="highlight"><span class="nb">intros</span> A B f x y eq.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">x = y</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">f x = f y</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk58" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk58"><span class="highlight"><span class="nb">rewrite</span> eq.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">x = y</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">f y = f y</span></div></blockquote></div></div></small><span class="coq-wsp">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="coq-wsp">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(* ################################################################# *)</span></span></span></pre><div class="doc">
<a name="lab11"></a><h1 class="section">Using Tactics on Hypotheses</h1>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
By default, most tactics work on the goal formula and leave
    the context unchanged.  However, most tactics also have a variant
    that performs a similar operation on a statement in the context.

<div class="paragraph"> </div>

    For example, the tactic <span class="inlinecode"><span class="id" title="tactic">simpl</span></span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span> performs simplification in
    the hypothesis named <span class="inlinecode"><span class="id" title="var">H</span></span> in the context. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk59" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk59"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">S_inj</span> : <span class="kr">forall</span> (<span class="nv">n</span> <span class="nv">m</span> : nat) (<span class="nv">b</span> : bool),
     (S n) =? (S m) = b  -&gt;
     n =? m = b.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">n</span> <span class="nv">m</span> : nat) (<span class="nv">b</span> : bool),
(S n =? S m) = b -&gt; (n =? m) = b</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk5a" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk5a"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">n</span> <span class="nv">m</span> : nat) (<span class="nv">b</span> : bool),
(S n =? S m) = b -&gt; (n =? m) = b</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk5b" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk5b"><span class="highlight"><span class="nb">intros</span> n m b H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">b</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(S n =? S m) = b</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(n =? m) = b</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk5c" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk5c"><span class="highlight"><span class="nb">simpl</span> <span class="kr">in</span> H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">b</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? m) = b</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(n =? m) = b</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> H.</span></span><span class="coq-wsp">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Similarly, <span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">L</span></span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span> matches some conditional statement
    <span class="inlinecode"><span class="id" title="var">L</span></span> (of the form <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">‚Üí</span> <span class="inlinecode"><span class="id" title="var">Y</span></span>, say) against a hypothesis <span class="inlinecode"><span class="id" title="var">H</span></span> in the
    context.  However, unlike ordinary <span class="inlinecode"><span class="id" title="tactic">apply</span></span> (which rewrites a goal
    matching <span class="inlinecode"><span class="id" title="var">Y</span></span> into a subgoal <span class="inlinecode"><span class="id" title="var">X</span></span>), <span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">L</span></span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span> matches <span class="inlinecode"><span class="id" title="var">H</span></span>
    against <span class="inlinecode"><span class="id" title="var">X</span></span> and, if successful, replaces it with <span class="inlinecode"><span class="id" title="var">Y</span></span>.

<div class="paragraph"> </div>

    In other words, <span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">L</span></span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span> gives us a form of "forward
    reasoning": from <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">‚Üí</span> <span class="inlinecode"><span class="id" title="var">Y</span></span> and a hypothesis matching <span class="inlinecode"><span class="id" title="var">X</span></span>, it
    produces a hypothesis matching <span class="inlinecode"><span class="id" title="var">X</span></span>.  By contrast, <span class="inlinecode"><span class="id" title="tactic">apply</span></span> <span class="inlinecode"><span class="id" title="var">L</span></span> is
    "backward reasoning": it says that if we know <span class="inlinecode"><span class="id" title="var">X</span></span> <span class="inlinecode">‚Üí</span> <span class="inlinecode"><span class="id" title="var">Y</span></span> and we
    are trying to prove <span class="inlinecode"><span class="id" title="var">Y</span></span>, it suffices to prove <span class="inlinecode"><span class="id" title="var">X</span></span>.

<div class="paragraph"> </div>

    Here is a variant of a proof from above, using forward reasoning
    throughout instead of backward reasoning. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk5d" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk5d"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">silly3&#39;</span> : <span class="kr">forall</span> (<span class="nv">n</span> : nat),
  (n =? <span class="mi">5</span> = true -&gt; (S (S n)) =? <span class="mi">7</span> = true) -&gt;
  true = (n =? <span class="mi">5</span>)  -&gt;
  true = ((S (S n)) =? <span class="mi">7</span>).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat,
((n =? <span class="mi">5</span>) = true -&gt; (S (S n) =? <span class="mi">7</span>) = true) -&gt;
true = (n =? <span class="mi">5</span>) -&gt; true = (S (S n) =? <span class="mi">7</span>)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk5e" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk5e"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat,
((n =? <span class="mi">5</span>) = true -&gt; (S (S n) =? <span class="mi">7</span>) = true) -&gt;
true = (n =? <span class="mi">5</span>) -&gt; true = (S (S n) =? <span class="mi">7</span>)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk5f" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk5f"><span class="highlight"><span class="nb">intros</span> n eq H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">5</span>) = true -&gt; (S (S n) =? <span class="mi">7</span>) = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">true = (n =? <span class="mi">5</span>)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">true = (S (S n) =? <span class="mi">7</span>)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk60" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk60"><span class="highlight"><span class="nb">symmetry in</span> H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">5</span>) = true -&gt; (S (S n) =? <span class="mi">7</span>) = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">5</span>) = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">true = (S (S n) =? <span class="mi">7</span>)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk61" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk61"><span class="highlight"><span class="nb">apply</span> eq <span class="kr">in</span> H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">5</span>) = true -&gt; (S (S n) =? <span class="mi">7</span>) = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(S (S n) =? <span class="mi">7</span>) = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">true = (S (S n) =? <span class="mi">7</span>)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk62" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk62"><span class="highlight"><span class="nb">symmetry in</span> H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">5</span>) = true -&gt; (S (S n) =? <span class="mi">7</span>) = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">true = (S (S n) =? <span class="mi">7</span>)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">true = (S (S n) =? <span class="mi">7</span>)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> H.</span></span><span class="coq-wsp">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Forward reasoning starts from what is <i>given</i> (premises,
    previously proven theorems) and iteratively draws conclusions from
    them until the goal is reached.  Backward reasoning starts from
    the <i>goal</i>, and iteratively reasons about what would imply the
    goal, until premises or previously proven theorems are reached.

<div class="paragraph"> </div>

    If you've seen informal proofs before (for example, in a math or
    computer science class), they probably used forward reasoning.  In
    general, idiomatic use of Coq tends to favor backward reasoning,
    but in some situations the forward style can be easier to think
    about.  
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
<a name="lab12"></a><h4 class="section">Exercise: 3 stars, standard, recommended (plus_n_n_injective)</h4>
<div class="paragraph"> </div>

    Practice using "in" variants in this proof.  (Hint: use
    <span class="inlinecode"><span class="id" title="var">plus_n_Sm</span></span>.) 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk63" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk63"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">plus_n_n_injective</span> : <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span>,
     n + n = m + m -&gt;
     n = m.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> : nat, n + n = m + m -&gt; n = m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk64" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk64"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> : nat, n + n = m + m -&gt; n = m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk65" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk65"><span class="highlight"><span class="nb">intros</span> n.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : nat, n + n = m + m -&gt; n = m</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk66" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk66"><span class="highlight"><span class="nb">induction</span> n <span class="kr">as</span> [| n&#39;].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : nat, <span class="mi">0</span> + <span class="mi">0</span> = m + m -&gt; <span class="mi">0</span> = m</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Tactics-v-chk67" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : nat, n&#39; + n&#39; = m + m -&gt; n&#39; = m</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Tactics-v-chk67"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : nat, S n&#39; + S n&#39; = m + m -&gt; S n&#39; = m</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">  <span class="c">(* FILL IN HERE *)</span></span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Admitted</span>.</span></span></span></pre><div class="doc">
<font size="-2">‚òê</font>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight"><span class="c">(* ################################################################# *)</span></span></span></pre><div class="doc">
<a name="lab13"></a><h1 class="section">Varying the Induction Hypothesis</h1>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
Sometimes it is important to control the exact form of the
    induction hypothesis when carrying out inductive proofs in Coq.
    In particular, we need to be careful about which of the
    assumptions we move (using <span class="inlinecode"><span class="id" title="tactic">intros</span></span>) from the goal to the context
    before invoking the <span class="inlinecode"><span class="id" title="tactic">induction</span></span> tactic.  For example, suppose
    we want to show that <span class="inlinecode"><span class="id" title="var">double</span></span> is injective -- i.e., that it maps
    different arguments to different results:

<div class="paragraph"> </div>

       Theorem double_injective: forall n m,
         double n = double m -&gt; n = m.

<div class="paragraph"> </div>

    The way we <i>start</i> this proof is a bit delicate: if we begin with

<div class="paragraph"> </div>

       intros n. induction n.

<div class="paragraph"> </div>

    all is well.  But if we begin it with

<div class="paragraph"> </div>

       intros n m. induction n.

<div class="paragraph"> </div>

    we get stuck in the middle of the inductive case... 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk68" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk68"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">double_injective_FAILED</span> : <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span>,
     double n = double m -&gt;
     n = m.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> : nat, double n = double m -&gt; n = m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk69" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk69"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> : nat, double n = double m -&gt; n = m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk6a" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk6a"><span class="highlight"><span class="nb">intros</span> n m.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">double n = double m -&gt; n = m</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk6b" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk6b"><span class="highlight"><span class="nb">induction</span> n <span class="kr">as</span> [| n&#39;].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">double <span class="mi">0</span> = double m -&gt; <span class="mi">0</span> = m</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Tactics-v-chk6c" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n', m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double n&#39; = double m -&gt; n&#39; = m</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Tactics-v-chk6c"><hr></label><div class="goal-conclusion"><span class="highlight">double (S n&#39;) = double m -&gt; S n&#39; = m</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk6d" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk6d"><span class="highlight">- <span class="c">(* n = O *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">double <span class="mi">0</span> = double m -&gt; <span class="mi">0</span> = m</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk6e" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk6e"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="mi">0</span> = double m -&gt; <span class="mi">0</span> = m</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk6f" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk6f"><span class="highlight"><span class="nb">intros</span> eq.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="mi">0</span> = double m</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="mi">0</span> = m</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk70" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk70"><span class="highlight"><span class="nb">destruct</span> m <span class="kr">as</span> [| m&#39;] <span class="nb">eqn</span>:E.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = <span class="mi">0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="mi">0</span> = double <span class="mi">0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="mi">0</span> = <span class="mi">0</span></span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Tactics-v-chk71" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m, m'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = S m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="mi">0</span> = double (S m&#39;)</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Tactics-v-chk71"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="mi">0</span> = S m&#39;</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk72" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk72"><span class="highlight">+ <span class="c">(* m = O *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = <span class="mi">0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="mi">0</span> = double <span class="mi">0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="mi">0</span> = <span class="mi">0</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk73" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk73"><span class="highlight">+ <span class="c">(* m = S m&#39; *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m, m'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = S m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="mi">0</span> = double (S m&#39;)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="mi">0</span> = S m&#39;</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">discriminate</span> eq.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk74" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk74"><span class="highlight">- <span class="c">(* n = S n&#39; *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n', m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double n&#39; = double m -&gt; n&#39; = m</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">double (S n&#39;) = double m -&gt; S n&#39; = m</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk75" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk75"><span class="highlight"><span class="nb">intros</span> eq.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n', m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double n&#39; = double m -&gt; n&#39; = m</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double (S n&#39;) = double m</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">S n&#39; = m</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk76" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk76"><span class="highlight"><span class="nb">destruct</span> m <span class="kr">as</span> [| m&#39;] <span class="nb">eqn</span>:E.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n', m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = <span class="mi">0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double n&#39; = double <span class="mi">0</span> -&gt; n&#39; = <span class="mi">0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double (S n&#39;) = double <span class="mi">0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">S n&#39; = <span class="mi">0</span></span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Tactics-v-chk77" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n', m, m'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = S m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double n&#39; = double (S m&#39;) -&gt; n&#39; = S m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double (S n&#39;) = double (S m&#39;)</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Tactics-v-chk77"><hr></label><div class="goal-conclusion"><span class="highlight">S n&#39; = S m&#39;</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk78" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk78"><span class="highlight">+ <span class="c">(* m = O *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n', m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = <span class="mi">0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double n&#39; = double <span class="mi">0</span> -&gt; n&#39; = <span class="mi">0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double (S n&#39;) = double <span class="mi">0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">S n&#39; = <span class="mi">0</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">discriminate</span> eq.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk79" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk79"><span class="highlight">+ <span class="c">(* m = S m&#39; *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n', m, m'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = S m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double n&#39; = double (S m&#39;) -&gt; n&#39; = S m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double (S n&#39;) = double (S m&#39;)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">S n&#39; = S m&#39;</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk7a" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk7a"><span class="highlight"><span class="nb">apply</span> <span class="nb">f_equal</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n', m, m'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = S m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double n&#39; = double (S m&#39;) -&gt; n&#39; = S m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double (S n&#39;) = double (S m&#39;)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">n&#39; = m&#39;</span></div></blockquote></div></div></small></span></pre><div class="doc">
At this point, the induction hypothesis, <span class="inlinecode"><span class="id" title="var">IHn'</span></span>, does <i>not</i> give us
    <span class="inlinecode"><span class="id" title="var">n'</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m'</span></span> -- there is an extra <span class="inlinecode"><span class="id" title="var">S</span></span> in the way -- so the goal is
    not provable. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight">      </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Abort</span>.</span></span></span></pre><div class="doc">
What went wrong? 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
The problem is that, at the point we invoke the induction
    hypothesis, we have already introduced <span class="inlinecode"><span class="id" title="var">m</span></span> into the context --
    intuitively, we have told Coq, "Let's consider some particular <span class="inlinecode"><span class="id" title="var">n</span></span>
    and <span class="inlinecode"><span class="id" title="var">m</span></span>..." and we now have to prove that, if <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">double</span></span>
<span class="inlinecode"><span class="id" title="var">m</span></span> for <i>these particular</i> <span class="inlinecode"><span class="id" title="var">n</span></span> and <span class="inlinecode"><span class="id" title="var">m</span></span>, then <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>.

<div class="paragraph"> </div>

    The next tactic, <span class="inlinecode"><span class="id" title="tactic">induction</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> says to Coq: We are going to show
    the goal by induction on <span class="inlinecode"><span class="id" title="var">n</span></span>.  That is, we are going to prove, for
    <i>all</i> <span class="inlinecode"><span class="id" title="var">n</span></span>, that the proposition

<div class="paragraph"> </div>
<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> = "if <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span>, then <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>"

</li>
</ul>
<div class="paragraph"> </div>

    holds, by showing

<div class="paragraph"> </div>
<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode"><span class="id" title="var">O</span></span>
<div class="paragraph"> </div>

         (i.e., "if <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">O</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> then <span class="inlinecode"><span class="id" title="var">O</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>") and

<div class="paragraph"> </div>
</li>
<li> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">‚Üí</span> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span>)</span>
<div class="paragraph"> </div>

        (i.e., "if <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> then <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>" implies "if
        <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span>)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> then <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>").

</li>
</ul>
<div class="paragraph"> </div>

    If we look closely at the second statement, it is saying something
    rather strange: it says that, for a <i>particular</i> <span class="inlinecode"><span class="id" title="var">m</span></span>, if we know

<div class="paragraph"> </div>
<ul class="doclist">
<li> "if <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> then <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>"

</li>
</ul>
<div class="paragraph"> </div>

    then we can prove

<div class="paragraph"> </div>
<ul class="doclist">
<li> "if <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span>)</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> then <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>".

</li>
</ul>
<div class="paragraph"> </div>

    To see why this is strange, let's think of a particular <span class="inlinecode"><span class="id" title="var">m</span></span> --
    say, <span class="inlinecode">5</span>.  The statement is then saying that, if we know

<div class="paragraph"> </div>
<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="var">Q</span></span> = "if <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode">10</span> then <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode">5</span>"

</li>
</ul>
<div class="paragraph"> </div>

    then we can prove

<div class="paragraph"> </div>
<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="var">R</span></span> = "if <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span>)</span> <span class="inlinecode">=</span> <span class="inlinecode">10</span> then <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode">5</span>".

</li>
</ul>
<div class="paragraph"> </div>

    But knowing <span class="inlinecode"><span class="id" title="var">Q</span></span> doesn't give us any help at all with proving
    <span class="inlinecode"><span class="id" title="var">R</span></span>!  (If we tried to prove <span class="inlinecode"><span class="id" title="var">R</span></span> from <span class="inlinecode"><span class="id" title="var">Q</span></span>, we would start with
    something like "Suppose <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span>)</span> <span class="inlinecode">=</span> <span class="inlinecode">10</span>..." but then we'd be
    stuck: knowing that <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n</span>)</span> is <span class="inlinecode">10</span> tells us nothing about
    whether <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> is <span class="inlinecode">10</span>, so <span class="inlinecode"><span class="id" title="var">Q</span></span> is useless.) 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
Trying to carry out this proof by induction on <span class="inlinecode"><span class="id" title="var">n</span></span> when <span class="inlinecode"><span class="id" title="var">m</span></span> is
    already in the context doesn't work because we are then trying to
    prove a statement involving <i>every</i> <span class="inlinecode"><span class="id" title="var">n</span></span> but just a <i>single</i> <span class="inlinecode"><span class="id" title="var">m</span></span>. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
The successful proof of <span class="inlinecode"><span class="id" title="var">double_injective</span></span> leaves <span class="inlinecode"><span class="id" title="var">m</span></span> in the goal
    statement at the point where the <span class="inlinecode"><span class="id" title="tactic">induction</span></span> tactic is invoked on
    <span class="inlinecode"><span class="id" title="var">n</span></span>: 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk7b" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk7b"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">double_injective</span> : <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span>,
     double n = double m -&gt;
     n = m.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> : nat, double n = double m -&gt; n = m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk7c" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk7c"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> : nat, double n = double m -&gt; n = m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk7d" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk7d"><span class="highlight"><span class="nb">intros</span> n.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : nat, double n = double m -&gt; n = m</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk7e" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk7e"><span class="highlight"><span class="nb">induction</span> n <span class="kr">as</span> [| n&#39;].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : nat, double <span class="mi">0</span> = double m -&gt; <span class="mi">0</span> = m</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Tactics-v-chk7f" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : nat, double n&#39; = double m -&gt; n&#39; = m</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Tactics-v-chk7f"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : nat, double (S n&#39;) = double m -&gt; S n&#39; = m</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk80" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk80"><span class="highlight">- <span class="c">(* n = O *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : nat, double <span class="mi">0</span> = double m -&gt; <span class="mi">0</span> = m</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk81" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk81"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : nat, <span class="mi">0</span> = double m -&gt; <span class="mi">0</span> = m</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk82" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk82"><span class="highlight"><span class="nb">intros</span> m eq.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="mi">0</span> = double m</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="mi">0</span> = m</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk83" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk83"><span class="highlight"><span class="nb">destruct</span> m <span class="kr">as</span> [| m&#39;] <span class="nb">eqn</span>:E.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = <span class="mi">0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="mi">0</span> = double <span class="mi">0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="mi">0</span> = <span class="mi">0</span></span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Tactics-v-chk84" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m, m'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = S m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="mi">0</span> = double (S m&#39;)</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Tactics-v-chk84"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="mi">0</span> = S m&#39;</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk85" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk85"><span class="highlight">+ <span class="c">(* m = O *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = <span class="mi">0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="mi">0</span> = double <span class="mi">0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="mi">0</span> = <span class="mi">0</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk86" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk86"><span class="highlight">+ <span class="c">(* m = S m&#39; *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m, m'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = S m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="mi">0</span> = double (S m&#39;)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="mi">0</span> = S m&#39;</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">discriminate</span> eq.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk87" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk87"><span class="highlight">- <span class="c">(* n = S n&#39; *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : nat, double n&#39; = double m -&gt; n&#39; = m</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : nat, double (S n&#39;) = double m -&gt; S n&#39; = m</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk88" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk88"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : nat, double n&#39; = double m -&gt; n&#39; = m</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : nat,
S (S (double n&#39;)) = double m -&gt; S n&#39; = m</span></div></blockquote></div></div></small></span></pre><div class="doc">
Notice that both the goal and the induction hypothesis are
    different this time: the goal asks us to prove something more
    general (i.e., to prove the statement for <i>every</i> <span class="inlinecode"><span class="id" title="var">m</span></span>), but the IH
    is correspondingly more flexible, allowing us to choose any <span class="inlinecode"><span class="id" title="var">m</span></span> we
    like when we apply the IH. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight">    </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk89" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk89"><span class="highlight"><span class="nb">intros</span> m eq.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">m0</span> : nat,
double n&#39; = double m0 -&gt; n&#39; = m0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">S (S (double n&#39;)) = double m</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">S n&#39; = m</span></div></blockquote></div></div></small></span></pre><div class="doc">
Now we've chosen a particular <span class="inlinecode"><span class="id" title="var">m</span></span> and introduced the assumption
    that <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span>.  Since we are doing a case analysis on
    <span class="inlinecode"><span class="id" title="var">n</span></span>, we also need a case analysis on <span class="inlinecode"><span class="id" title="var">m</span></span> to keep the two "in sync." 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight">    </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk8a" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk8a"><span class="highlight"><span class="nb">destruct</span> m <span class="kr">as</span> [| m&#39;] <span class="nb">eqn</span>:E.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">m0</span> : nat,
double n&#39; = double m0 -&gt; n&#39; = m0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = <span class="mi">0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">S (S (double n&#39;)) = double <span class="mi">0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">S n&#39; = <span class="mi">0</span></span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Tactics-v-chk8b" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">m0</span> : nat,
double n&#39; = double m0 -&gt; n&#39; = m0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m, m'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = S m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">S (S (double n&#39;)) = double (S m&#39;)</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Tactics-v-chk8b"><hr></label><div class="goal-conclusion"><span class="highlight">S n&#39; = S m&#39;</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk8c" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk8c"><span class="highlight">+ <span class="c">(* m = O *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">m0</span> : nat,
double n&#39; = double m0 -&gt; n&#39; = m0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = <span class="mi">0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">S (S (double n&#39;)) = double <span class="mi">0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">S n&#39; = <span class="mi">0</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk8d" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk8d"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">m0</span> : nat,
double n&#39; = double m0 -&gt; n&#39; = m0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = <span class="mi">0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">S (S (double n&#39;)) = double <span class="mi">0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">S n&#39; = <span class="mi">0</span></span></div></blockquote></div></div></small></span></pre><div class="doc">
The 0 case is trivial: 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight">      </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">discriminate</span> eq.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk8e" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk8e"><span class="highlight">+ <span class="c">(* m = S m&#39; *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">m0</span> : nat,
double n&#39; = double m0 -&gt; n&#39; = m0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m, m'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = S m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">S (S (double n&#39;)) = double (S m&#39;)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">S n&#39; = S m&#39;</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk8f" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk8f"><span class="highlight"><span class="nb">apply</span> <span class="nb">f_equal</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">m0</span> : nat,
double n&#39; = double m0 -&gt; n&#39; = m0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m, m'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = S m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">S (S (double n&#39;)) = double (S m&#39;)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">n&#39; = m&#39;</span></div></blockquote></div></div></small></span></pre><div class="doc">
At this point, since we are in the second branch of the <span class="inlinecode"><span class="id" title="tactic">destruct</span></span>
<span class="inlinecode"><span class="id" title="var">m</span></span>, the <span class="inlinecode"><span class="id" title="var">m'</span></span> mentioned in the context is the predecessor of the
    <span class="inlinecode"><span class="id" title="var">m</span></span> we started out talking about.  Since we are also in the <span class="inlinecode"><span class="id" title="var">S</span></span>
    branch of the induction, this is perfect: if we instantiate the
    generic <span class="inlinecode"><span class="id" title="var">m</span></span> in the IH with the current <span class="inlinecode"><span class="id" title="var">m'</span></span> (this instantiation is
    performed automatically by the <span class="inlinecode"><span class="id" title="tactic">apply</span></span> in the next step), then
    <span class="inlinecode"><span class="id" title="var">IHn'</span></span> gives us exactly what we need to finish the proof. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight">      </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk90" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk90"><span class="highlight"><span class="nb">apply</span> IHn&#39;.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">m0</span> : nat,
double n&#39; = double m0 -&gt; n&#39; = m0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m, m'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = S m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">S (S (double n&#39;)) = double (S m&#39;)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">double n&#39; = double m&#39;</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk91" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk91"><span class="highlight"><span class="nb">injection</span> eq <span class="kr">as</span> goal.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHn'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">m0</span> : nat,
double n&#39; = double m0 -&gt; n&#39; = m0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m, m'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = S m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">goal</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double n&#39; = double m&#39;</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">double n&#39; = double m&#39;</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> goal.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
What you should take away from all this is that we need to be
    careful, when using induction, that we are not trying to prove
    something too specific: To prove a property of <span class="inlinecode"><span class="id" title="var">n</span></span> and <span class="inlinecode"><span class="id" title="var">m</span></span> by
    induction on <span class="inlinecode"><span class="id" title="var">n</span></span>, it is sometimes important to leave <span class="inlinecode"><span class="id" title="var">m</span></span>
    generic. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
The following exercise requires the same pattern. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
<a name="lab14"></a><h4 class="section">Exercise: 2 stars, standard (eqb_true)</h4>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk92" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk92"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">eqb_true</span> : <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span>,
    n =? m = true -&gt; n = m.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> : nat, (n =? m) = true -&gt; n = m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk93" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk93"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> : nat, (n =? m) = true -&gt; n = m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">  <span class="c">(* FILL IN HERE *)</span></span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Admitted</span>.</span></span></span></pre><div class="doc">
<font size="-2">‚òê</font>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
<a name="lab15"></a><h4 class="section">Exercise: 2 stars, advanced (eqb_true_informal)</h4>
<div class="paragraph"> </div>

    Give a careful informal proof of <span class="inlinecode"><span class="id" title="var">eqb_true</span></span>, being as explicit
    as possible about quantifiers. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight"><span class="c">(* FILL IN HERE *)</span>

<span class="c">(* Do not modify the following line: *)</span>
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">manual_grade_for_informal_proof</span> : option (nat*string) := None.</span></span></span></pre><div class="doc">
<font size="-2">‚òê</font>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
The strategy of doing fewer <span class="inlinecode"><span class="id" title="tactic">intros</span></span> before an <span class="inlinecode"><span class="id" title="tactic">induction</span></span> to
    obtain a more general IH doesn't always work by itself; sometimes
    some <i>rearrangement</i> of quantified variables is needed.  Suppose,
    for example, that we wanted to prove <span class="inlinecode"><span class="id" title="var">double_injective</span></span> by
    induction on <span class="inlinecode"><span class="id" title="var">m</span></span> instead of <span class="inlinecode"><span class="id" title="var">n</span></span>. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk94" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk94"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">double_injective_take2_FAILED</span> : <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span>,
     double n = double m -&gt;
     n = m.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> : nat, double n = double m -&gt; n = m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk95" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk95"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> : nat, double n = double m -&gt; n = m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk96" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk96"><span class="highlight"><span class="nb">intros</span> n m.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">double n = double m -&gt; n = m</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk97" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk97"><span class="highlight"><span class="nb">induction</span> m <span class="kr">as</span> [| m&#39;].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">double n = double <span class="mi">0</span> -&gt; n = <span class="mi">0</span></span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Tactics-v-chk98" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHm'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double n = double m&#39; -&gt; n = m&#39;</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Tactics-v-chk98"><hr></label><div class="goal-conclusion"><span class="highlight">double n = double (S m&#39;) -&gt; n = S m&#39;</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk99" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk99"><span class="highlight">- <span class="c">(* m = O *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">double n = double <span class="mi">0</span> -&gt; n = <span class="mi">0</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk9a" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk9a"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">double n = <span class="mi">0</span> -&gt; n = <span class="mi">0</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk9b" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk9b"><span class="highlight"><span class="nb">intros</span> eq.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double n = <span class="mi">0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">n = <span class="mi">0</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk9c" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk9c"><span class="highlight"><span class="nb">destruct</span> n <span class="kr">as</span> [| n&#39;] <span class="nb">eqn</span>:E.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = <span class="mi">0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double <span class="mi">0</span> = <span class="mi">0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="mi">0</span> = <span class="mi">0</span></span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Tactics-v-chk9d" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = S n&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double (S n&#39;) = <span class="mi">0</span></span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Tactics-v-chk9d"><hr></label><div class="goal-conclusion"><span class="highlight">S n&#39; = <span class="mi">0</span></span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk9e" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk9e"><span class="highlight">+ <span class="c">(* n = O *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = <span class="mi">0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double <span class="mi">0</span> = <span class="mi">0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="mi">0</span> = <span class="mi">0</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk9f" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk9f"><span class="highlight">+ <span class="c">(* n = S n&#39; *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = S n&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double (S n&#39;) = <span class="mi">0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">S n&#39; = <span class="mi">0</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">discriminate</span> eq.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chka0" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chka0"><span class="highlight">- <span class="c">(* m = S m&#39; *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHm'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double n = double m&#39; -&gt; n = m&#39;</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">double n = double (S m&#39;) -&gt; n = S m&#39;</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chka1" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chka1"><span class="highlight"><span class="nb">intros</span> eq.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHm'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double n = double m&#39; -&gt; n = m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double n = double (S m&#39;)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">n = S m&#39;</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chka2" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chka2"><span class="highlight"><span class="nb">destruct</span> n <span class="kr">as</span> [| n&#39;] <span class="nb">eqn</span>:E.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = <span class="mi">0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHm'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double <span class="mi">0</span> = double m&#39; -&gt; <span class="mi">0</span> = m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double <span class="mi">0</span> = double (S m&#39;)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="mi">0</span> = S m&#39;</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Tactics-v-chka3" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m', n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = S n&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHm'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double (S n&#39;) = double m&#39; -&gt; S n&#39; = m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double (S n&#39;) = double (S m&#39;)</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Tactics-v-chka3"><hr></label><div class="goal-conclusion"><span class="highlight">S n&#39; = S m&#39;</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chka4" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chka4"><span class="highlight">+ <span class="c">(* n = O *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = <span class="mi">0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHm'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double <span class="mi">0</span> = double m&#39; -&gt; <span class="mi">0</span> = m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double <span class="mi">0</span> = double (S m&#39;)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="mi">0</span> = S m&#39;</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">discriminate</span> eq.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chka5" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chka5"><span class="highlight">+ <span class="c">(* n = S n&#39; *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m', n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = S n&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHm'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double (S n&#39;) = double m&#39; -&gt; S n&#39; = m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double (S n&#39;) = double (S m&#39;)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">S n&#39; = S m&#39;</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chka6" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chka6"><span class="highlight"><span class="nb">apply</span> <span class="nb">f_equal</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m', n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = S n&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHm'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double (S n&#39;) = double m&#39; -&gt; S n&#39; = m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double (S n&#39;) = double (S m&#39;)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">n&#39; = m&#39;</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">        <span class="c">(* Stuck again here, just like before. *)</span>
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Abort</span>.</span></span></span></pre><div class="doc">
The problem is that, to do induction on <span class="inlinecode"><span class="id" title="var">m</span></span>, we must first
    introduce <span class="inlinecode"><span class="id" title="var">n</span></span>.  (If we simply say <span class="inlinecode"><span class="id" title="tactic">induction</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> without
    introducing anything first, Coq will automatically introduce <span class="inlinecode"><span class="id" title="var">n</span></span>
    for us!)  
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
What can we do about this?  One possibility is to rewrite the
    statement of the lemma so that <span class="inlinecode"><span class="id" title="var">m</span></span> is quantified before <span class="inlinecode"><span class="id" title="var">n</span></span>.  This
    works, but it's not nice: We don't want to have to twist the
    statements of lemmas to fit the needs of a particular strategy for
    proving them!  Rather we want to state them in the clearest and
    most natural way. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
What we can do instead is to first introduce all the quantified
    variables and then <i>re-generalize</i> one or more of them,
    selectively taking variables out of the context and putting them
    back at the beginning of the goal.  The <span class="inlinecode"><span class="id" title="tactic">generalize</span></span> <span class="inlinecode"><span class="id" title="tactic">dependent</span></span>
    tactic does this. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chka7" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chka7"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">double_injective_take2</span> : <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span>,
     double n = double m -&gt;
     n = m.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> : nat, double n = double m -&gt; n = m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chka8" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chka8"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> : nat, double n = double m -&gt; n = m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chka9" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chka9"><span class="highlight"><span class="nb">intros</span> n m.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">double n = double m -&gt; n = m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">  <span class="c">(* [n] and [m] are both in the context *)</span>
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkaa" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkaa"><span class="highlight"><span class="nb">generalize dependent</span> n.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat, double n = double m -&gt; n = m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">  <span class="c">(* Now [n] is back in the goal and we can do induction on</span>
<span class="c">     [m] and get a sufficiently general IH. *)</span>
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkab" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkab"><span class="highlight"><span class="nb">induction</span> m <span class="kr">as</span> [| m&#39;].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat, double n = double <span class="mi">0</span> -&gt; n = <span class="mi">0</span></span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Tactics-v-chkac" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHm'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat, double n = double m&#39; -&gt; n = m&#39;</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Tactics-v-chkac"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat, double n = double (S m&#39;) -&gt; n = S m&#39;</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkad" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkad"><span class="highlight">- <span class="c">(* m = O *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat, double n = double <span class="mi">0</span> -&gt; n = <span class="mi">0</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkae" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkae"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat, double n = <span class="mi">0</span> -&gt; n = <span class="mi">0</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkaf" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkaf"><span class="highlight"><span class="nb">intros</span> n eq.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double n = <span class="mi">0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">n = <span class="mi">0</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkb0" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkb0"><span class="highlight"><span class="nb">destruct</span> n <span class="kr">as</span> [| n&#39;] <span class="nb">eqn</span>:E.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = <span class="mi">0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double <span class="mi">0</span> = <span class="mi">0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="mi">0</span> = <span class="mi">0</span></span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Tactics-v-chkb1" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = S n&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double (S n&#39;) = <span class="mi">0</span></span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Tactics-v-chkb1"><hr></label><div class="goal-conclusion"><span class="highlight">S n&#39; = <span class="mi">0</span></span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkb2" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkb2"><span class="highlight">+ <span class="c">(* n = O *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = <span class="mi">0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double <span class="mi">0</span> = <span class="mi">0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="mi">0</span> = <span class="mi">0</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkb3" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkb3"><span class="highlight">+ <span class="c">(* n = S n&#39; *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = S n&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double (S n&#39;) = <span class="mi">0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">S n&#39; = <span class="mi">0</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">discriminate</span> eq.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkb4" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkb4"><span class="highlight">- <span class="c">(* m = S m&#39; *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHm'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat, double n = double m&#39; -&gt; n = m&#39;</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat, double n = double (S m&#39;) -&gt; n = S m&#39;</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkb5" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkb5"><span class="highlight"><span class="nb">intros</span> n eq.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHm'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">n0</span> : nat,
double n0 = double m&#39; -&gt; n0 = m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double n = double (S m&#39;)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">n = S m&#39;</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkb6" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkb6"><span class="highlight"><span class="nb">destruct</span> n <span class="kr">as</span> [| n&#39;] <span class="nb">eqn</span>:E.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHm'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">n0</span> : nat,
double n0 = double m&#39; -&gt; n0 = m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = <span class="mi">0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double <span class="mi">0</span> = double (S m&#39;)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="mi">0</span> = S m&#39;</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Tactics-v-chkb7" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHm'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">n0</span> : nat,
double n0 = double m&#39; -&gt; n0 = m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">n, n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = S n&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double (S n&#39;) = double (S m&#39;)</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Tactics-v-chkb7"><hr></label><div class="goal-conclusion"><span class="highlight">S n&#39; = S m&#39;</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkb8" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkb8"><span class="highlight">+ <span class="c">(* n = O *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHm'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">n0</span> : nat,
double n0 = double m&#39; -&gt; n0 = m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = <span class="mi">0</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double <span class="mi">0</span> = double (S m&#39;)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="mi">0</span> = S m&#39;</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">discriminate</span> eq.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkb9" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkb9"><span class="highlight">+ <span class="c">(* n = S n&#39; *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHm'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">n0</span> : nat,
double n0 = double m&#39; -&gt; n0 = m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">n, n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = S n&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double (S n&#39;) = double (S m&#39;)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">S n&#39; = S m&#39;</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkba" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkba"><span class="highlight"><span class="nb">apply</span> <span class="nb">f_equal</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHm'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">n0</span> : nat,
double n0 = double m&#39; -&gt; n0 = m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">n, n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = S n&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double (S n&#39;) = double (S m&#39;)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">n&#39; = m&#39;</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkbb" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkbb"><span class="highlight"><span class="nb">apply</span> IHm&#39;.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHm'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">n0</span> : nat,
double n0 = double m&#39; -&gt; n0 = m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">n, n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = S n&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double (S n&#39;) = double (S m&#39;)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">double n&#39; = double m&#39;</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkbc" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkbc"><span class="highlight"><span class="nb">injection</span> eq <span class="kr">as</span> goal.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHm'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">n0</span> : nat,
double n0 = double m&#39; -&gt; n0 = m&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">n, n'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = S n&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">goal</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">double n&#39; = double m&#39;</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">double n&#39; = double m&#39;</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> goal.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Let's look at an informal proof of this theorem.  Note that
    the proposition we prove by induction leaves <span class="inlinecode"><span class="id" title="var">n</span></span> quantified,
    corresponding to the use of generalize dependent in our formal
    proof.

<div class="paragraph"> </div>
<i>Theorem</i>: For any nats <span class="inlinecode"><span class="id" title="var">n</span></span> and <span class="inlinecode"><span class="id" title="var">m</span></span>, if <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span>, then
      <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>.

<div class="paragraph"> </div>
<i>Proof</i>: Let <span class="inlinecode"><span class="id" title="var">m</span></span> be a <span class="inlinecode"><span class="id" title="var">nat</span></span>. We prove by induction on <span class="inlinecode"><span class="id" title="var">m</span></span> that, for
      any <span class="inlinecode"><span class="id" title="var">n</span></span>, if <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> then <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>.

<div class="paragraph"> </div>
<ul class="doclist">
<li> First, suppose <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">=</span> <span class="inlinecode">0</span>, and suppose <span class="inlinecode"><span class="id" title="var">n</span></span> is a number such
        that <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span>.  We must show that <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode">0</span>.

<div class="paragraph"> </div>

        Since <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">=</span> <span class="inlinecode">0</span>, by the definition of <span class="inlinecode"><span class="id" title="var">double</span></span> we have <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span>
<span class="inlinecode">0</span>.  There are two cases to consider for <span class="inlinecode"><span class="id" title="var">n</span></span>.  If <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode">0</span> we are
        done, since <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">=</span> <span class="inlinecode">0</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">n</span></span>, as required.  Otherwise, if <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n'</span></span>
        for some <span class="inlinecode"><span class="id" title="var">n'</span></span>, we derive a contradiction: by the definition of
        <span class="inlinecode"><span class="id" title="var">double</span></span>, we can calculate <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n'</span>))</span>, but
        this contradicts the assumption that <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode">0</span>.

<div class="paragraph"> </div>
</li>
<li> Second, suppose <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">m'</span></span> and that <span class="inlinecode"><span class="id" title="var">n</span></span> is again a number such
        that <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span>.  We must show that <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">m'</span></span>, with
        the induction hypothesis that for every number <span class="inlinecode"><span class="id" title="var">s</span></span>, if <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">s</span></span> <span class="inlinecode">=</span>
<span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m'</span></span> then <span class="inlinecode"><span class="id" title="var">s</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m'</span></span>.

<div class="paragraph"> </div>

        By the fact that <span class="inlinecode"><span class="id" title="var">m</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">m'</span></span> and the definition of <span class="inlinecode"><span class="id" title="var">double</span></span>, we
        have <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m'</span>))</span>.  There are two cases to
        consider for <span class="inlinecode"><span class="id" title="var">n</span></span>.

<div class="paragraph"> </div>

        If <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode">0</span>, then by definition <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode">0</span>, a contradiction.

<div class="paragraph"> </div>

        Thus, we may assume that <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n'</span></span> for some <span class="inlinecode"><span class="id" title="var">n'</span></span>, and again by
        the definition of <span class="inlinecode"><span class="id" title="var">double</span></span> we have <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n'</span>))</span> <span class="inlinecode">=</span>
<span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">S</span></span> <span class="inlinecode">(<span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m'</span>))</span>, which implies by injectivity that <span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">n'</span></span> <span class="inlinecode">=</span>
<span class="inlinecode"><span class="id" title="var">double</span></span> <span class="inlinecode"><span class="id" title="var">m'</span></span>.  Instantiating the induction hypothesis with <span class="inlinecode"><span class="id" title="var">n'</span></span> thus
        allows us to conclude that <span class="inlinecode"><span class="id" title="var">n'</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m'</span></span>, and it follows immediately
        that <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n'</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">m'</span></span>.  Since <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">n'</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">n</span></span> and <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">m'</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">m</span></span>, this is just
        what we wanted to show. <font size="-2">‚òê</font>
</li>
</ul>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
Before we close this section and move on to some exercises,
    let's digress briefly and use <span class="inlinecode"><span class="id" title="var">eqb_true</span></span> to prove a similar
    property of identifiers that we'll need in later chapters: 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkbd" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkbd"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">eqb_id_true</span> : <span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span>,
  eqb_id x y = true -&gt; x = y.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : id, eqb_id x y = true -&gt; x = y</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkbe" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkbe"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : id, eqb_id x y = true -&gt; x = y</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkbf" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkbf"><span class="highlight"><span class="nb">intros</span> [m] [n].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m, n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">eqb_id (Id m) (Id n) = true -&gt; Id m = Id n</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkc0" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkc0"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m, n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(m =? n) = true -&gt; Id m = Id n</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkc1" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkc1"><span class="highlight"><span class="nb">intros</span> H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m, n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(m =? n) = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Id m = Id n</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkc2" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkc2"><span class="highlight"><span class="nb">assert</span> (H&#39; : m = n).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m, n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(m =? n) = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">m = n</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Tactics-v-chkc3" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m, n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(m =? n) = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = n</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Tactics-v-chkc3"><hr></label><div class="goal-conclusion"><span class="highlight">Id m = Id n</span></div></blockquote></div></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkc4" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkc4"><span class="highlight">{</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m, n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(m =? n) = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">m = n</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkc5" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkc5"><span class="highlight"><span class="nb">apply</span> eqb_true.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m, n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(m =? n) = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(m =? n) = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> H.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkc6" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkc6"><span class="highlight">}</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m, n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(m =? n) = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = n</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Id m = Id n</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkc7" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkc7"><span class="highlight"><span class="nb">rewrite</span> H&#39;.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m, n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(m =? n) = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = n</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Id n = Id n</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
<a name="lab16"></a><h4 class="section">Exercise: 3 stars, standard, recommended (gen_dep_practice)</h4>
<div class="paragraph"> </div>

    Prove this by induction on <span class="inlinecode"><span class="id" title="var">l</span></span>. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkc8" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkc8"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">nth_error_after_last</span>: <span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">l</span> : list X),
     length l = n -&gt;
     nth_error l n = None.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">l</span> : list X),
length l = n -&gt; nth_error l n = None</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkc9" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkc9"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">n</span> : nat) (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">l</span> : list X),
length l = n -&gt; nth_error l n = None</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">  <span class="c">(* FILL IN HERE *)</span></span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Admitted</span>.</span></span></span></pre><div class="doc">
<font size="-2">‚òê</font>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight"><span class="c">(* ################################################################# *)</span></span></span></pre><div class="doc">
<a name="lab17"></a><h1 class="section">Unfolding Definitions</h1>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
It sometimes happens that we need to manually unfold a name that
    has been introduced by a <span class="inlinecode"><span class="id" title="keyword">Definition</span></span> so that we can manipulate
    its right-hand side.  For example, if we define... 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">square</span> <span class="nv">n</span> := n * n.</span></span></span></pre><div class="doc">
... and try to prove a simple fact about <span class="inlinecode"><span class="id" title="var">square</span></span>... 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkca" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkca"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">square_mult</span> : <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span>, square (n * m) = square n * square m.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> : nat, square (n * m) = square n * square m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkcb" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkcb"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> : nat, square (n * m) = square n * square m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkcc" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkcc"><span class="highlight"><span class="nb">intros</span> n m.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">square (n * m) = square n * square m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkcd" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkcd"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">square (n * m) = square n * square m</span></div></blockquote></div></div></small></span></pre><div class="doc">
... we appear to be stuck: <span class="inlinecode"><span class="id" title="tactic">simpl</span></span> doesn't simplify anything at
    this point, and since we haven't proved any other facts about
    <span class="inlinecode"><span class="id" title="var">square</span></span>, there is nothing we can <span class="inlinecode"><span class="id" title="tactic">apply</span></span> or <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span> with.

<div class="paragraph"> </div>

    To make progress, we can manually <span class="inlinecode"><span class="id" title="tactic">unfold</span></span> the definition of
    <span class="inlinecode"><span class="id" title="var">square</span></span>: 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight">  </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkce" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkce"><span class="highlight"><span class="nb">unfold</span> square.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">n * m * (n * m) = n * n * (m * m)</span></div></blockquote></div></div></small></span></pre><div class="doc">
Now we have plenty to work with: both sides of the equality are
    expressions involving multiplication, and we have lots of facts
    about multiplication at our disposal.  In particular, we know that
    it is commutative and associative, and from these it is not hard
    to finish the proof. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight">  </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkcf" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkcf"><span class="highlight"><span class="nb">rewrite</span> mult_assoc.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">n * m * n * m = n * n * (m * m)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkd0" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkd0"><span class="highlight"><span class="nb">assert</span> (H : n * m * n = n * n * m).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">n * m * n = n * n * m</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Tactics-v-chkd1" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n * m * n = n * n * m</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Tactics-v-chkd1"><hr></label><div class="goal-conclusion"><span class="highlight">n * m * n * m = n * n * (m * m)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkd2" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkd2"><span class="highlight">{</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">n * m * n = n * n * m</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkd3" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkd3"><span class="highlight"><span class="nb">rewrite</span> mult_comm.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">n * (n * m) = n * n * m</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> mult_assoc.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkd4" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkd4"><span class="highlight">}</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n * m * n = n * n * m</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">n * m * n * m = n * n * (m * m)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkd5" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkd5"><span class="highlight"><span class="nb">rewrite</span> H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n * m * n = n * n * m</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">n * n * m * m = n * n * (m * m)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkd6" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkd6"><span class="highlight"><span class="nb">rewrite</span> mult_assoc.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n, m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n * m * n = n * n * m</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">n * n * m * m = n * n * m * m</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
At this point, some discussion of unfolding and simplification is
    in order.

<div class="paragraph"> </div>

    You may already have observed that tactics like <span class="inlinecode"><span class="id" title="tactic">simpl</span></span>,
    <span class="inlinecode"><span class="id" title="tactic">reflexivity</span></span>, and <span class="inlinecode"><span class="id" title="tactic">apply</span></span> will often unfold the definitions of
    functions automatically when this allows them to make progress.
    For example, if we define <span class="inlinecode"><span class="id" title="var">foo</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> to be the constant <span class="inlinecode">5</span>... 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">foo</span> (<span class="nv">x</span>: nat) := <span class="mi">5</span>.</span></span></span></pre><div class="doc">
.... then the <span class="inlinecode"><span class="id" title="tactic">simpl</span></span> in the following proof (or the
    <span class="inlinecode"><span class="id" title="tactic">reflexivity</span></span>, if we omit the <span class="inlinecode"><span class="id" title="tactic">simpl</span></span>) will unfold <span class="inlinecode"><span class="id" title="var">foo</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> to
    <span class="inlinecode">(<span class="id" title="keyword">fun</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">‚áí</span> <span class="inlinecode">5)</span> <span class="inlinecode"><span class="id" title="var">m</span></span> and then further simplify this expression to just
    <span class="inlinecode">5</span>. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkd7" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkd7"><span class="highlight"><span class="kn">Fact</span> <span class="nf">silly_fact_1</span> : <span class="kr">forall</span> <span class="nv">m</span>, foo m + <span class="mi">1</span> = foo (m + <span class="mi">1</span>) + <span class="mi">1</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : nat, foo m + <span class="mi">1</span> = foo (m + <span class="mi">1</span>) + <span class="mi">1</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkd8" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkd8"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : nat, foo m + <span class="mi">1</span> = foo (m + <span class="mi">1</span>) + <span class="mi">1</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkd9" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkd9"><span class="highlight"><span class="nb">intros</span> m.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">foo m + <span class="mi">1</span> = foo (m + <span class="mi">1</span>) + <span class="mi">1</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkda" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkda"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="mi">6</span> = <span class="mi">6</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
However, this automatic unfolding is somewhat conservative.  For
    example, if we define a slightly more complicated function
    involving a pattern match... 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">bar</span> <span class="nv">x</span> :=
  <span class="kr">match</span> x <span class="kr">with</span>
  | O =&gt; <span class="mi">5</span>
  | S _ =&gt; <span class="mi">5</span>
  <span class="kr">end</span>.</span></span></span></pre><div class="doc">
...then the analogous proof will get stuck: 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkdb" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkdb"><span class="highlight"><span class="kn">Fact</span> <span class="nf">silly_fact_2_FAILED</span> : <span class="kr">forall</span> <span class="nv">m</span>, bar m + <span class="mi">1</span> = bar (m + <span class="mi">1</span>) + <span class="mi">1</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : nat, bar m + <span class="mi">1</span> = bar (m + <span class="mi">1</span>) + <span class="mi">1</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkdc" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkdc"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : nat, bar m + <span class="mi">1</span> = bar (m + <span class="mi">1</span>) + <span class="mi">1</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkdd" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkdd"><span class="highlight"><span class="nb">intros</span> m.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">bar m + <span class="mi">1</span> = bar (m + <span class="mi">1</span>) + <span class="mi">1</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkde" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkde"><span class="highlight"><span class="nb">simpl</span>. <span class="c">(* Does nothing! *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">bar m + <span class="mi">1</span> = bar (m + <span class="mi">1</span>) + <span class="mi">1</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Abort</span>.</span></span></span></pre><div class="doc">
The reason that <span class="inlinecode"><span class="id" title="tactic">simpl</span></span> doesn't make progress here is that it
    notices that, after tentatively unfolding <span class="inlinecode"><span class="id" title="var">bar</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span>, it is left with
    a match whose scrutinee, <span class="inlinecode"><span class="id" title="var">m</span></span>, is a variable, so the <span class="inlinecode"><span class="id" title="keyword">match</span></span> cannot
    be simplified further.  It is not smart enough to notice that the
    two branches of the <span class="inlinecode"><span class="id" title="keyword">match</span></span> are identical, so it gives up on
    unfolding <span class="inlinecode"><span class="id" title="var">bar</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> and leaves it alone.  Similarly, tentatively
    unfolding <span class="inlinecode"><span class="id" title="var">bar</span></span> <span class="inlinecode">(<span class="id" title="var">m</span>+1)</span> leaves a <span class="inlinecode"><span class="id" title="keyword">match</span></span> whose scrutinee is a
    function application (that cannot itself be simplified, even
    after unfolding the definition of <span class="inlinecode">+</span>), so <span class="inlinecode"><span class="id" title="tactic">simpl</span></span> leaves it
    alone. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
At this point, there are two ways to make progress.  One is to use
    <span class="inlinecode"><span class="id" title="tactic">destruct</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> to break the proof into two cases, each focusing on a
    more concrete choice of <span class="inlinecode"><span class="id" title="var">m</span></span> (<span class="inlinecode"><span class="id" title="var">O</span></span> vs <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span>).  In each case, the
    <span class="inlinecode"><span class="id" title="keyword">match</span></span> inside of <span class="inlinecode"><span class="id" title="var">bar</span></span> can now make progress, and the proof is
    easy to complete. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkdf" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkdf"><span class="highlight"><span class="kn">Fact</span> <span class="nf">silly_fact_2</span> : <span class="kr">forall</span> <span class="nv">m</span>, bar m + <span class="mi">1</span> = bar (m + <span class="mi">1</span>) + <span class="mi">1</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : nat, bar m + <span class="mi">1</span> = bar (m + <span class="mi">1</span>) + <span class="mi">1</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chke0" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chke0"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : nat, bar m + <span class="mi">1</span> = bar (m + <span class="mi">1</span>) + <span class="mi">1</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chke1" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chke1"><span class="highlight"><span class="nb">intros</span> m.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">bar m + <span class="mi">1</span> = bar (m + <span class="mi">1</span>) + <span class="mi">1</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chke2" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chke2"><span class="highlight"><span class="nb">destruct</span> m <span class="nb">eqn</span>:E.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = <span class="mi">0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">bar <span class="mi">0</span> + <span class="mi">1</span> = bar (<span class="mi">0</span> + <span class="mi">1</span>) + <span class="mi">1</span></span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Tactics-v-chke3" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m, n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = S n</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Tactics-v-chke3"><hr></label><div class="goal-conclusion"><span class="highlight">bar (S n) + <span class="mi">1</span> = bar (S n + <span class="mi">1</span>) + <span class="mi">1</span></span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chke4" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chke4"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = <span class="mi">0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">bar <span class="mi">0</span> + <span class="mi">1</span> = bar (<span class="mi">0</span> + <span class="mi">1</span>) + <span class="mi">1</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chke5" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chke5"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = <span class="mi">0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="mi">6</span> = <span class="mi">6</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chke6" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chke6"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m, n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = S n</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">bar (S n) + <span class="mi">1</span> = bar (S n + <span class="mi">1</span>) + <span class="mi">1</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chke7" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chke7"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m, n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = S n</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="mi">6</span> = <span class="mi">6</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
This approach works, but it depends on our recognizing that the
    <span class="inlinecode"><span class="id" title="keyword">match</span></span> hidden inside <span class="inlinecode"><span class="id" title="var">bar</span></span> is what was preventing us from making
    progress. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
A more straightforward way to make progress is to explicitly tell
    Coq to unfold <span class="inlinecode"><span class="id" title="var">bar</span></span>. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chke8" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chke8"><span class="highlight"><span class="kn">Fact</span> <span class="nf">silly_fact_2&#39;</span> : <span class="kr">forall</span> <span class="nv">m</span>, bar m + <span class="mi">1</span> = bar (m + <span class="mi">1</span>) + <span class="mi">1</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : nat, bar m + <span class="mi">1</span> = bar (m + <span class="mi">1</span>) + <span class="mi">1</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chke9" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chke9"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">m</span> : nat, bar m + <span class="mi">1</span> = bar (m + <span class="mi">1</span>) + <span class="mi">1</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkea" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkea"><span class="highlight"><span class="nb">intros</span> m.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">bar m + <span class="mi">1</span> = bar (m + <span class="mi">1</span>) + <span class="mi">1</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkeb" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkeb"><span class="highlight"><span class="nb">unfold</span> bar.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">match</span> m <span class="kr">with</span>
| <span class="mi">0</span> | _ =&gt; <span class="mi">5</span>
<span class="kr">end</span> + <span class="mi">1</span> = <span class="kr">match</span> m + <span class="mi">1</span> <span class="kr">with</span>
          | <span class="mi">0</span> | _ =&gt; <span class="mi">5</span>
          <span class="kr">end</span> + <span class="mi">1</span></span></div></blockquote></div></div></small></span></pre><div class="doc">
Now it is apparent that we are stuck on the <span class="inlinecode"><span class="id" title="keyword">match</span></span> expressions on
    both sides of the <span class="inlinecode">=</span>, and we can use <span class="inlinecode"><span class="id" title="tactic">destruct</span></span> to finish the
    proof without thinking too hard. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight">  </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkec" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkec"><span class="highlight"><span class="nb">destruct</span> m <span class="nb">eqn</span>:E.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = <span class="mi">0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="mi">5</span> + <span class="mi">1</span> = <span class="kr">match</span> <span class="mi">0</span> + <span class="mi">1</span> <span class="kr">with</span>
        | <span class="mi">0</span> | _ =&gt; <span class="mi">5</span>
        <span class="kr">end</span> + <span class="mi">1</span></span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Tactics-v-chked" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m, n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = S n</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Tactics-v-chked"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="mi">5</span> + <span class="mi">1</span> = <span class="kr">match</span> S n + <span class="mi">1</span> <span class="kr">with</span>
        | <span class="mi">0</span> | _ =&gt; <span class="mi">5</span>
        <span class="kr">end</span> + <span class="mi">1</span></span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkee" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkee"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = <span class="mi">0</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="mi">5</span> + <span class="mi">1</span> = <span class="kr">match</span> <span class="mi">0</span> + <span class="mi">1</span> <span class="kr">with</span>
        | <span class="mi">0</span> | _ =&gt; <span class="mi">5</span>
        <span class="kr">end</span> + <span class="mi">1</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkef" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkef"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">m, n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m = S n</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="mi">5</span> + <span class="mi">1</span> = <span class="kr">match</span> S n + <span class="mi">1</span> <span class="kr">with</span>
        | <span class="mi">0</span> | _ =&gt; <span class="mi">5</span>
        <span class="kr">end</span> + <span class="mi">1</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(* ################################################################# *)</span></span></span></pre><div class="doc">
<a name="lab18"></a><h1 class="section">Using <span class="inlinecode"><span class="id" title="tactic">destruct</span></span> on Compound Expressions</h1>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
We have seen many examples where <span class="inlinecode"><span class="id" title="tactic">destruct</span></span> is used to
    perform case analysis of the value of some variable.  But
    sometimes we need to reason by cases on the result of some
    <i>expression</i>.  We can also do this with <span class="inlinecode"><span class="id" title="tactic">destruct</span></span>.

<div class="paragraph"> </div>

    Here are some examples: 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">sillyfun</span> (<span class="nv">n</span> : nat) : bool :=
  <span class="kr">if</span> n =? <span class="mi">3</span> <span class="kr">then</span> false
  <span class="kr">else</span> <span class="kr">if</span> n =? <span class="mi">5</span> <span class="kr">then</span> false
  <span class="kr">else</span> false.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkf0" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkf0"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">sillyfun_false</span> : <span class="kr">forall</span> (<span class="nv">n</span> : nat),
  sillyfun n = false.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat, sillyfun n = false</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkf1" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkf1"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat, sillyfun n = false</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkf2" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkf2"><span class="highlight"><span class="nb">intros</span> n.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">sillyfun n = false</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkf3" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkf3"><span class="highlight"><span class="nb">unfold</span> sillyfun.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">if</span> n =? <span class="mi">3</span>
 <span class="kr">then</span> false
 <span class="kr">else</span> <span class="kr">if</span> n =? <span class="mi">5</span> <span class="kr">then</span> false <span class="kr">else</span> false) = false</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkf4" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkf4"><span class="highlight"><span class="nb">destruct</span> (n =? <span class="mi">3</span>) <span class="nb">eqn</span>:E1.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">3</span>) = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">false = false</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Tactics-v-chkf5" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">3</span>) = false</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Tactics-v-chkf5"><hr></label><div class="goal-conclusion"><span class="highlight">(<span class="kr">if</span> n =? <span class="mi">5</span> <span class="kr">then</span> false <span class="kr">else</span> false) = false</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkf6" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkf6"><span class="highlight">- <span class="c">(* n =? 3 = true *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">3</span>) = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">false = false</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkf7" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkf7"><span class="highlight">- <span class="c">(* n =? 3 = false *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">3</span>) = false</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">if</span> n =? <span class="mi">5</span> <span class="kr">then</span> false <span class="kr">else</span> false) = false</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkf8" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkf8"><span class="highlight"><span class="nb">destruct</span> (n =? <span class="mi">5</span>) <span class="nb">eqn</span>:E2.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">3</span>) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">5</span>) = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">false = false</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Tactics-v-chkf9" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">3</span>) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">5</span>) = false</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Tactics-v-chkf9"><hr></label><div class="goal-conclusion"><span class="highlight">false = false</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkfa" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkfa"><span class="highlight">+ <span class="c">(* n =? 5 = true *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">3</span>) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">5</span>) = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">false = false</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkfb" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkfb"><span class="highlight">+ <span class="c">(* n =? 5 = false *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">3</span>) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">E2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">5</span>) = false</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">false = false</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="coq-wsp">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
After unfolding <span class="inlinecode"><span class="id" title="var">sillyfun</span></span> in the above proof, we find that
    we are stuck on <span class="inlinecode"><span class="id" title="keyword">if</span></span> <span class="inlinecode">(<span class="id" title="var">n</span></span> <span class="inlinecode">=?</span> <span class="inlinecode">3)</span> <span class="inlinecode"><span class="id" title="keyword">then</span></span> <span class="inlinecode">...</span> <span class="inlinecode"><span class="id" title="keyword">else</span></span> <span class="inlinecode">...</span>.  But either
    <span class="inlinecode"><span class="id" title="var">n</span></span> is equal to <span class="inlinecode">3</span> or it isn't, so we can use <span class="inlinecode"><span class="id" title="tactic">destruct</span></span> <span class="inlinecode">(<span class="id" title="var">eqb</span></span>
<span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">3)</span> to let us reason about the two cases.

<div class="paragraph"> </div>

    In general, the <span class="inlinecode"><span class="id" title="tactic">destruct</span></span> tactic can be used to perform case
    analysis of the results of arbitrary computations.  If <span class="inlinecode"><span class="id" title="var">e</span></span> is an
    expression whose type is some inductively defined type <span class="inlinecode"><span class="id" title="var">T</span></span>, then,
    for each constructor <span class="inlinecode"><span class="id" title="var">c</span></span> of <span class="inlinecode"><span class="id" title="var">T</span></span>, <span class="inlinecode"><span class="id" title="tactic">destruct</span></span> <span class="inlinecode"><span class="id" title="var">e</span></span> generates a subgoal
    in which all occurrences of <span class="inlinecode"><span class="id" title="var">e</span></span> (in the goal and in the context)
    are replaced by <span class="inlinecode"><span class="id" title="var">c</span></span>. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
<a name="lab19"></a><h4 class="section">Exercise: 3 stars, standard, optional (combine_split)</h4>
<div class="paragraph"> </div>

    Here is an implementation of the <span class="inlinecode"><span class="id" title="tactic">split</span></span> function mentioned in
    chapter <span class="inlinecode"><span class="id" title="var">Poly</span></span>: 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Fixpoint</span> <span class="nf">split</span> {<span class="nv">X</span> <span class="nv">Y</span> : <span class="kt">Type</span>} (<span class="nv">l</span> : list (X*Y))
               : (list X) * (list Y) :=
  <span class="kr">match</span> l <span class="kr">with</span>
  | [] =&gt; ([], [])
  | (x, y) :: t =&gt;
      <span class="kr">match</span> <span class="nb">split</span> t <span class="kr">with</span>
      | (lx, ly) =&gt; (x :: lx, y :: ly)
      <span class="kr">end</span>
  <span class="kr">end</span>.</span></span></span></pre><div class="doc">
Prove that <span class="inlinecode"><span class="id" title="tactic">split</span></span> and <span class="inlinecode"><span class="id" title="var">combine</span></span> are inverses in the following
    sense: 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkfc" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkfc"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">combine_split</span> : <span class="kr">forall</span> <span class="nv">X</span> <span class="nv">Y</span> (<span class="nv">l</span> : list (X * Y)) <span class="nv">l1</span> <span class="nv">l2</span>,
  <span class="nb">split</span> l = (l1, l2) -&gt;
  combine l1 l2 = l.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">X</span> <span class="nv">Y</span> : <span class="kt">Type</span>) (<span class="nv">l</span> : list (X * Y)) (<span class="nv">l1</span> : list X)
  (<span class="nv">l2</span> : list Y),
<span class="nb">split</span> l = (l1, l2) -&gt; combine l1 l2 = l</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkfd" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkfd"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">X</span> <span class="nv">Y</span> : <span class="kt">Type</span>) (<span class="nv">l</span> : list (X * Y)) (<span class="nv">l1</span> : list X)
  (<span class="nv">l2</span> : list Y),
<span class="nb">split</span> l = (l1, l2) -&gt; combine l1 l2 = l</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">  <span class="c">(* FILL IN HERE *)</span></span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Admitted</span>.</span></span></span></pre><div class="doc">
<font size="-2">‚òê</font>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
The <span class="inlinecode"><span class="id" title="var">eqn</span>:</span> part of the <span class="inlinecode"><span class="id" title="tactic">destruct</span></span> tactic is optional: We've chosen
    to include it most of the time, just for the sake of
    documentation, but many Coq proofs omit it.

<div class="paragraph"> </div>

    When <span class="inlinecode"><span class="id" title="tactic">destruct</span></span>ing compound expressions, however, the information
    recorded by the <span class="inlinecode"><span class="id" title="var">eqn</span>:</span> can actually be critical: if we leave it
    out, then <span class="inlinecode"><span class="id" title="tactic">destruct</span></span> can sometimes erase information we need to
    complete a proof. 

<div class="paragraph"> </div>

    For example, suppose we define a function <span class="inlinecode"><span class="id" title="var">sillyfun1</span></span> like
    this: 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">sillyfun1</span> (<span class="nv">n</span> : nat) : bool :=
  <span class="kr">if</span> n =? <span class="mi">3</span> <span class="kr">then</span> true
  <span class="kr">else</span> <span class="kr">if</span> n =? <span class="mi">5</span> <span class="kr">then</span> true
  <span class="kr">else</span> false.</span></span></span></pre><div class="doc">
Now suppose that we want to convince Coq of the (rather
    obvious) fact that <span class="inlinecode"><span class="id" title="var">sillyfun1</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> yields <span class="inlinecode"><span class="id" title="var">true</span></span> only when <span class="inlinecode"><span class="id" title="var">n</span></span> is
    odd.  If we start the proof like this (with no <span class="inlinecode"><span class="id" title="var">eqn</span>:</span> on the
    destruct)... 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkfe" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkfe"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">sillyfun1_odd_FAILED</span> : <span class="kr">forall</span> (<span class="nv">n</span> : nat),
     sillyfun1 n = true -&gt;
     oddb n = true.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat, sillyfun1 n = true -&gt; oddb n = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chkff" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chkff"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat, sillyfun1 n = true -&gt; oddb n = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk100" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk100"><span class="highlight"><span class="nb">intros</span> n eq.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">sillyfun1 n = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">oddb n = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk101" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk101"><span class="highlight"><span class="nb">unfold</span> sillyfun1 <span class="kr">in</span> eq.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="kr">if</span> n =? <span class="mi">3</span>
 <span class="kr">then</span> true
 <span class="kr">else</span> <span class="kr">if</span> n =? <span class="mi">5</span> <span class="kr">then</span> true <span class="kr">else</span> false) = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">oddb n = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk102" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk102"><span class="highlight"><span class="nb">destruct</span> (n =? <span class="mi">3</span>).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">true = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">oddb n = true</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Tactics-v-chk103" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="kr">if</span> n =? <span class="mi">5</span> <span class="kr">then</span> true <span class="kr">else</span> false) = true</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Tactics-v-chk103"><hr></label><div class="goal-conclusion"><span class="highlight">oddb n = true</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">  <span class="c">(* stuck... *)</span>
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Abort</span>.</span></span></span></pre><div class="doc">
... then we are stuck at this point because the context does
    not contain enough information to prove the goal!  The problem is
    that the substitution performed by <span class="inlinecode"><span class="id" title="tactic">destruct</span></span> is quite brutal --
    in this case, it thows away every occurrence of <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=?</span> <span class="inlinecode">3</span>, but we
    need to keep some memory of this expression and how it was
    destructed, because we need to be able to reason that, since <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=?</span>
<span class="inlinecode">3</span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">true</span></span> in this branch of the case analysis, it must be that <span class="inlinecode"><span class="id" title="var">n</span></span>
<span class="inlinecode">=</span> <span class="inlinecode">3</span>, from which it follows that <span class="inlinecode"><span class="id" title="var">n</span></span> is odd.

<div class="paragraph"> </div>

    What we want here is to substitute away all existing occurences of
    <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=?</span> <span class="inlinecode">3</span>, but at the same time add an equation to the context that
    records which case we are in.  This is precisely what the <span class="inlinecode"><span class="id" title="var">eqn</span>:</span>
    qualifier does. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk104" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk104"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">sillyfun1_odd</span> : <span class="kr">forall</span> (<span class="nv">n</span> : nat),
     sillyfun1 n = true -&gt;
     oddb n = true.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat, sillyfun1 n = true -&gt; oddb n = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk105" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk105"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> : nat, sillyfun1 n = true -&gt; oddb n = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk106" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk106"><span class="highlight"><span class="nb">intros</span> n eq.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">sillyfun1 n = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">oddb n = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk107" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk107"><span class="highlight"><span class="nb">unfold</span> sillyfun1 <span class="kr">in</span> eq.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="kr">if</span> n =? <span class="mi">3</span>
 <span class="kr">then</span> true
 <span class="kr">else</span> <span class="kr">if</span> n =? <span class="mi">5</span> <span class="kr">then</span> true <span class="kr">else</span> false) = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">oddb n = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk108" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk108"><span class="highlight"><span class="nb">destruct</span> (n =? <span class="mi">3</span>) <span class="nb">eqn</span>:Heqe3.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqe3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">3</span>) = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">true = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">oddb n = true</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Tactics-v-chk109" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqe3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">3</span>) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="kr">if</span> n =? <span class="mi">5</span> <span class="kr">then</span> true <span class="kr">else</span> false) = true</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Tactics-v-chk109"><hr></label><div class="goal-conclusion"><span class="highlight">oddb n = true</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">  <span class="c">(* Now we have the same state as at the point where we got</span>
<span class="c">     stuck above, except that the context contains an extra</span>
<span class="c">     equality assumption, which is exactly what we need to</span>
<span class="c">     make progress. *)</span>
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk10a" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk10a"><span class="highlight">- <span class="c">(* e3 = true *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqe3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">3</span>) = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">true = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">oddb n = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk10b" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk10b"><span class="highlight"><span class="nb">apply</span> eqb_true <span class="kr">in</span> Heqe3.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqe3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = <span class="mi">3</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">true = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">oddb n = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk10c" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk10c"><span class="highlight"><span class="nb">rewrite</span> -&gt; Heqe3.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqe3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = <span class="mi">3</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">true = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">oddb <span class="mi">3</span> = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk10d" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk10d"><span class="highlight">- <span class="c">(* e3 = false *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqe3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">3</span>) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="kr">if</span> n =? <span class="mi">5</span> <span class="kr">then</span> true <span class="kr">else</span> false) = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">oddb n = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">     <span class="c">(* When we come to the second equality test in the body</span>
<span class="c">        of the function we are reasoning about, we can use</span>
<span class="c">        [eqn:] again in the same way, allowing us to finish the</span>
<span class="c">        proof. *)</span>
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk10e" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk10e"><span class="highlight"><span class="nb">destruct</span> (n =? <span class="mi">5</span>) <span class="nb">eqn</span>:Heqe5.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqe3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">3</span>) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqe5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">5</span>) = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">true = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">oddb n = true</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Tactics-v-chk10f" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqe3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">3</span>) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqe5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">5</span>) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">false = true</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Tactics-v-chk10f"><hr></label><div class="goal-conclusion"><span class="highlight">oddb n = true</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">        </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk110" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk110"><span class="highlight">+ <span class="c">(* e5 = true *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqe3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">3</span>) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqe5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">5</span>) = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">true = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">oddb n = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">          </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk111" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk111"><span class="highlight"><span class="nb">apply</span> eqb_true <span class="kr">in</span> Heqe5.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqe3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">3</span>) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqe5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = <span class="mi">5</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">true = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">oddb n = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">          </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk112" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk112"><span class="highlight"><span class="nb">rewrite</span> -&gt; Heqe5.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqe3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">3</span>) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqe5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">n = <span class="mi">5</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">true = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">oddb <span class="mi">5</span> = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">reflexivity</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">        </span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk113" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk113"><span class="highlight">+ <span class="c">(* e5 = false *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">n</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">nat</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqe3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">3</span>) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Heqe5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(n =? <span class="mi">5</span>) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">eq</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">false = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">oddb n = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">discriminate</span> eq.</span></span><span class="coq-wsp">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
<a name="lab20"></a><h4 class="section">Exercise: 2 stars, standard (destruct_eqn_practice)</h4>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk114" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk114"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">bool_fn_applied_thrice</span> :
  <span class="kr">forall</span> (<span class="nv">f</span> : bool -&gt; bool) (<span class="nv">b</span> : bool),
  f (f (f b)) = f b.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">f</span> : bool -&gt; bool) (<span class="nv">b</span> : bool),
f (f (f b)) = f b</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk115" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk115"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">f</span> : bool -&gt; bool) (<span class="nv">b</span> : bool),
f (f (f b)) = f b</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">  <span class="c">(* FILL IN HERE *)</span></span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Admitted</span>.</span></span></span></pre><div class="doc">
<font size="-2">‚òê</font>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight"><span class="c">(* ################################################################# *)</span></span></span></pre><div class="doc">
<a name="lab21"></a><h1 class="section">Review</h1>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
We've now seen many of Coq's most fundamental tactics.  We'll
    introduce a few more in the coming chapters, and later on we'll
    see some more powerful <i>automation</i> tactics that make Coq help us
    with low-level details.  But basically we've got what we need to
    get work done.

<div class="paragraph"> </div>

    Here are the ones we've seen:

<div class="paragraph"> </div>
<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="tactic">intros</span></span>: move hypotheses/variables from goal to context

<div class="paragraph"> </div>
</li>
<li> <span class="inlinecode"><span class="id" title="tactic">reflexivity</span></span>: finish the proof (when the goal looks like <span class="inlinecode"><span class="id" title="var">e</span></span> <span class="inlinecode">=</span>
<span class="inlinecode"><span class="id" title="var">e</span></span>)

<div class="paragraph"> </div>
</li>
<li> <span class="inlinecode"><span class="id" title="tactic">apply</span></span>: prove goal using a hypothesis, lemma, or constructor

<div class="paragraph"> </div>
</li>
<li> <span class="inlinecode"><span class="id" title="tactic">apply</span>...</span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span>: apply a hypothesis, lemma, or constructor to
        a hypothesis in the context (forward reasoning)

<div class="paragraph"> </div>
</li>
<li> <span class="inlinecode"><span class="id" title="tactic">apply</span>...</span> <span class="inlinecode"><span class="id" title="keyword">with</span>...</span>: explicitly specify values for variables
        that cannot be determined by pattern matching

<div class="paragraph"> </div>
</li>
<li> <span class="inlinecode"><span class="id" title="tactic">simpl</span></span>: simplify computations in the goal

<div class="paragraph"> </div>
</li>
<li> <span class="inlinecode"><span class="id" title="tactic">simpl</span></span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span>: ... or a hypothesis

<div class="paragraph"> </div>
</li>
<li> <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span>: use an equality hypothesis (or lemma) to rewrite
        the goal

<div class="paragraph"> </div>
</li>
<li> <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span> <span class="inlinecode">...</span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span>: ... or a hypothesis

<div class="paragraph"> </div>
</li>
<li> <span class="inlinecode"><span class="id" title="tactic">symmetry</span></span>: changes a goal of the form <span class="inlinecode"><span class="id" title="var">t</span>=<span class="id" title="var">u</span></span> into <span class="inlinecode"><span class="id" title="var">u</span>=<span class="id" title="var">t</span></span>
<div class="paragraph"> </div>
</li>
<li> <span class="inlinecode"><span class="id" title="tactic">symmetry</span></span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span>: changes a hypothesis of the form <span class="inlinecode"><span class="id" title="var">t</span>=<span class="id" title="var">u</span></span> into
        <span class="inlinecode"><span class="id" title="var">u</span>=<span class="id" title="var">t</span></span>
<div class="paragraph"> </div>
</li>
<li> <span class="inlinecode"><span class="id" title="tactic">unfold</span></span>: replace a defined constant by its right-hand side in
        the goal

<div class="paragraph"> </div>
</li>
<li> <span class="inlinecode"><span class="id" title="tactic">unfold</span>...</span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span>: ... or a hypothesis

<div class="paragraph"> </div>
</li>
<li> <span class="inlinecode"><span class="id" title="tactic">destruct</span>...</span> <span class="inlinecode"><span class="id" title="keyword">as</span>...</span>: case analysis on values of inductively
        defined types

<div class="paragraph"> </div>
</li>
<li> <span class="inlinecode"><span class="id" title="tactic">destruct</span>...</span> <span class="inlinecode"><span class="id" title="var">eqn</span>:...</span>: specify the name of an equation to be
        added to the context, recording the result of the case
        analysis

<div class="paragraph"> </div>
</li>
<li> <span class="inlinecode"><span class="id" title="tactic">induction</span>...</span> <span class="inlinecode"><span class="id" title="keyword">as</span>...</span>: induction on values of inductively
        defined types

<div class="paragraph"> </div>
</li>
<li> <span class="inlinecode"><span class="id" title="tactic">injection</span></span>: reason by injectivity on equalities
        between values of inductively defined types

<div class="paragraph"> </div>
</li>
<li> <span class="inlinecode"><span class="id" title="tactic">discriminate</span></span>: reason by disjointness of constructors on
        equalities between values of inductively defined types

<div class="paragraph"> </div>
</li>
<li> <span class="inlinecode"><span class="id" title="tactic">assert</span></span> <span class="inlinecode">(<span class="id" title="var">H</span>:</span> <span class="inlinecode"><span class="id" title="var">e</span>)</span> (or <span class="inlinecode"><span class="id" title="tactic">assert</span></span> <span class="inlinecode">(<span class="id" title="var">e</span>)</span> <span class="inlinecode"><span class="id" title="keyword">as</span></span> <span class="inlinecode"><span class="id" title="var">H</span></span>): introduce a "local
        lemma" <span class="inlinecode"><span class="id" title="var">e</span></span> and call it <span class="inlinecode"><span class="id" title="var">H</span></span>
<div class="paragraph"> </div>
</li>
<li> <span class="inlinecode"><span class="id" title="tactic">generalize</span></span> <span class="inlinecode"><span class="id" title="tactic">dependent</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span>: move the variable <span class="inlinecode"><span class="id" title="var">x</span></span> (and anything
        else that depends on it) from the context back to an explicit
        hypothesis in the goal formula 
</li>
</ul>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight"><span class="c">(* ################################################################# *)</span></span></span></pre><div class="doc">
<a name="lab22"></a><h1 class="section">Additional Exercises</h1>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
<a name="lab23"></a><h4 class="section">Exercise: 3 stars, standard (eqb_sym)</h4>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk116" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk116"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">eqb_sym</span> : <span class="kr">forall</span> (<span class="nv">n</span> <span class="nv">m</span> : nat),
  (n =? m) = (m =? n).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> : nat, (n =? m) = (m =? n)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk117" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk117"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> : nat, (n =? m) = (m =? n)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">  <span class="c">(* FILL IN HERE *)</span></span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Admitted</span>.</span></span></span></pre><div class="doc">
<font size="-2">‚òê</font>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
<a name="lab24"></a><h4 class="section">Exercise: 3 stars, advanced, optional (eqb_sym_informal)</h4>
<div class="paragraph"> </div>

    Give an informal proof of this lemma that corresponds to your
    formal proof above:

<div class="paragraph"> </div>

   Theorem: For any <span class="inlinecode"><span class="id" title="var">nat</span></span>s <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span>, <span class="inlinecode">(<span class="id" title="var">n</span></span> <span class="inlinecode">=?</span> <span class="inlinecode"><span class="id" title="var">m</span>)</span> <span class="inlinecode">=</span> <span class="inlinecode">(<span class="id" title="var">m</span></span> <span class="inlinecode">=?</span> <span class="inlinecode"><span class="id" title="var">n</span>)</span>.

<div class="paragraph"> </div>

   Proof: 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight">   <span class="c">(* FILL IN HERE </span>

<span class="c">    [] *)</span></span></span></pre><div class="doc">
<a name="lab25"></a><h4 class="section">Exercise: 3 stars, standard, optional (eqb_trans)</h4>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk118" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk118"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">eqb_trans</span> : <span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> <span class="nv">p</span>,
  n =? m = true -&gt;
  m =? p = true -&gt;
  n =? p = true.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> <span class="nv">p</span> : nat,
(n =? m) = true -&gt; (m =? p) = true -&gt; (n =? p) = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk119" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk119"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">n</span> <span class="nv">m</span> <span class="nv">p</span> : nat,
(n =? m) = true -&gt; (m =? p) = true -&gt; (n =? p) = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">  <span class="c">(* FILL IN HERE *)</span></span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Admitted</span>.</span></span></span></pre><div class="doc">
<font size="-2">‚òê</font>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
<a name="lab26"></a><h4 class="section">Exercise: 3 stars, advanced (split_combine)</h4>
<div class="paragraph"> </div>

    We proved, in an exercise above, that for all lists of pairs,
    <span class="inlinecode"><span class="id" title="var">combine</span></span> is the inverse of <span class="inlinecode"><span class="id" title="tactic">split</span></span>.  How would you formalize the
    statement that <span class="inlinecode"><span class="id" title="tactic">split</span></span> is the inverse of <span class="inlinecode"><span class="id" title="var">combine</span></span>?  When is this
    property true?

<div class="paragraph"> </div>

    Complete the definition of <span class="inlinecode"><span class="id" title="var">split_combine_statement</span></span> below with a
    property that states that <span class="inlinecode"><span class="id" title="tactic">split</span></span> is the inverse of
    <span class="inlinecode"><span class="id" title="var">combine</span></span>. Then, prove that the property holds. (Be sure to leave
    your induction hypothesis general by not doing <span class="inlinecode"><span class="id" title="tactic">intros</span></span> on more
    things than necessary.  Hint: what property do you need of <span class="inlinecode"><span class="id" title="var">l1</span></span>
    and <span class="inlinecode"><span class="id" title="var">l2</span></span> for <span class="inlinecode"><span class="id" title="tactic">split</span></span> <span class="inlinecode">(<span class="id" title="var">combine</span></span> <span class="inlinecode"><span class="id" title="var">l1</span></span> <span class="inlinecode"><span class="id" title="var">l2</span>)</span> <span class="inlinecode">=</span> <span class="inlinecode">(<span class="id" title="var">l1</span>,<span class="id" title="var">l2</span>)</span> to be true?) 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk11a" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk11a"><span class="highlight"><span class="kn">Definition</span> <span class="nf">split_combine_statement</span> : <span class="kt">Prop</span>
  <span class="c">(* (&quot;[: Prop]&quot; means that we are giving a name to a</span>
<span class="c">     logical proposition here.) *)</span>
  <span class="c">(* REPLACE THIS LINE WITH &quot;:= _your_definition_ .&quot; *)</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">Prop</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Admitted</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk11b" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk11b"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">split_combine</span> : split_combine_statement.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">split_combine_statement</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk11c" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk11c"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">split_combine_statement</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight"><span class="c">(* FILL IN HERE *)</span></span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Admitted</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(* Do not modify the following line: *)</span>
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">manual_grade_for_split_combine</span> : option (nat*string) := None.</span></span></span></pre><div class="doc">
<font size="-2">‚òê</font>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
<a name="lab27"></a><h4 class="section">Exercise: 3 stars, advanced (filter_exercise)</h4>
<div class="paragraph"> </div>

    This one is a bit challenging.  Pay attention to the form of your
    induction hypothesis. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk11d" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk11d"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">filter_exercise</span> : <span class="kr">forall</span> (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">test</span> : X -&gt; bool)
                             (<span class="nv">x</span> : X) (<span class="nv">l</span> <span class="nv">lf</span> : list X),
     filter test l = x :: lf -&gt;
     test x = true.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">test</span> : X -&gt; bool) (<span class="nv">x</span> : X)
  (<span class="nv">l</span> <span class="nv">lf</span> : list X),
filter test l = x :: lf -&gt; test x = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk11e" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk11e"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">test</span> : X -&gt; bool) (<span class="nv">x</span> : X)
  (<span class="nv">l</span> <span class="nv">lf</span> : list X),
filter test l = x :: lf -&gt; test x = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">  <span class="c">(* FILL IN HERE *)</span></span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Admitted</span>.</span></span></span></pre><div class="doc">
<font size="-2">‚òê</font>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
<a name="lab28"></a><h4 class="section">Exercise: 4 stars, advanced, recommended (forall_exists_challenge)</h4>
<div class="paragraph"> </div>

    Define two recursive <span class="inlinecode"><span class="id" title="var">Fixpoints</span></span>, <span class="inlinecode"><span class="id" title="var">forallb</span></span> and <span class="inlinecode"><span class="id" title="var">existsb</span></span>.  The
    first checks whether every element in a list satisfies a given
    predicate:

<div class="paragraph"> </div>

      forallb oddb <span class="inlinecode">1;3;5;7;9</span> = true

<div class="paragraph"> </div>

      forallb negb <span class="inlinecode"><span class="id" title="var">false</span>;<span class="id" title="var">false</span></span> = true

<div class="paragraph"> </div>

      forallb evenb <span class="inlinecode">0;2;4;5</span> = false

<div class="paragraph"> </div>

      forallb (eqb 5) <font size="-2">‚òê</font> = true

<div class="paragraph"> </div>

    The second checks whether there exists an element in the list that
    satisfies a given predicate:

<div class="paragraph"> </div>

      existsb (eqb 5) <span class="inlinecode">0;2;3;6</span> = false

<div class="paragraph"> </div>

      existsb (andb true) <span class="inlinecode"><span class="id" title="var">true</span>;<span class="id" title="var">true</span>;<span class="id" title="var">false</span></span> = true

<div class="paragraph"> </div>

      existsb oddb <span class="inlinecode">1;0;0;0;0;3</span> = true

<div class="paragraph"> </div>

      existsb evenb <font size="-2">‚òê</font> = false

<div class="paragraph"> </div>

    Next, define a <i>nonrecursive</i> version of <span class="inlinecode"><span class="id" title="var">existsb</span></span> -- call it
    <span class="inlinecode"><span class="id" title="var">existsb'</span></span> -- using <span class="inlinecode"><span class="id" title="var">forallb</span></span> and <span class="inlinecode"><span class="id" title="var">negb</span></span>.

<div class="paragraph"> </div>

    Finally, prove a theorem <span class="inlinecode"><span class="id" title="var">existsb_existsb'</span></span> stating that
    <span class="inlinecode"><span class="id" title="var">existsb'</span></span> and <span class="inlinecode"><span class="id" title="var">existsb</span></span> have the same behavior. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk11f" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk11f"><span class="highlight"><span class="kn">Fixpoint</span> <span class="nf">forallb</span> {<span class="nv">X</span> : <span class="kt">Type</span>} (<span class="nv">test</span> : X -&gt; bool) (<span class="nv">l</span> : list X) : bool
  <span class="c">(* REPLACE THIS LINE WITH &quot;:= _your_definition_ .&quot; *)</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">forallb</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">X0</span> : <span class="kt">Type</span>,
(X0 -&gt; bool) -&gt; list X0 -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">test</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">list X</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">bool</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Admitted</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk120" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk120"><span class="highlight"><span class="kn">Example</span> <span class="nf">test_forallb_1</span> : forallb oddb [<span class="mi">1</span>;<span class="mi">3</span>;<span class="mi">5</span>;<span class="mi">7</span>;<span class="mi">9</span>] = true.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">forallb oddb [<span class="mi">1</span>; <span class="mi">3</span>; <span class="mi">5</span>; <span class="mi">7</span>; <span class="mi">9</span>] = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk121" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk121"><span class="highlight"><span class="kn">Proof</span>. <span class="c">(* FILL IN HERE *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">forallb oddb [<span class="mi">1</span>; <span class="mi">3</span>; <span class="mi">5</span>; <span class="mi">7</span>; <span class="mi">9</span>] = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Admitted</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk122" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk122"><span class="highlight"><span class="kn">Example</span> <span class="nf">test_forallb_2</span> : forallb negb [false;false] = true.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">forallb negb [false; false] = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk123" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk123"><span class="highlight"><span class="kn">Proof</span>. <span class="c">(* FILL IN HERE *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">forallb negb [false; false] = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Admitted</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk124" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk124"><span class="highlight"><span class="kn">Example</span> <span class="nf">test_forallb_3</span> : forallb evenb [<span class="mi">0</span>;<span class="mi">2</span>;<span class="mi">4</span>;<span class="mi">5</span>] = false.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">forallb evenb [<span class="mi">0</span>; <span class="mi">2</span>; <span class="mi">4</span>; <span class="mi">5</span>] = false</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk125" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk125"><span class="highlight"><span class="kn">Proof</span>. <span class="c">(* FILL IN HERE *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">forallb evenb [<span class="mi">0</span>; <span class="mi">2</span>; <span class="mi">4</span>; <span class="mi">5</span>] = false</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Admitted</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk126" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk126"><span class="highlight"><span class="kn">Example</span> <span class="nf">test_forallb_4</span> : forallb (eqb <span class="mi">5</span>) [] = true.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">forallb (eqb <span class="mi">5</span>) [ ] = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk127" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk127"><span class="highlight"><span class="kn">Proof</span>. <span class="c">(* FILL IN HERE *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">forallb (eqb <span class="mi">5</span>) [ ] = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Admitted</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk128" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk128"><span class="highlight"><span class="kn">Fixpoint</span> <span class="nf">existsb</span> {<span class="nv">X</span> : <span class="kt">Type</span>} (<span class="nv">test</span> : X -&gt; bool) (<span class="nv">l</span> : list X) : bool
  <span class="c">(* REPLACE THIS LINE WITH &quot;:= _your_definition_ .&quot; *)</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">existsb</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">X0</span> : <span class="kt">Type</span>,
(X0 -&gt; bool) -&gt; list X0 -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">test</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">list X</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">bool</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Admitted</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk129" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk129"><span class="highlight"><span class="kn">Example</span> <span class="nf">test_existsb_1</span> : existsb (eqb <span class="mi">5</span>) [<span class="mi">0</span>;<span class="mi">2</span>;<span class="mi">3</span>;<span class="mi">6</span>] = false.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">existsb (eqb <span class="mi">5</span>) [<span class="mi">0</span>; <span class="mi">2</span>; <span class="mi">3</span>; <span class="mi">6</span>] = false</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk12a" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk12a"><span class="highlight"><span class="kn">Proof</span>. <span class="c">(* FILL IN HERE *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">existsb (eqb <span class="mi">5</span>) [<span class="mi">0</span>; <span class="mi">2</span>; <span class="mi">3</span>; <span class="mi">6</span>] = false</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Admitted</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk12b" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk12b"><span class="highlight"><span class="kn">Example</span> <span class="nf">test_existsb_2</span> : existsb (andb true) [true;true;false] = true.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">existsb (andb true) [true; true; false] = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk12c" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk12c"><span class="highlight"><span class="kn">Proof</span>. <span class="c">(* FILL IN HERE *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">existsb (andb true) [true; true; false] = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Admitted</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk12d" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk12d"><span class="highlight"><span class="kn">Example</span> <span class="nf">test_existsb_3</span> : existsb oddb [<span class="mi">1</span>;<span class="mi">0</span>;<span class="mi">0</span>;<span class="mi">0</span>;<span class="mi">0</span>;<span class="mi">3</span>] = true.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">existsb oddb [<span class="mi">1</span>; <span class="mi">0</span>; <span class="mi">0</span>; <span class="mi">0</span>; <span class="mi">0</span>; <span class="mi">3</span>] = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk12e" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk12e"><span class="highlight"><span class="kn">Proof</span>. <span class="c">(* FILL IN HERE *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">existsb oddb [<span class="mi">1</span>; <span class="mi">0</span>; <span class="mi">0</span>; <span class="mi">0</span>; <span class="mi">0</span>; <span class="mi">3</span>] = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Admitted</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk12f" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk12f"><span class="highlight"><span class="kn">Example</span> <span class="nf">test_existsb_4</span> : existsb evenb [] = false.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">existsb evenb [ ] = false</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk130" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk130"><span class="highlight"><span class="kn">Proof</span>. <span class="c">(* FILL IN HERE *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">existsb evenb [ ] = false</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Admitted</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk131" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk131"><span class="highlight"><span class="kn">Definition</span> <span class="nf">existsb&#39;</span> {<span class="nv">X</span> : <span class="kt">Type</span>} (<span class="nv">test</span> : X -&gt; bool) (<span class="nv">l</span> : list X) : bool
  <span class="c">(* REPLACE THIS LINE WITH &quot;:= _your_definition_ .&quot; *)</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">test</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">list X</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">bool</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Admitted</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk132" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk132"><span class="highlight"><span class="kn">Theorem</span> <span class="nf">existsb_existsb&#39;</span> : <span class="kr">forall</span> (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">test</span> : X -&gt; bool) (<span class="nv">l</span> : list X),
  existsb test l = existsb&#39; test l.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">test</span> : X -&gt; bool) (<span class="nv">l</span> : list X),
existsb test l = existsb&#39; test l</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Tactics-v-chk133" style="display: none" type="checkbox"><label class="coq-input" for="Tactics-v-chk133"><span class="highlight"><span class="kn">Proof</span>. <span class="c">(* FILL IN HERE *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">X</span> : <span class="kt">Type</span>) (<span class="nv">test</span> : X -&gt; bool) (<span class="nv">l</span> : list X),
existsb test l = existsb&#39; test l</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Admitted</span>.</span></span></span></pre><div class="doc">
<font size="-2">‚òê</font>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight"><span class="c">(* Wed Jan 9 12:02:44 EST 2019 *)</span></span></span></pre></article></body></html>