<!DOCTYPE html>
<html><head><title>MSetAVL.v</title><meta charset="utf-8"><meta content="Alectryon v0.2" name="generator"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Serif:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" rel="stylesheet"><link href="https://unpkg.com/firacode/distr/fira_code.css" rel="stylesheet"><link href="alectryon.css" rel="stylesheet"><script src="alectryon.js"></script><style type="text/css">.highlight .hll { background-color: #ffffcc }
.highlight .c { color: #555753; font-style: italic } /* Comment */
.highlight .err { color: #a40000; border: 1px solid #cc0000 } /* Error */
.highlight .g { color: #000000 } /* Generic */
.highlight .k { color: #8f5902 } /* Keyword */
.highlight .l { color: #2e3436 } /* Literal */
.highlight .n { color: #000000 } /* Name */
.highlight .o { color: #000000 } /* Operator */
.highlight .x { color: #2e3436 } /* Other */
.highlight .p { color: #000000 } /* Punctuation */
.highlight .ch { color: #555753; font-weight: bold; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #555753; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #3465a4; font-style: italic } /* Comment.Preproc */
.highlight .cpf { color: #555753; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #555753; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3465a4; font-weight: bold; font-style: italic } /* Comment.Special */
.highlight .gd { color: #a40000 } /* Generic.Deleted */
.highlight .ge { color: #000000; font-style: italic } /* Generic.Emph */
.highlight .gr { color: #a40000 } /* Generic.Error */
.highlight .gh { color: #a40000; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #4e9a06 } /* Generic.Inserted */
.highlight .go { color: #000000; font-style: italic } /* Generic.Output */
.highlight .gp { color: #8f5902 } /* Generic.Prompt */
.highlight .gs { color: #000000; font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #000000; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #000000; font-style: italic } /* Generic.Traceback */
.highlight .kc { color: #204a87; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #4e9a06; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #4e9a06; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #204a87 } /* Keyword.Pseudo */
.highlight .kr { color: #8f5902 } /* Keyword.Reserved */
.highlight .kt { color: #204a87 } /* Keyword.Type */
.highlight .ld { color: #2e3436 } /* Literal.Date */
.highlight .m { color: #2e3436 } /* Literal.Number */
.highlight .s { color: #ad7fa8 } /* Literal.String */
.highlight .na { color: #c4a000 } /* Name.Attribute */
.highlight .nb { color: #75507b } /* Name.Builtin */
.highlight .nc { color: #204a87 } /* Name.Class */
.highlight .no { color: #ce5c00 } /* Name.Constant */
.highlight .nd { color: #3465a4; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #c4a000; text-decoration: underline } /* Name.Entity */
.highlight .ne { color: #cc0000 } /* Name.Exception */
.highlight .nf { color: #a40000 } /* Name.Function */
.highlight .nl { color: #3465a4; font-weight: bold } /* Name.Label */
.highlight .nn { color: #000000 } /* Name.Namespace */
.highlight .nx { color: #000000 } /* Name.Other */
.highlight .py { color: #000000 } /* Name.Property */
.highlight .nt { color: #a40000 } /* Name.Tag */
.highlight .nv { color: #ce5c00 } /* Name.Variable */
.highlight .ow { color: #8f5902 } /* Operator.Word */
.highlight .w { color: #d3d7cf; text-decoration: underline } /* Text.Whitespace */
.highlight .mb { color: #2e3436 } /* Literal.Number.Bin */
.highlight .mf { color: #2e3436 } /* Literal.Number.Float */
.highlight .mh { color: #2e3436 } /* Literal.Number.Hex */
.highlight .mi { color: #2e3436 } /* Literal.Number.Integer */
.highlight .mo { color: #2e3436 } /* Literal.Number.Oct */
.highlight .sa { color: #ad7fa8 } /* Literal.String.Affix */
.highlight .sb { color: #ad7fa8 } /* Literal.String.Backtick */
.highlight .sc { color: #ad7fa8; font-weight: bold } /* Literal.String.Char */
.highlight .dl { color: #ad7fa8 } /* Literal.String.Delimiter */
.highlight .sd { color: #ad7fa8 } /* Literal.String.Doc */
.highlight .s2 { color: #ad7fa8 } /* Literal.String.Double */
.highlight .se { color: #ad7fa8; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #ad7fa8; text-decoration: underline } /* Literal.String.Heredoc */
.highlight .si { color: #ce5c00 } /* Literal.String.Interpol */
.highlight .sx { color: #ad7fa8 } /* Literal.String.Other */
.highlight .sr { color: #ad7fa8 } /* Literal.String.Regex */
.highlight .s1 { color: #ad7fa8 } /* Literal.String.Single */
.highlight .ss { color: #8f5902 } /* Literal.String.Symbol */
.highlight .bp { color: #5c35cc } /* Name.Builtin.Pseudo */
.highlight .fm { color: #a40000 } /* Name.Function.Magic */
.highlight .vc { color: #ce5c00 } /* Name.Variable.Class */
.highlight .vg { color: #ce5c00; text-decoration: underline } /* Name.Variable.Global */
.highlight .vi { color: #ce5c00 } /* Name.Variable.Instance */
.highlight .vm { color: #ce5c00 } /* Name.Variable.Magic */
.highlight .il { color: #2e3436 } /* Literal.Number.Integer.Long */</style></head><body><article class="alectryon-root alectryon-standalone alectryon-centered alectryon-coqdoc"><div class="alectryon-header">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running <a href="https://coq.inria.fr/">Coq</a>+<a href="https://github.com/ejgallego/coq-serapi">SerAPI</a> v8.10.0+0.7.0. Coq sources are in this panel; goals and messages will appear in the other. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus.</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight"><span class="c">(* -*- coding: utf-8 -*- *)</span>
<span class="sd">(************************************************************************)</span>
<span class="c">(*         *   The Coq Proof Assistant / The Coq Development Team       *)</span>
<span class="c">(*  v      *   INRIA, CNRS and contributors - Copyright 1999-2018       *)</span>
<span class="c">(* &lt;O___,, *       (see CREDITS file for the list of authors)           *)</span>
<span class="c">(*   \VV/  **************************************************************)</span>
<span class="c">(*    //   *    This file is distributed under the terms of the         *)</span>
<span class="c">(*         *     GNU Lesser General Public License Version 2.1          *)</span>
<span class="c">(*         *     (see LICENSE file for the text of the license)         *)</span>
<span class="sd">(************************************************************************)</span></span></span></pre><div class="doc">
<a name="lab1"></a><h1 class="section">MSetAVL : Implementation of MSetInterface via AVL trees</h1>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
This module implements finite sets using AVL trees.
    It follows the implementation from Ocaml's standard library,

<div class="paragraph"> </div>

    All operations given here expect and produce well-balanced trees
    (in the ocaml sense: heights of subtrees shouldn't differ by more
    than 2), and hence has low complexities (e.g. add is logarithmic
    in the size of the set). But proving these balancing preservations
    is in fact not necessary for ensuring correct operational behavior
    and hence fulfilling the MSet interface. As a consequence,
    balancing results are not part of this file anymore, they can
    now be found in <span class="inlinecode"><span class="id" title="var">MSetFullAVL</span></span>.

<div class="paragraph"> </div>

    Four operations (<span class="inlinecode"><span class="id" title="var">union</span></span>, <span class="inlinecode"><span class="id" title="var">subset</span></span>, <span class="inlinecode"><span class="id" title="var">compare</span></span> and <span class="inlinecode"><span class="id" title="var">equal</span></span>) have
    been slightly adapted in order to have only structural recursive
    calls. The precise ocaml versions of these operations have also
    been formalized (thanks to Function+measure), see <span class="inlinecode"><span class="id" title="var">ocaml_union</span></span>,
    <span class="inlinecode"><span class="id" title="var">ocaml_subset</span></span>, <span class="inlinecode"><span class="id" title="var">ocaml_compare</span></span> and <span class="inlinecode"><span class="id" title="var">ocaml_equal</span></span> in
    <span class="inlinecode"><span class="id" title="var">MSetFullAVL</span></span>. The structural variants compute faster in Coq,
    whereas the other variants produce nicer and/or (slightly) faster
    code after extraction.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Require Import</span> FunInd MSetInterface MSetGenTree BinInt Int.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Set Implicit Arguments</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Unset Strict Implicit</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight"><span class="c">(* for nicer extraction, we create inductive principles</span>
<span class="c">   only when needed *)</span>
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Local Unset Elimination Schemes</span>.</span></span></span></pre><div class="doc">
<a name="lab2"></a><h1 class="section">Ops : the pure functions</h1>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Module</span> <span class="nf">Ops</span> (<span class="kn">Import</span> I:Int)(X:OrderedType) &lt;: MSetInterface.Ops X.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Local Open Scope</span> Int_scope.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Notation</span> <span class="nf">int</span> := I.t.</span></span></span></pre><div class="doc">
<a name="lab3"></a><h2 class="section">Generic trees instantiated with integer height</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
We reuse a generic definition of trees where the information
    parameter is a <span class="inlinecode"><span class="id" title="var">Int.t</span></span>. Functions like mem or fold are also
    provided by this generic functor. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Include</span> MSetGenTree.Ops X I.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">t</span> := tree.</span></span></span></pre><div class="doc">
<a name="lab4"></a><h2 class="section">Height of trees</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">height</span> (<span class="nv">s</span> : t) : int :=
  <span class="kr">match</span> s <span class="kr">with</span>
  | Leaf =&gt; <span class="mi">0</span>
  | Node h _ _ _ =&gt; h
  <span class="kr">end</span>.</span></span></span></pre><div class="doc">
<a name="lab5"></a><h2 class="section">Singleton set</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">singleton</span> <span class="nv">x</span> := Node <span class="mi">1</span> Leaf x Leaf.</span></span></span></pre><div class="doc">
<a name="lab6"></a><h2 class="section">Helper functions</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
<span class="inlinecode"><span class="id" title="var">create</span></span> <span class="inlinecode"><span class="id" title="var">l</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">r</span></span> creates a node, assuming <span class="inlinecode"><span class="id" title="var">l</span></span> and <span class="inlinecode"><span class="id" title="var">r</span></span>
    to be balanced and <span class="inlinecode">|<span class="id" title="var">height</span></span> <span class="inlinecode"><span class="id" title="var">l</span></span> <span class="inlinecode">-</span> <span class="inlinecode"><span class="id" title="var">height</span></span> <span class="inlinecode"><span class="id" title="var">r</span>|</span> <span class="inlinecode">‚â§</span> <span class="inlinecode">2</span>. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">create</span> <span class="nv">l</span> <span class="nv">x</span> <span class="nv">r</span> :=
   Node (max (height l) (height r) + <span class="mi">1</span>) l x r.</span></span></span></pre><div class="doc">
<span class="inlinecode"><span class="id" title="var">bal</span></span> <span class="inlinecode"><span class="id" title="var">l</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">r</span></span> acts as <span class="inlinecode"><span class="id" title="var">create</span></span>, but performs one step of
    rebalancing if necessary, i.e. assumes <span class="inlinecode">|<span class="id" title="var">height</span></span> <span class="inlinecode"><span class="id" title="var">l</span></span> <span class="inlinecode">-</span> <span class="inlinecode"><span class="id" title="var">height</span></span> <span class="inlinecode"><span class="id" title="var">r</span>|</span> <span class="inlinecode">‚â§</span> <span class="inlinecode">3</span>. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">assert_false</span> := create.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">bal</span> <span class="nv">l</span> <span class="nv">x</span> <span class="nv">r</span> :=
  <span class="kr">let</span> <span class="nv">hl</span> := height l <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">hr</span> := height r <span class="kr">in</span>
  <span class="kr">if</span> (hr+<span class="mi">2</span>) &lt;? hl <span class="kr">then</span>
    <span class="kr">match</span> l <span class="kr">with</span>
     | Leaf =&gt; assert_false l x r
     | Node _ ll lx lr =&gt;
       <span class="kr">if</span> (height lr) &lt;=? (height ll) <span class="kr">then</span>
         create ll lx (create lr x r)
       <span class="kr">else</span>
         <span class="kr">match</span> lr <span class="kr">with</span>
          | Leaf =&gt; assert_false l x r
          | Node _ lrl lrx lrr =&gt;
              create (create ll lx lrl) lrx (create lrr x r)
         <span class="kr">end</span>
    <span class="kr">end</span>
  <span class="kr">else</span>
    <span class="kr">if</span> (hl+<span class="mi">2</span>) &lt;? hr <span class="kr">then</span>
      <span class="kr">match</span> r <span class="kr">with</span>
       | Leaf =&gt; assert_false l x r
       | Node _ rl rx rr =&gt;
         <span class="kr">if</span> (height rl) &lt;=? (height rr) <span class="kr">then</span>
            create (create l x rl) rx rr
         <span class="kr">else</span>
           <span class="kr">match</span> rl <span class="kr">with</span>
            | Leaf =&gt; assert_false l x r
            | Node _ rll rlx rlr =&gt;
                create (create l x rll) rlx (create rlr rx rr)
           <span class="kr">end</span>
      <span class="kr">end</span>
    <span class="kr">else</span>
      create l x r.</span></span></span></pre><div class="doc">
<a name="lab7"></a><h2 class="section">Insertion</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Fixpoint</span> <span class="nf">add</span> <span class="nv">x</span> <span class="nv">s</span> := <span class="kr">match</span> s <span class="kr">with</span>
   | Leaf =&gt; Node <span class="mi">1</span> Leaf x Leaf
   | Node h l y r =&gt;
      <span class="kr">match</span> X.<span class="nb">compare</span> x y <span class="kr">with</span>
         | Lt =&gt; bal (add x l) y r
         | Eq =&gt; Node h l y r
         | Gt =&gt; bal l y (add x r)
      <span class="kr">end</span>
  <span class="kr">end</span>.</span></span></span></pre><div class="doc">
<a name="lab8"></a><h2 class="section">Join</h2>
<div class="paragraph"> </div>

    Same as <span class="inlinecode"><span class="id" title="var">bal</span></span> but does not assume anything regarding heights
    of <span class="inlinecode"><span class="id" title="var">l</span></span> and <span class="inlinecode"><span class="id" title="var">r</span></span>.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Fixpoint</span> <span class="nf">join</span> <span class="nv">l</span> : elt -&gt; t -&gt; t :=
  <span class="kr">match</span> l <span class="kr">with</span>
    | Leaf =&gt; add
    | Node lh ll lx lr =&gt; <span class="kr">fun</span> <span class="nv">x</span> =&gt;
       <span class="kr">fix</span> join_aux (r:t) : t := <span class="kr">match</span> r <span class="kr">with</span>
          | Leaf =&gt; add x l
          | Node rh rl rx rr =&gt;
               <span class="kr">if</span> (rh+<span class="mi">2</span>) &lt;? lh <span class="kr">then</span> bal ll lx (join lr x r)
               <span class="kr">else</span> <span class="kr">if</span> (lh+<span class="mi">2</span>) &lt;? rh <span class="kr">then</span> bal (join_aux rl) rx rr
               <span class="kr">else</span> create l x r
          <span class="kr">end</span>
  <span class="kr">end</span>.</span></span></span></pre><div class="doc">
<a name="lab9"></a><h2 class="section">Extraction of minimum element</h2>
<div class="paragraph"> </div>

  Morally, <span class="inlinecode"><span class="id" title="var">remove_min</span></span> is to be applied to a non-empty tree
  <span class="inlinecode"><span class="id" title="var">t</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">Node</span></span> <span class="inlinecode"><span class="id" title="var">h</span></span> <span class="inlinecode"><span class="id" title="var">l</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">r</span></span>. Since we can't deal here with <span class="inlinecode"><span class="id" title="tactic">assert</span></span> <span class="inlinecode"><span class="id" title="var">false</span></span>
  for <span class="inlinecode"><span class="id" title="var">t</span>=<span class="id" title="var">Leaf</span></span>, we pre-unpack <span class="inlinecode"><span class="id" title="var">t</span></span> (and forget about <span class="inlinecode"><span class="id" title="var">h</span></span>).

</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Fixpoint</span> <span class="nf">remove_min</span> <span class="nv">l</span> <span class="nv">x</span> <span class="nv">r</span> : t*elt :=
  <span class="kr">match</span> l <span class="kr">with</span>
    | Leaf =&gt; (r,x)
    | Node lh ll lx lr =&gt;
       <span class="kr">let</span> (<span class="nv">l&#39;</span>,m) := remove_min ll lx lr <span class="kr">in</span> (bal l&#39; x r, m)
  <span class="kr">end</span>.</span></span></span></pre><div class="doc">
<a name="lab10"></a><h2 class="section">Merging two trees</h2>
<div class="paragraph"> </div>
<span class="inlinecode"><span class="id" title="var">merge</span></span> <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode"><span class="id" title="var">t2</span></span> builds the union of <span class="inlinecode"><span class="id" title="var">t1</span></span> and <span class="inlinecode"><span class="id" title="var">t2</span></span> assuming all elements
  of <span class="inlinecode"><span class="id" title="var">t1</span></span> to be smaller than all elements of <span class="inlinecode"><span class="id" title="var">t2</span></span>, and
  <span class="inlinecode">|<span class="id" title="var">height</span></span> <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode">-</span> <span class="inlinecode"><span class="id" title="var">height</span></span> <span class="inlinecode"><span class="id" title="var">t2</span>|</span> <span class="inlinecode">‚â§</span> <span class="inlinecode">2</span>.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">merge</span> <span class="nv">s1</span> <span class="nv">s2</span> :=  <span class="kr">match</span> s1,s2 <span class="kr">with</span>
  | Leaf, _ =&gt; s2
  | _, Leaf =&gt; s1
  | _, Node _ l2 x2 r2 =&gt;
        <span class="kr">let</span> (<span class="nv">s2&#39;</span>,m) := remove_min l2 x2 r2 <span class="kr">in</span> bal s1 m s2&#39;
<span class="kr">end</span>.</span></span></span></pre><div class="doc">
<a name="lab11"></a><h2 class="section">Deletion</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Fixpoint</span> <span class="nf">remove</span> <span class="nv">x</span> <span class="nv">s</span> := <span class="kr">match</span> s <span class="kr">with</span>
  | Leaf =&gt; Leaf
  | Node _ l y r =&gt;
      <span class="kr">match</span> X.<span class="nb">compare</span> x y <span class="kr">with</span>
         | Lt =&gt; bal (remove x l) y r
         | Eq =&gt; merge l r
         | Gt =&gt; bal l y (remove x r)
      <span class="kr">end</span>
   <span class="kr">end</span>.</span></span></span></pre><div class="doc">
<a name="lab12"></a><h2 class="section">Concatenation</h2>
<div class="paragraph"> </div>

    Same as <span class="inlinecode"><span class="id" title="var">merge</span></span> but does not assume anything about heights.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">concat</span> <span class="nv">s1</span> <span class="nv">s2</span> :=
   <span class="kr">match</span> s1, s2 <span class="kr">with</span>
      | Leaf, _ =&gt; s2
      | _, Leaf =&gt; s1
      | _, Node _ l2 x2 r2 =&gt;
            <span class="kr">let</span> (<span class="nv">s2&#39;</span>,m) := remove_min l2 x2 r2 <span class="kr">in</span>
            join s1 m s2&#39;
   <span class="kr">end</span>.</span></span></span></pre><div class="doc">
<a name="lab13"></a><h2 class="section">Splitting</h2>
<div class="paragraph"> </div>
<span class="inlinecode"><span class="id" title="tactic">split</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">s</span></span> returns a triple <span class="inlinecode">(<span class="id" title="var">l</span>,</span> <span class="inlinecode"><span class="id" title="var">present</span>,</span> <span class="inlinecode"><span class="id" title="var">r</span>)</span> where
<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="var">l</span></span> is the set of elements of <span class="inlinecode"><span class="id" title="var">s</span></span> that are <span class="inlinecode">&lt;</span> <span class="inlinecode"><span class="id" title="var">x</span></span>
</li>
<li> <span class="inlinecode"><span class="id" title="var">r</span></span> is the set of elements of <span class="inlinecode"><span class="id" title="var">s</span></span> that are <span class="inlinecode">&gt;</span> <span class="inlinecode"><span class="id" title="var">x</span></span>
</li>
<li> <span class="inlinecode"><span class="id" title="var">present</span></span> is <span class="inlinecode"><span class="id" title="var">true</span></span> if and only if <span class="inlinecode"><span class="id" title="var">s</span></span> contains  <span class="inlinecode"><span class="id" title="var">x</span></span>.

</li>
</ul>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Record</span> <span class="nf">triple</span> := mktriple { t_left:t; t_in:bool; t_right:t }.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Notation</span> <span class="s2">&quot;&lt;&lt; l , b , r &gt;&gt;&quot;</span> := (mktriple l b r) (<span class="kn">at level</span> <span class="mi">9</span>).</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Fixpoint</span> <span class="nf">split</span> <span class="nv">x</span> <span class="nv">s</span> : triple := <span class="kr">match</span> s <span class="kr">with</span>
  | Leaf =&gt; &lt;&lt; Leaf, false, Leaf &gt;&gt;
  | Node _ l y r =&gt;
     <span class="kr">match</span> X.<span class="nb">compare</span> x y <span class="kr">with</span>
      | Lt =&gt; <span class="kr">let</span> (<span class="nv">ll</span>,b,rl) := <span class="nb">split</span> x l <span class="kr">in</span> &lt;&lt; ll, b, join rl y r &gt;&gt;
      | Eq =&gt; &lt;&lt; l, true, r &gt;&gt;
      | Gt =&gt; <span class="kr">let</span> (<span class="nv">rl</span>,b,rr) := <span class="nb">split</span> x r <span class="kr">in</span> &lt;&lt; join l y rl, b, rr &gt;&gt;
     <span class="kr">end</span>
 <span class="kr">end</span>.</span></span></span></pre><div class="doc">
<a name="lab14"></a><h2 class="section">Intersection</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Fixpoint</span> <span class="nf">inter</span> <span class="nv">s1</span> <span class="nv">s2</span> := <span class="kr">match</span> s1, s2 <span class="kr">with</span>
    | Leaf, _ =&gt; Leaf
    | _, Leaf =&gt; Leaf
    | Node _ l1 x1 r1, _ =&gt;
            <span class="kr">let</span> (<span class="nv">l2&#39;</span>,pres,r2&#39;) := <span class="nb">split</span> x1 s2 <span class="kr">in</span>
            <span class="kr">if</span> pres <span class="kr">then</span> join (inter l1 l2&#39;) x1 (inter r1 r2&#39;)
            <span class="kr">else</span> concat (inter l1 l2&#39;) (inter r1 r2&#39;)
    <span class="kr">end</span>.</span></span></span></pre><div class="doc">
<a name="lab15"></a><h2 class="section">Difference</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Fixpoint</span> <span class="nf">diff</span> <span class="nv">s1</span> <span class="nv">s2</span> := <span class="kr">match</span> s1, s2 <span class="kr">with</span>
 | Leaf, _ =&gt; Leaf
 | _, Leaf =&gt; s1
 | Node _ l1 x1 r1, _ =&gt;
    <span class="kr">let</span> (<span class="nv">l2&#39;</span>,pres,r2&#39;) := <span class="nb">split</span> x1 s2 <span class="kr">in</span>
    <span class="kr">if</span> pres <span class="kr">then</span> concat (diff l1 l2&#39;) (diff r1 r2&#39;)
    <span class="kr">else</span> join (diff l1 l2&#39;) x1 (diff r1 r2&#39;)
<span class="kr">end</span>.</span></span></span></pre><div class="doc">
<a name="lab16"></a><h2 class="section">Union</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
In ocaml, heights of <span class="inlinecode"><span class="id" title="var">s1</span></span> and <span class="inlinecode"><span class="id" title="var">s2</span></span> are compared each time in order
   to recursively perform the split on the smaller set.
   Unfortunately, this leads to a non-structural algorithm. The
   following code is a simplification of the ocaml version: no
   comparison of heights. It might be slightly slower, but
   experimentally all the tests I've made in ocaml have shown this
   potential slowdown to be non-significant. Anyway, the exact code
   of ocaml has also been formalized thanks to Function+measure, see
   <span class="inlinecode"><span class="id" title="var">ocaml_union</span></span> in <span class="inlinecode"><span class="id" title="var">MSetFullAVL</span></span>.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Fixpoint</span> <span class="nf">union</span> <span class="nv">s1</span> <span class="nv">s2</span> :=
 <span class="kr">match</span> s1, s2 <span class="kr">with</span>
  | Leaf, _ =&gt; s2
  | _, Leaf =&gt; s1
  | Node _ l1 x1 r1, _ =&gt;
     <span class="kr">let</span> (<span class="nv">l2&#39;</span>,_,r2&#39;) := <span class="nb">split</span> x1 s2 <span class="kr">in</span>
     join (union l1 l2&#39;) x1 (union r1 r2&#39;)
 <span class="kr">end</span>.</span></span></span></pre><div class="doc">
<a name="lab17"></a><h2 class="section">Filter</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Fixpoint</span> <span class="nf">filter</span> (<span class="nv">f</span>:elt-&gt;bool) <span class="nv">s</span> := <span class="kr">match</span> s <span class="kr">with</span>
  | Leaf =&gt; Leaf
  | Node _ l x r =&gt;
    <span class="kr">let</span> <span class="nv">l&#39;</span> := filter f l <span class="kr">in</span>
    <span class="kr">let</span> <span class="nv">r&#39;</span> := filter f r <span class="kr">in</span>
    <span class="kr">if</span> f x <span class="kr">then</span> join l&#39; x r&#39; <span class="kr">else</span> concat l&#39; r&#39;
 <span class="kr">end</span>.</span></span></span></pre><div class="doc">
<a name="lab18"></a><h2 class="section">Partition</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Fixpoint</span> <span class="nf">partition</span> (<span class="nv">f</span>:elt-&gt;bool)(<span class="nv">s</span> : t) : t*t :=
  <span class="kr">match</span> s <span class="kr">with</span>
   | Leaf =&gt; (Leaf, Leaf)
   | Node _ l x r =&gt;
      <span class="kr">let</span> (<span class="nv">l1</span>,l2) := partition f l <span class="kr">in</span>
      <span class="kr">let</span> (<span class="nv">r1</span>,r2) := partition f r <span class="kr">in</span>
      <span class="kr">if</span> f x <span class="kr">then</span> (join l1 x r1, concat l2 r2)
      <span class="kr">else</span> (concat l1 r1, join l2 x r2)
  <span class="kr">end</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">End</span> <span class="nf">Ops</span>.</span></span></span></pre><div class="doc">
<a name="lab19"></a><h1 class="section">MakeRaw</h1>
<div class="paragraph"> </div>

   Functor of pure functions + a posteriori proofs of invariant
   preservation 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Module</span> <span class="nf">MakeRaw</span> (<span class="kn">Import</span> I:Int)(X:OrderedType) &lt;: RawSets X.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Include</span> Ops I X.</span></span></span></pre><div class="doc">
Generic definition of binary-search-trees and proofs of
    specifications for generic functions such as mem or fold. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Include</span> MSetGenTree.Props X I.</span></span></span></pre><div class="doc">
Automation and dedicated tactics 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Local Hint</span> <span class="kn">Immediate</span> MX.eq_sym : core.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Local Hint</span> Unfold In lt_tree gt_tree Ok : core.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Local Hint</span> Constructors InT bst : core.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Local Hint</span> <span class="kn">Resolve</span> MX.eq_refl MX.eq_trans MX.lt_trans ok : core.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Local Hint</span> <span class="kn">Resolve</span> lt_leaf gt_leaf lt_tree_node gt_tree_node : core.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Local Hint</span> <span class="kn">Resolve</span> lt_tree_not_in lt_tree_trans gt_tree_not_in gt_tree_trans : core.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Local Hint</span> <span class="kn">Resolve</span> elements_spec2 : core.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(* Sometimes functional induction will expose too much of</span>
<span class="c">   a tree structure. The following tactic allows factoring back</span>
<span class="c">   a Node whose internal parts occurs nowhere else. *)</span>

<span class="c">(* TODO: why Ltac instead of Tactic Notation don&#39;t work ? why clear ? *)</span>

</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Tactic Notation</span> <span class="s2">&quot;factornode&quot;</span> <span class="kn">ident</span>(s) :=
 <span class="kp">try</span> <span class="nb">clear</span> s;
 <span class="kr">match goal with</span>
   | |- <span class="kp">context</span> [Node ?l ?x ?r ?h] =&gt;
       <span class="nb">set</span> (s:=Node l x r h) <span class="kr">in</span> *; <span class="nb">clearbody</span> s; <span class="nb">clear</span> l x r h
   | _ : <span class="kp">context</span> [Node ?l ?x ?r ?h] |- _ =&gt;
       <span class="nb">set</span> (s:=Node l x r h) <span class="kr">in</span> *; <span class="nb">clearbody</span> s; <span class="nb">clear</span> l x r h
 <span class="kr">end</span>.</span></span></span></pre><div class="doc">
Inductions principles for some of the set operators 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Functional Scheme</span> <span class="nf">bal_ind</span> := <span class="kn">Induction for</span> bal <span class="kn">Sort</span> <span class="kt">Prop</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Functional Scheme</span> <span class="nf">remove_min_ind</span> := <span class="kn">Induction for</span> remove_min <span class="kn">Sort</span> <span class="kt">Prop</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Functional Scheme</span> <span class="nf">merge_ind</span> := <span class="kn">Induction for</span> merge <span class="kn">Sort</span> <span class="kt">Prop</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Functional Scheme</span> <span class="nf">concat_ind</span> := <span class="kn">Induction for</span> concat <span class="kn">Sort</span> <span class="kt">Prop</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Functional Scheme</span> <span class="nf">inter_ind</span> := <span class="kn">Induction for</span> inter <span class="kn">Sort</span> <span class="kt">Prop</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Functional Scheme</span> <span class="nf">diff_ind</span> := <span class="kn">Induction for</span> diff <span class="kn">Sort</span> <span class="kt">Prop</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Functional Scheme</span> <span class="nf">union_ind</span> := <span class="kn">Induction for</span> union <span class="kn">Sort</span> <span class="kt">Prop</span>.</span></span></span></pre><div class="doc">
Notations and helper lemma about pairs and triples 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Declare Scope</span> pair_scope.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Notation</span> <span class="s2">&quot;s #1&quot;</span> := (fst s) (<span class="kn">at level</span> <span class="mi">9</span>, <span class="kn">format</span> <span class="s2">&quot;s &#39;#1&#39;&quot;</span>) : pair_scope.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Notation</span> <span class="s2">&quot;s #2&quot;</span> := (snd s) (<span class="kn">at level</span> <span class="mi">9</span>, <span class="kn">format</span> <span class="s2">&quot;s &#39;#2&#39;&quot;</span>) : pair_scope.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Notation</span> <span class="s2">&quot;t #l&quot;</span> := (t_left t) (<span class="kn">at level</span> <span class="mi">9</span>, <span class="kn">format</span> <span class="s2">&quot;t &#39;#l&#39;&quot;</span>) : pair_scope.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Notation</span> <span class="s2">&quot;t #b&quot;</span> := (t_in t) (<span class="kn">at level</span> <span class="mi">9</span>, <span class="kn">format</span> <span class="s2">&quot;t &#39;#b&#39;&quot;</span>) : pair_scope.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Notation</span> <span class="s2">&quot;t #r&quot;</span> := (t_right t) (<span class="kn">at level</span> <span class="mi">9</span>, <span class="kn">format</span> <span class="s2">&quot;t &#39;#r&#39;&quot;</span>) : pair_scope.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Local Open Scope</span> pair_scope.</span></span></span></pre><div class="doc">
<a name="lab20"></a><h2 class="section">Singleton set</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk0" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk0"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">singleton_spec</span> : <span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span>, InT y (singleton x) &lt;-&gt; X.eq y x.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">x</span> : X.t) (<span class="nv">y</span> : elt),
InT y (singleton x) &lt;-&gt; X.eq y x</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk1" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk1"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">x</span> : X.t) (<span class="nv">y</span> : elt),
InT y (singleton x) &lt;-&gt; X.eq y x</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">unfold</span> singleton; intuition_in.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk2" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk2"><span class="highlight"><span class="kn">Instance</span> <span class="nf">singleton_ok</span> <span class="nv">x</span> : Ok (singleton x).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (singleton x)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk3" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk3"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (singleton x)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">unfold</span> singleton; <span class="nb">auto</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
<a name="lab21"></a><h2 class="section">Helper functions</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk4" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk4"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">create_spec</span> :
 <span class="kr">forall</span> <span class="nv">l</span> <span class="nv">x</span> <span class="nv">r</span> <span class="nv">y</span>,  InT y (create l x r) &lt;-&gt; X.eq y x \/ InT y l \/ InT y r.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : t) (<span class="nv">x</span> : X.t) (<span class="nv">r</span> : t) (<span class="nv">y</span> : elt),
InT y (create l x r) &lt;-&gt;
X.eq y x \/ InT y l \/ InT y r</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk5" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk5"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : t) (<span class="nv">x</span> : X.t) (<span class="nv">r</span> : t) (<span class="nv">y</span> : elt),
InT y (create l x r) &lt;-&gt;
X.eq y x \/ InT y l \/ InT y r</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">unfold</span> create; <span class="nb">split</span>; [ <span class="nb">inversion_clear</span> <span class="mi">1</span> | ]; <span class="nb">intuition</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk6" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk6"><span class="highlight"><span class="kn">Instance</span> <span class="nf">create_ok</span> <span class="nv">l</span> <span class="nv">x</span> <span class="nv">r</span> `(Ok l, Ok r, lt_tree x l, gt_tree x r) :
 Ok (create l x r).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lt_tree0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">gt_tree0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (create l x r)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk7" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk7"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lt_tree0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">gt_tree0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (create l x r)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">unfold</span> create; <span class="nb">auto</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk8" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk8"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">bal_spec</span> : <span class="kr">forall</span> <span class="nv">l</span> <span class="nv">x</span> <span class="nv">r</span> <span class="nv">y</span>,
 InT y (bal l x r) &lt;-&gt; X.eq y x \/ InT y l \/ InT y r.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : t) (<span class="nv">x</span> : X.t) (<span class="nv">r</span> : t) (<span class="nv">y</span> : elt),
InT y (bal l x r) &lt;-&gt; X.eq y x \/ InT y l \/ InT y r</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk9" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk9"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : t) (<span class="nv">x</span> : X.t) (<span class="nv">r</span> : t) (<span class="nv">y</span> : elt),
InT y (bal l x r) &lt;-&gt; X.eq y x \/ InT y l \/ InT y r</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">intros</span> l x r; <span class="nb">functional induction</span> bal l x r; <span class="nb">intros</span>; <span class="kp">try</span> <span class="nb">clear</span> e0;
 <span class="nb">rewrite</span> !create_spec; intuition_in.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chka" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chka"><span class="highlight"><span class="kn">Instance</span> <span class="nf">bal_ok</span> <span class="nv">l</span> <span class="nv">x</span> <span class="nv">r</span> `(Ok l, Ok r, lt_tree x l, gt_tree x r) :
 Ok (bal l x r).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lt_tree0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">gt_tree0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (bal l x r)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkb" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkb"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lt_tree0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">gt_tree0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (bal l x r)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">functional induction</span> bal l x r; <span class="nb">intros</span>;
 inv; <span class="kp">repeat</span> <span class="nb">apply</span> create_ok; <span class="nb">auto</span>; <span class="nb">unfold</span> create;
 (<span class="nb">apply</span> lt_tree_node || <span class="nb">apply</span> gt_tree_node); <span class="nb">auto</span>;
 (<span class="nb">eapply</span> lt_tree_trans || <span class="nb">eapply</span> gt_tree_trans); <span class="nb">eauto</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
<a name="lab22"></a><h2 class="section">Insertion</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkc" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkc"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">add_spec&#39;</span> : <span class="kr">forall</span> <span class="nv">s</span> <span class="nv">x</span> <span class="nv">y</span>,
 InT y (add x s) &lt;-&gt; X.eq y x \/ InT y s.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s</span> : tree) (<span class="nv">x</span> : X.t) (<span class="nv">y</span> : elt),
InT y (add x s) &lt;-&gt; X.eq y x \/ InT y s</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkd" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkd"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s</span> : tree) (<span class="nv">x</span> : X.t) (<span class="nv">y</span> : elt),
InT y (add x s) &lt;-&gt; X.eq y x \/ InT y s</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chke" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chke"><span class="highlight">induct s x; <span class="kp">try</span> <span class="nb">rewrite</span> ?bal_spec, ?IHl, ?IHr; intuition_in.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt), InT y0 (add x0 l) &lt;-&gt; X.eq y0 x0 \/ InT y0 l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt), InT y0 (add x0 r) &lt;-&gt; X.eq y0 x0 \/ InT y0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq y x</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y (Node i l x&#39; r)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">setoid_replace</span> y <span class="kr">with</span> x&#39;; <span class="nb">eauto</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkf" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkf"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">add_spec</span> : <span class="kr">forall</span> <span class="nv">s</span> <span class="nv">x</span> <span class="nv">y</span> `{Ok s},
 InT y (add x s) &lt;-&gt; X.eq y x \/ InT y s.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s</span> : tree) (<span class="nv">x</span> : X.t) (<span class="nv">y</span> : elt),
Ok s -&gt; InT y (add x s) &lt;-&gt; X.eq y x \/ InT y s</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk10" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk10"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s</span> : tree) (<span class="nv">x</span> : X.t) (<span class="nv">y</span> : elt),
Ok s -&gt; InT y (add x s) &lt;-&gt; X.eq y x \/ InT y s</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">intros</span>; <span class="nb">apply</span> add_spec&#39;.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk11" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk11"><span class="highlight"><span class="kn">Instance</span> <span class="nf">add_ok</span> <span class="nv">s</span> <span class="nv">x</span> `(Ok s) : Ok (add x s).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (add x s)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk12" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk12"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (add x s)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight">induct s x; <span class="nb">auto</span>; <span class="nb">apply</span> bal_ok; <span class="nb">auto</span>;
  <span class="nb">intros</span> y; <span class="nb">rewrite</span> add_spec&#39;; <span class="nb">intuition</span>; order.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">

</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Local Open Scope</span> Int_scope.</span></span></span></pre><div class="doc">
<a name="lab23"></a><h2 class="section">Join</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
Function/Functional Scheme can't deal with internal fix.
    Let's do its job by hand: 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Ltac</span> <span class="nf">join_tac</span> :=
 <span class="kr">let</span> <span class="nv">l</span> := <span class="kp">fresh</span> <span class="s2">&quot;l&quot;</span> <span class="kr">in</span>
 <span class="nb">intro</span> l; <span class="nb">induction</span> l <span class="kr">as</span> [| lh ll _ lx lr Hlr];
   [ | <span class="nb">intros</span> x r; <span class="nb">induction</span> r <span class="kr">as</span> [| rh rl Hrl rx rr _]; <span class="nb">unfold</span> join;
     [ | <span class="nb">destruct</span> ((rh+<span class="mi">2</span>) &lt;? lh) <span class="nb">eqn</span>:LT;
       [ <span class="kr">match goal with</span> |- <span class="kp">context</span> b [ bal ?a ?b ?c] =&gt;
           <span class="nb">replace</span> (bal a b c)
           <span class="kr">with</span> (bal ll lx (join lr x (Node rh rl rx rr))); [ | <span class="nb">auto</span>]
         <span class="kr">end</span>
       | <span class="nb">destruct</span> ((lh+<span class="mi">2</span>) &lt;? rh) <span class="nb">eqn</span>:LT&#39;;
         [ <span class="kr">match goal with</span> |- <span class="kp">context</span> b [ bal ?a ?b ?c] =&gt;
             <span class="nb">replace</span> (bal a b c)
             <span class="kr">with</span> (bal (join (Node lh ll lx lr) x rl) rx rr); [ | <span class="nb">auto</span>]
           <span class="kr">end</span>
         | ] ] ] ]; <span class="nb">intros</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk13" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk13"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">join_spec</span> : <span class="kr">forall</span> <span class="nv">l</span> <span class="nv">x</span> <span class="nv">r</span> <span class="nv">y</span>,
 InT y (join l x r) &lt;-&gt; X.eq y x \/ InT y l \/ InT y r.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : tree) (<span class="nv">x</span> : elt) (<span class="nv">r</span> : t) (<span class="nv">y</span> : elt),
InT y (join l x r) &lt;-&gt; X.eq y x \/ InT y l \/ InT y r</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk14" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk14"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : tree) (<span class="nv">x</span> : elt) (<span class="nv">r</span> : t) (<span class="nv">y</span> : elt),
InT y (join l x r) &lt;-&gt; X.eq y x \/ InT y l \/ InT y r</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk15" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk15"><span class="highlight">join_tac.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y (join Leaf x r) &lt;-&gt;
X.eq y x \/ InT y Leaf \/ InT y r</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk16" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">lh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : elt) (<span class="nv">r</span> : t) (<span class="nv">y0</span> : elt),
InT y0 (join lr x0 r) &lt;-&gt; X.eq y0 x0 \/ InT y0 lr \/ InT y0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk16"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (add x (Node lh ll lx lr)) &lt;-&gt;
X.eq y x \/ InT y (Node lh ll lx lr) \/ InT y Leaf</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk17" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">lh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : elt) (<span class="nv">r</span> : t) (<span class="nv">y0</span> : elt),
InT y0 (join lr x0 r) &lt;-&gt; X.eq y0 x0 \/ InT y0 lr \/ InT y0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hrl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (join (Node lh ll lx lr) x rl) &lt;-&gt;
X.eq y0 x \/ InT y0 (Node lh ll lx lr) \/ InT y0 rl</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(rh + <span class="mi">2</span> &lt;? lh) = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk17"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (bal ll lx (join lr x (Node rh rl rx rr))) &lt;-&gt;
X.eq y x \/
InT y (Node lh ll lx lr) \/ InT y (Node rh rl rx rr)</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk18" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">lh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : elt) (<span class="nv">r</span> : t) (<span class="nv">y0</span> : elt),
InT y0 (join lr x0 r) &lt;-&gt; X.eq y0 x0 \/ InT y0 lr \/ InT y0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hrl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (join (Node lh ll lx lr) x rl) &lt;-&gt;
X.eq y0 x \/ InT y0 (Node lh ll lx lr) \/ InT y0 rl</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(rh + <span class="mi">2</span> &lt;? lh) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(lh + <span class="mi">2</span> &lt;? rh) = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk18"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (bal (join (Node lh ll lx lr) x rl) rx rr) &lt;-&gt;
X.eq y x \/
InT y (Node lh ll lx lr) \/ InT y (Node rh rl rx rr)</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk19" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">lh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : elt) (<span class="nv">r</span> : t) (<span class="nv">y0</span> : elt),
InT y0 (join lr x0 r) &lt;-&gt; X.eq y0 x0 \/ InT y0 lr \/ InT y0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hrl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (join (Node lh ll lx lr) x rl) &lt;-&gt;
X.eq y0 x \/ InT y0 (Node lh ll lx lr) \/ InT y0 rl</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(rh + <span class="mi">2</span> &lt;? lh) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(lh + <span class="mi">2</span> &lt;? rh) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk19"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (create (Node lh ll lx lr) x (Node rh rl rx rr)) &lt;-&gt;
X.eq y x \/
InT y (Node lh ll lx lr) \/ InT y (Node rh rl rx rr)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk1a" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk1a"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y (add x r) &lt;-&gt; X.eq y x \/ InT y Leaf \/ InT y r</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk1b" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">lh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : elt) (<span class="nv">r</span> : t) (<span class="nv">y0</span> : elt),
InT y0 (join lr x0 r) &lt;-&gt; X.eq y0 x0 \/ InT y0 lr \/ InT y0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk1b"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (add x (Node lh ll lx lr)) &lt;-&gt;
X.eq y x \/ InT y (Node lh ll lx lr) \/ InT y Leaf</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk1c" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">lh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : elt) (<span class="nv">r</span> : t) (<span class="nv">y0</span> : elt),
InT y0 (join lr x0 r) &lt;-&gt; X.eq y0 x0 \/ InT y0 lr \/ InT y0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hrl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (join (Node lh ll lx lr) x rl) &lt;-&gt;
X.eq y0 x \/ InT y0 (Node lh ll lx lr) \/ InT y0 rl</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(rh + <span class="mi">2</span> &lt;? lh) = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk1c"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (bal ll lx (join lr x (Node rh rl rx rr))) &lt;-&gt;
X.eq y x \/
InT y (Node lh ll lx lr) \/ InT y (Node rh rl rx rr)</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk1d" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">lh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : elt) (<span class="nv">r</span> : t) (<span class="nv">y0</span> : elt),
InT y0 (join lr x0 r) &lt;-&gt; X.eq y0 x0 \/ InT y0 lr \/ InT y0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hrl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (join (Node lh ll lx lr) x rl) &lt;-&gt;
X.eq y0 x \/ InT y0 (Node lh ll lx lr) \/ InT y0 rl</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(rh + <span class="mi">2</span> &lt;? lh) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(lh + <span class="mi">2</span> &lt;? rh) = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk1d"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (bal (join (Node lh ll lx lr) x rl) rx rr) &lt;-&gt;
X.eq y x \/
InT y (Node lh ll lx lr) \/ InT y (Node rh rl rx rr)</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk1e" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">lh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : elt) (<span class="nv">r</span> : t) (<span class="nv">y0</span> : elt),
InT y0 (join lr x0 r) &lt;-&gt; X.eq y0 x0 \/ InT y0 lr \/ InT y0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hrl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (join (Node lh ll lx lr) x rl) &lt;-&gt;
X.eq y0 x \/ InT y0 (Node lh ll lx lr) \/ InT y0 rl</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(rh + <span class="mi">2</span> &lt;? lh) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(lh + <span class="mi">2</span> &lt;? rh) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk1e"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (create (Node lh ll lx lr) x (Node rh rl rx rr)) &lt;-&gt;
X.eq y x \/
InT y (Node lh ll lx lr) \/ InT y (Node rh rl rx rr)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk1f" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk1f"><span class="highlight"><span class="nb">rewrite</span> add_spec&#39;; intuition_in.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">lh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : elt) (<span class="nv">r</span> : t) (<span class="nv">y0</span> : elt),
InT y0 (join lr x0 r) &lt;-&gt; X.eq y0 x0 \/ InT y0 lr \/ InT y0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y (add x (Node lh ll lx lr)) &lt;-&gt;
X.eq y x \/ InT y (Node lh ll lx lr) \/ InT y Leaf</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk20" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">lh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : elt) (<span class="nv">r</span> : t) (<span class="nv">y0</span> : elt),
InT y0 (join lr x0 r) &lt;-&gt; X.eq y0 x0 \/ InT y0 lr \/ InT y0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hrl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (join (Node lh ll lx lr) x rl) &lt;-&gt;
X.eq y0 x \/ InT y0 (Node lh ll lx lr) \/ InT y0 rl</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(rh + <span class="mi">2</span> &lt;? lh) = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk20"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (bal ll lx (join lr x (Node rh rl rx rr))) &lt;-&gt;
X.eq y x \/
InT y (Node lh ll lx lr) \/ InT y (Node rh rl rx rr)</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk21" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">lh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : elt) (<span class="nv">r</span> : t) (<span class="nv">y0</span> : elt),
InT y0 (join lr x0 r) &lt;-&gt; X.eq y0 x0 \/ InT y0 lr \/ InT y0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hrl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (join (Node lh ll lx lr) x rl) &lt;-&gt;
X.eq y0 x \/ InT y0 (Node lh ll lx lr) \/ InT y0 rl</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(rh + <span class="mi">2</span> &lt;? lh) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(lh + <span class="mi">2</span> &lt;? rh) = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk21"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (bal (join (Node lh ll lx lr) x rl) rx rr) &lt;-&gt;
X.eq y x \/
InT y (Node lh ll lx lr) \/ InT y (Node rh rl rx rr)</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk22" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">lh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : elt) (<span class="nv">r</span> : t) (<span class="nv">y0</span> : elt),
InT y0 (join lr x0 r) &lt;-&gt; X.eq y0 x0 \/ InT y0 lr \/ InT y0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hrl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (join (Node lh ll lx lr) x rl) &lt;-&gt;
X.eq y0 x \/ InT y0 (Node lh ll lx lr) \/ InT y0 rl</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(rh + <span class="mi">2</span> &lt;? lh) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(lh + <span class="mi">2</span> &lt;? rh) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk22"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (create (Node lh ll lx lr) x (Node rh rl rx rr)) &lt;-&gt;
X.eq y x \/
InT y (Node lh ll lx lr) \/ InT y (Node rh rl rx rr)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk23" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk23"><span class="highlight"><span class="nb">rewrite</span> add_spec&#39;; intuition_in.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">lh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : elt) (<span class="nv">r</span> : t) (<span class="nv">y0</span> : elt),
InT y0 (join lr x0 r) &lt;-&gt; X.eq y0 x0 \/ InT y0 lr \/ InT y0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hrl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (join (Node lh ll lx lr) x rl) &lt;-&gt;
X.eq y0 x \/ InT y0 (Node lh ll lx lr) \/ InT y0 rl</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(rh + <span class="mi">2</span> &lt;? lh) = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y (bal ll lx (join lr x (Node rh rl rx rr))) &lt;-&gt;
X.eq y x \/
InT y (Node lh ll lx lr) \/ InT y (Node rh rl rx rr)</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk24" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">lh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : elt) (<span class="nv">r</span> : t) (<span class="nv">y0</span> : elt),
InT y0 (join lr x0 r) &lt;-&gt; X.eq y0 x0 \/ InT y0 lr \/ InT y0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hrl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (join (Node lh ll lx lr) x rl) &lt;-&gt;
X.eq y0 x \/ InT y0 (Node lh ll lx lr) \/ InT y0 rl</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(rh + <span class="mi">2</span> &lt;? lh) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(lh + <span class="mi">2</span> &lt;? rh) = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk24"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (bal (join (Node lh ll lx lr) x rl) rx rr) &lt;-&gt;
X.eq y x \/
InT y (Node lh ll lx lr) \/ InT y (Node rh rl rx rr)</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk25" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">lh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : elt) (<span class="nv">r</span> : t) (<span class="nv">y0</span> : elt),
InT y0 (join lr x0 r) &lt;-&gt; X.eq y0 x0 \/ InT y0 lr \/ InT y0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hrl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (join (Node lh ll lx lr) x rl) &lt;-&gt;
X.eq y0 x \/ InT y0 (Node lh ll lx lr) \/ InT y0 rl</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(rh + <span class="mi">2</span> &lt;? lh) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(lh + <span class="mi">2</span> &lt;? rh) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk25"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (create (Node lh ll lx lr) x (Node rh rl rx rr)) &lt;-&gt;
X.eq y x \/
InT y (Node lh ll lx lr) \/ InT y (Node rh rl rx rr)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk26" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk26"><span class="highlight"><span class="nb">rewrite</span> bal_spec, Hlr; <span class="nb">clear</span> Hlr Hrl; intuition_in.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">lh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : elt) (<span class="nv">r</span> : t) (<span class="nv">y0</span> : elt),
InT y0 (join lr x0 r) &lt;-&gt; X.eq y0 x0 \/ InT y0 lr \/ InT y0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hrl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (join (Node lh ll lx lr) x rl) &lt;-&gt;
X.eq y0 x \/ InT y0 (Node lh ll lx lr) \/ InT y0 rl</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(rh + <span class="mi">2</span> &lt;? lh) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(lh + <span class="mi">2</span> &lt;? rh) = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y (bal (join (Node lh ll lx lr) x rl) rx rr) &lt;-&gt;
X.eq y x \/
InT y (Node lh ll lx lr) \/ InT y (Node rh rl rx rr)</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk27" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">lh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : elt) (<span class="nv">r</span> : t) (<span class="nv">y0</span> : elt),
InT y0 (join lr x0 r) &lt;-&gt; X.eq y0 x0 \/ InT y0 lr \/ InT y0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hrl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (join (Node lh ll lx lr) x rl) &lt;-&gt;
X.eq y0 x \/ InT y0 (Node lh ll lx lr) \/ InT y0 rl</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(rh + <span class="mi">2</span> &lt;? lh) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(lh + <span class="mi">2</span> &lt;? rh) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk27"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (create (Node lh ll lx lr) x (Node rh rl rx rr)) &lt;-&gt;
X.eq y x \/
InT y (Node lh ll lx lr) \/ InT y (Node rh rl rx rr)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk28" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk28"><span class="highlight"><span class="nb">rewrite</span> bal_spec, Hrl; <span class="nb">clear</span> Hlr Hrl; intuition_in.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">lh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : elt) (<span class="nv">r</span> : t) (<span class="nv">y0</span> : elt),
InT y0 (join lr x0 r) &lt;-&gt; X.eq y0 x0 \/ InT y0 lr \/ InT y0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hrl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (join (Node lh ll lx lr) x rl) &lt;-&gt;
X.eq y0 x \/ InT y0 (Node lh ll lx lr) \/ InT y0 rl</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(rh + <span class="mi">2</span> &lt;? lh) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(lh + <span class="mi">2</span> &lt;? rh) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y (create (Node lh ll lx lr) x (Node rh rl rx rr)) &lt;-&gt;
X.eq y x \/
InT y (Node lh ll lx lr) \/ InT y (Node rh rl rx rr)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> create_spec.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk29" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk29"><span class="highlight"><span class="kn">Instance</span> <span class="nf">join_ok</span> : <span class="kr">forall</span> <span class="nv">l</span> <span class="nv">x</span> <span class="nv">r</span> `(Ok l, Ok r, lt_tree x l, gt_tree x r),
 Ok (join l x r).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : tree) (<span class="nv">x</span> : X.t) (<span class="nv">r</span> : tree),
Ok l -&gt;
Ok r -&gt; lt_tree x l -&gt; gt_tree x r -&gt; Ok (join l x r)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk2a" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk2a"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : tree) (<span class="nv">x</span> : X.t) (<span class="nv">r</span> : tree),
Ok l -&gt;
Ok r -&gt; lt_tree x l -&gt; gt_tree x r -&gt; Ok (join l x r)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk2b" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk2b"><span class="highlight">join_tac; <span class="nb">auto with</span> *; inv; <span class="nb">apply</span> bal_ok; <span class="nb">auto</span>;
 <span class="nb">clear</span> Hrl Hlr; <span class="nb">intro</span>; <span class="nb">intros</span>; <span class="nb">rewrite</span> join_spec <span class="kr">in</span> *.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">lh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(rh + <span class="mi">2</span> &lt;? lh) = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lt_tree0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x (Node lh ll lx lr)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">gt_tree0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x (Node rh rl rx rr)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok rl</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok rr</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree rx rl</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree rx rr</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok ll</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H9</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok lr</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H10</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree lx ll</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H11</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree lx lr</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq y x \/ InT y lr \/ InT y (Node rh rl rx rr)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">X.lt lx y</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk2c" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">lh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(rh + <span class="mi">2</span> &lt;? lh) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(lh + <span class="mi">2</span> &lt;? rh) = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lt_tree0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x (Node lh ll lx lr)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">gt_tree0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x (Node rh rl rx rr)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok rl</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok rr</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree rx rl</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree rx rr</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok ll</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H9</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok lr</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H10</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree lx ll</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H11</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree lx lr</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq y x \/ InT y (Node lh ll lx lr) \/ InT y rl</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk2c"><hr></label><div class="goal-conclusion"><span class="highlight">X.lt y rx</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk2d" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk2d"><span class="highlight"><span class="nb">intuition</span>; [ <span class="nb">setoid_replace</span> y <span class="kr">with</span> x | ]; <span class="nb">eauto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">lh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rh</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">rr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(rh + <span class="mi">2</span> &lt;? lh) = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">LT'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(lh + <span class="mi">2</span> &lt;? rh) = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lt_tree0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x (Node lh ll lx lr)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">gt_tree0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x (Node rh rl rx rr)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok rl</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok rr</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree rx rl</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree rx rr</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok ll</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H9</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok lr</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H10</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree lx ll</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H11</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree lx lr</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq y x \/ InT y (Node lh ll lx lr) \/ InT y rl</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">X.lt y rx</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">intuition</span>; [ <span class="nb">setoid_replace</span> y <span class="kr">with</span> x | ]; <span class="nb">eauto</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
<a name="lab24"></a><h2 class="section">Extraction of minimum element</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk2e" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk2e"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">remove_min_spec</span> : <span class="kr">forall</span> <span class="nv">l</span> <span class="nv">x</span> <span class="nv">r</span> <span class="nv">y</span> <span class="nv">h</span>,
 InT y (Node h l x r) &lt;-&gt;
  X.eq y (remove_min l x r)#<span class="mi">2</span> \/ InT y (remove_min l x r)#<span class="mi">1</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : tree) (<span class="nv">x</span> : X.t) (<span class="nv">r</span> : tree) (<span class="nv">y</span> : elt)
  (<span class="nv">h</span> : I.t),
InT y (Node h l x r) &lt;-&gt;
X.eq y (remove_min l x r)#<span class="mi">2</span> \/
InT y (remove_min l x r)#<span class="mi">1</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk2f" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk2f"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : tree) (<span class="nv">x</span> : X.t) (<span class="nv">r</span> : tree) (<span class="nv">y</span> : elt)
  (<span class="nv">h</span> : I.t),
InT y (Node h l x r) &lt;-&gt;
X.eq y (remove_min l x r)#<span class="mi">2</span> \/
InT y (remove_min l x r)#<span class="mi">1</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk30" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk30"><span class="highlight"><span class="nb">intros</span> l x r; <span class="nb">functional induction</span> (remove_min l x r); <span class="nb">simpl</span> <span class="kr">in</span> *; <span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y (Node h Leaf x r) &lt;-&gt; X.eq y x \/ InT y r</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk31" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min ll lx lr = (l&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">y0</span> : elt) (<span class="nv">h0</span> : I.t),
InT y0 (Node h0 ll lx lr) &lt;-&gt;
X.eq y0 (remove_min ll lx lr)#<span class="mi">2</span> \/ InT y0 (remove_min ll lx lr)#<span class="mi">1</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk31"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (Node h (Node _x ll lx lr) x r) &lt;-&gt;
X.eq y m \/ InT y (bal l&#39; x r)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk32" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk32"><span class="highlight">intuition_in.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min ll lx lr = (l&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">y0</span> : elt) (<span class="nv">h0</span> : I.t),
InT y0 (Node h0 ll lx lr) &lt;-&gt;
X.eq y0 (remove_min ll lx lr)#<span class="mi">2</span> \/ InT y0 (remove_min ll lx lr)#<span class="mi">1</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y (Node h (Node _x ll lx lr) x r) &lt;-&gt;
X.eq y m \/ InT y (bal l&#39; x r)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">rewrite</span> bal_spec, In_node_iff, IHp, e0; <span class="nb">simpl</span>; <span class="nb">intuition</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk33" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk33"><span class="highlight"><span class="kn">Instance</span> <span class="nf">remove_min_ok</span> <span class="nv">l</span> <span class="nv">x</span> <span class="nv">r</span> : <span class="kr">forall</span> <span class="nv">h</span> `(Ok (Node h l x r)),
 Ok (remove_min l x r)#<span class="mi">1</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">h</span> : I.t,
Ok (Node h l x r) -&gt; Ok (remove_min l x r)#<span class="mi">1</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk34" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk34"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">h</span> : I.t,
Ok (Node h l x r) -&gt; Ok (remove_min l x r)#<span class="mi">1</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk35" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk35"><span class="highlight"><span class="nb">functional induction</span> (remove_min l x r); <span class="nb">simpl</span>; <span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node h Leaf x r)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok r</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk36" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min ll lx lr = (l&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">h0</span> : I.t, Ok (Node h0 ll lx lr) -&gt; Ok (remove_min ll lx lr)#<span class="mi">1</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node h (Node _x ll lx lr) x r)</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk36"><hr></label><div class="goal-conclusion"><span class="highlight">Ok (bal l&#39; x r)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk37" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk37"><span class="highlight">inv; <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min ll lx lr = (l&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">h0</span> : I.t, Ok (Node h0 ll lx lr) -&gt; Ok (remove_min ll lx lr)#<span class="mi">1</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node h (Node _x ll lx lr) x r)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (bal l&#39; x r)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk38" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk38"><span class="highlight"><span class="nb">assert</span> (O : Ok (Node _x ll lx lr)) <span class="bp">by</span> (inv; <span class="nb">auto</span>).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min ll lx lr = (l&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">h0</span> : I.t, Ok (Node h0 ll lx lr) -&gt; Ok (remove_min ll lx lr)#<span class="mi">1</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node h (Node _x ll lx lr) x r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">O</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x ll lx lr)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (bal l&#39; x r)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk39" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk39"><span class="highlight"><span class="nb">assert</span> (L : lt_tree x (Node _x ll lx lr)) <span class="bp">by</span> (inv; <span class="nb">auto</span>).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min ll lx lr = (l&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">h0</span> : I.t, Ok (Node h0 ll lx lr) -&gt; Ok (remove_min ll lx lr)#<span class="mi">1</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node h (Node _x ll lx lr) x r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">O</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x ll lx lr)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">L</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x (Node _x ll lx lr)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (bal l&#39; x r)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk3a" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk3a"><span class="highlight"><span class="nb">specialize</span> IHp <span class="kr">with</span> (<span class="mi">1</span>:=O); <span class="nb">rewrite</span> e0 <span class="kr">in</span> IHp; <span class="nb">auto</span>; <span class="nb">simpl</span> <span class="kr">in</span> *.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min ll lx lr = (l&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node h (Node _x ll lx lr) x r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">O</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x ll lx lr)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">L</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x (Node _x ll lx lr)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (bal l&#39; x r)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk3b" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk3b"><span class="highlight"><span class="nb">apply</span> bal_ok; <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min ll lx lr = (l&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node h (Node _x ll lx lr) x r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">O</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x ll lx lr)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">L</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x (Node _x ll lx lr)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok r</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk3c" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min ll lx lr = (l&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node h (Node _x ll lx lr) x r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">O</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x ll lx lr)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">L</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x (Node _x ll lx lr)</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk3c"><hr></label><div class="goal-conclusion"><span class="highlight">lt_tree x l&#39;</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk3d" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min ll lx lr = (l&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node h (Node _x ll lx lr) x r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">O</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x ll lx lr)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">L</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x (Node _x ll lx lr)</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk3d"><hr></label><div class="goal-conclusion"><span class="highlight">gt_tree x r</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk3e" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk3e"><span class="highlight">inv; <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min ll lx lr = (l&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node h (Node _x ll lx lr) x r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">O</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x ll lx lr)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">L</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x (Node _x ll lx lr)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">lt_tree x l&#39;</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk3f" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min ll lx lr = (l&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node h (Node _x ll lx lr) x r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">O</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x ll lx lr)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">L</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x (Node _x ll lx lr)</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk3f"><hr></label><div class="goal-conclusion"><span class="highlight">gt_tree x r</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk40" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk40"><span class="highlight"><span class="nb">intro</span> y; <span class="nb">specialize</span> (L y).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min ll lx lr = (l&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node h (Node _x ll lx lr) x r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">O</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x ll lx lr)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">L</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">InT y (Node _x ll lx lr) -&gt; X.lt y x</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y l&#39; -&gt; X.lt y x</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk41" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min ll lx lr = (l&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node h (Node _x ll lx lr) x r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">O</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x ll lx lr)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">L</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x (Node _x ll lx lr)</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk41"><hr></label><div class="goal-conclusion"><span class="highlight">gt_tree x r</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk42" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk42"><span class="highlight"><span class="nb">rewrite</span> remove_min_spec, e0 <span class="kr">in</span> L; <span class="nb">simpl</span> <span class="kr">in</span> L; <span class="nb">intuition</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min ll lx lr = (l&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node h (Node _x ll lx lr) x r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">O</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x ll lx lr)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">L</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x (Node _x ll lx lr)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">gt_tree x r</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight">inv; <span class="nb">auto</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk43" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk43"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">remove_min_gt_tree</span> : <span class="kr">forall</span> <span class="nv">l</span> <span class="nv">x</span> <span class="nv">r</span> <span class="nv">h</span> `{Ok (Node h l x r)},
 gt_tree (remove_min l x r)#<span class="mi">2</span> (remove_min l x r)#<span class="mi">1</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : tree) (<span class="nv">x</span> : X.t) (<span class="nv">r</span> : tree) (<span class="nv">h</span> : I.t),
Ok (Node h l x r) -&gt;
gt_tree (remove_min l x r)#<span class="mi">2</span> (remove_min l x r)#<span class="mi">1</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk44" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk44"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">l</span> : tree) (<span class="nv">x</span> : X.t) (<span class="nv">r</span> : tree) (<span class="nv">h</span> : I.t),
Ok (Node h l x r) -&gt;
gt_tree (remove_min l x r)#<span class="mi">2</span> (remove_min l x r)#<span class="mi">1</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk45" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk45"><span class="highlight"><span class="nb">intros</span> l x r; <span class="nb">functional induction</span> (remove_min l x r); <span class="nb">simpl</span>; <span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node h Leaf x r)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">gt_tree x r</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk46" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min ll lx lr = (l&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">h0</span> : I.t,
Ok (Node h0 ll lx lr) -&gt;
gt_tree (remove_min ll lx lr)#<span class="mi">2</span> (remove_min ll lx lr)#<span class="mi">1</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node h (Node _x ll lx lr) x r)</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk46"><hr></label><div class="goal-conclusion"><span class="highlight">gt_tree m (bal l&#39; x r)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk47" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk47"><span class="highlight">inv; <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min ll lx lr = (l&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">h0</span> : I.t,
Ok (Node h0 ll lx lr) -&gt;
gt_tree (remove_min ll lx lr)#<span class="mi">2</span> (remove_min ll lx lr)#<span class="mi">1</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node h (Node _x ll lx lr) x r)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">gt_tree m (bal l&#39; x r)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk48" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk48"><span class="highlight"><span class="nb">assert</span> (O : Ok (Node _x ll lx lr)) <span class="bp">by</span> (inv; <span class="nb">auto</span>).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min ll lx lr = (l&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">h0</span> : I.t,
Ok (Node h0 ll lx lr) -&gt;
gt_tree (remove_min ll lx lr)#<span class="mi">2</span> (remove_min ll lx lr)#<span class="mi">1</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node h (Node _x ll lx lr) x r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">O</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x ll lx lr)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">gt_tree m (bal l&#39; x r)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk49" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk49"><span class="highlight"><span class="nb">assert</span> (L : lt_tree x (Node _x ll lx lr)) <span class="bp">by</span> (inv; <span class="nb">auto</span>).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min ll lx lr = (l&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">h0</span> : I.t,
Ok (Node h0 ll lx lr) -&gt;
gt_tree (remove_min ll lx lr)#<span class="mi">2</span> (remove_min ll lx lr)#<span class="mi">1</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node h (Node _x ll lx lr) x r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">O</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x ll lx lr)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">L</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x (Node _x ll lx lr)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">gt_tree m (bal l&#39; x r)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk4a" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk4a"><span class="highlight"><span class="nb">specialize</span> IHp <span class="kr">with</span> (<span class="mi">1</span>:=O); <span class="nb">rewrite</span> e0 <span class="kr">in</span> IHp; <span class="nb">simpl</span> <span class="kr">in</span> IHp.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">ll</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lx</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">lr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min ll lx lr = (l&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHp</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree m l&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node h (Node _x ll lx lr) x r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">O</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x ll lx lr)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">L</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x (Node _x ll lx lr)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">gt_tree m (bal l&#39; x r)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">intro</span> y; <span class="nb">rewrite</span> bal_spec; <span class="nb">intuition</span>;
  <span class="nb">specialize</span> (L m); <span class="nb">rewrite</span> remove_min_spec, e0 <span class="kr">in</span> L; <span class="nb">simpl</span> <span class="kr">in</span> L;
   [<span class="nb">setoid_replace</span> y <span class="kr">with</span> x|inv]; <span class="nb">eauto</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Local Hint</span> <span class="kn">Resolve</span> remove_min_gt_tree : core.</span></span></span></pre><div class="doc">
<a name="lab25"></a><h2 class="section">Merging two trees</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk4b" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk4b"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">merge_spec</span> : <span class="kr">forall</span> <span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">y</span>,
 InT y (merge s1 s2) &lt;-&gt; InT y s1 \/ InT y s2.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : tree) (<span class="nv">y</span> : elt),
InT y (merge s1 s2) &lt;-&gt; InT y s1 \/ InT y s2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk4c" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk4c"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : tree) (<span class="nv">y</span> : elt),
InT y (merge s1 s2) &lt;-&gt; InT y s1 \/ InT y s2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk4d" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk4d"><span class="highlight"><span class="nb">intros</span> s1 s2; <span class="nb">functional induction</span> (merge s1 s2); <span class="nb">intros</span>;
  <span class="kp">try</span> factornode s1.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y s2 &lt;-&gt; InT y Leaf \/ InT y s2</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk4e" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk4e"><hr></label><div class="goal-conclusion"><span class="highlight">InT y s1 &lt;-&gt; InT y s1 \/ InT y Leaf</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk4f" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk4f"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (bal s1 m s2&#39;) &lt;-&gt;
InT y s1 \/ InT y (Node _x3 l2 x2 r2)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk50" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk50"><span class="highlight">intuition_in.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y s1 &lt;-&gt; InT y s1 \/ InT y Leaf</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk51" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk51"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (bal s1 m s2&#39;) &lt;-&gt;
InT y s1 \/ InT y (Node _x3 l2 x2 r2)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk52" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk52"><span class="highlight">intuition_in.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y (bal s1 m s2&#39;) &lt;-&gt;
InT y s1 \/ InT y (Node _x3 l2 x2 r2)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">rewrite</span> bal_spec, remove_min_spec, e1; <span class="nb">simpl</span>; <span class="nb">intuition</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk53" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk53"><span class="highlight"><span class="kn">Instance</span> <span class="nf">merge_ok</span> <span class="nv">s1</span> <span class="nv">s2</span> : <span class="kr">forall</span> `(Ok s1, Ok s2)
 `(<span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt, InT y1 s1 -&gt; InT y2 s2 -&gt; X.lt y1 y2),
 Ok (merge s1 s2).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok s1 -&gt;
Ok s2 -&gt;
(<span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt,
 InT y1 s1 -&gt; InT y2 s2 -&gt; X.lt y1 y2) -&gt;
Ok (merge s1 s2)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk54" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk54"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok s1 -&gt;
Ok s2 -&gt;
(<span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt,
 InT y1 s1 -&gt; InT y2 s2 -&gt; X.lt y1 y2) -&gt;
Ok (merge s1 s2)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk55" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk55"><span class="highlight"><span class="nb">functional induction</span> (merge s1 s2); <span class="nb">intros</span>; <span class="nb">auto</span>;
  <span class="kp">try</span> factornode s1.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x3 l2 x2 r2)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt,
InT y1 s1 -&gt;
InT y2 (Node _x3 l2 x2 r2) -&gt; X.lt y1 y2</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (bal s1 m s2&#39;)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk56" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk56"><span class="highlight"><span class="nb">apply</span> bal_ok; <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x3 l2 x2 r2)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt,
InT y1 s1 -&gt;
InT y2 (Node _x3 l2 x2 r2) -&gt; X.lt y1 y2</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok s2&#39;</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk57" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x3 l2 x2 r2)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt,
InT y1 s1 -&gt;
InT y2 (Node _x3 l2 x2 r2) -&gt; X.lt y1 y2</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk57"><hr></label><div class="goal-conclusion"><span class="highlight">lt_tree m s1</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk58" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x3 l2 x2 r2)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt,
InT y1 s1 -&gt;
InT y2 (Node _x3 l2 x2 r2) -&gt; X.lt y1 y2</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk58"><hr></label><div class="goal-conclusion"><span class="highlight">gt_tree m s2&#39;</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk59" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk59"><span class="highlight"><span class="nb">change</span> s2&#39; <span class="kr">with</span> ((s2&#39;,m)#<span class="mi">1</span>); <span class="nb">rewrite</span> &lt;-e1; <span class="nb">eauto with</span> *.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x3 l2 x2 r2)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt,
InT y1 s1 -&gt;
InT y2 (Node _x3 l2 x2 r2) -&gt; X.lt y1 y2</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">lt_tree m s1</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk5a" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x3 l2 x2 r2)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt,
InT y1 s1 -&gt;
InT y2 (Node _x3 l2 x2 r2) -&gt; X.lt y1 y2</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk5a"><hr></label><div class="goal-conclusion"><span class="highlight">gt_tree m s2&#39;</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk5b" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk5b"><span class="highlight"><span class="nb">intros</span> y Hy.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x3 l2 x2 r2)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt,
InT y1 s1 -&gt;
InT y2 (Node _x3 l2 x2 r2) -&gt; X.lt y1 y2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hy</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">InT y s1</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">X.lt y m</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk5c" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x3 l2 x2 r2)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt,
InT y1 s1 -&gt;
InT y2 (Node _x3 l2 x2 r2) -&gt; X.lt y1 y2</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk5c"><hr></label><div class="goal-conclusion"><span class="highlight">gt_tree m s2&#39;</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk5d" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk5d"><span class="highlight"><span class="nb">apply</span> H1; <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x3 l2 x2 r2)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt,
InT y1 s1 -&gt;
InT y2 (Node _x3 l2 x2 r2) -&gt; X.lt y1 y2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hy</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">InT y s1</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT m (Node _x3 l2 x2 r2)</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk5e" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x3 l2 x2 r2)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt,
InT y1 s1 -&gt;
InT y2 (Node _x3 l2 x2 r2) -&gt; X.lt y1 y2</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk5e"><hr></label><div class="goal-conclusion"><span class="highlight">gt_tree m s2&#39;</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk5f" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk5f"><span class="highlight"><span class="nb">rewrite</span> remove_min_spec, e1; <span class="nb">simpl</span>; <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x3 l2 x2 r2)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt,
InT y1 s1 -&gt;
InT y2 (Node _x3 l2 x2 r2) -&gt; X.lt y1 y2</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">gt_tree m s2&#39;</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">change</span> (gt_tree (s2&#39;,m)#<span class="mi">2</span> (s2&#39;,m)#<span class="mi">1</span>); <span class="nb">rewrite</span> &lt;-e1; <span class="nb">eauto</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
<a name="lab26"></a><h2 class="section">Deletion</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk60" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk60"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">remove_spec</span> : <span class="kr">forall</span> <span class="nv">s</span> <span class="nv">x</span> <span class="nv">y</span> `{Ok s},
 (InT y (remove x s) &lt;-&gt; InT y s /\ ~ X.eq y x).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s</span> : tree) (<span class="nv">x</span> : X.t) (<span class="nv">y</span> : elt),
Ok s -&gt; InT y (remove x s) &lt;-&gt; InT y s /\ ~ X.eq y x</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk61" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk61"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s</span> : tree) (<span class="nv">x</span> : X.t) (<span class="nv">y</span> : elt),
Ok s -&gt; InT y (remove x s) &lt;-&gt; InT y s /\ ~ X.eq y x</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk62" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk62"><span class="highlight">induct s x.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok Leaf</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y Leaf &lt;-&gt; InT y Leaf /\ ~ X.eq y x</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk63" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (remove x0 l) &lt;-&gt; InT y0 l /\ ~ X.eq y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (remove x0 r) &lt;-&gt; InT y0 r /\ ~ X.eq y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk63"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (merge l r) &lt;-&gt;
InT y (Node i l x&#39; r) /\ ~ X.eq y x</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk64" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (remove x0 l) &lt;-&gt; InT y0 l /\ ~ X.eq y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (remove x0 r) &lt;-&gt; InT y0 r /\ ~ X.eq y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk64"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (bal (remove x l) x&#39; r) &lt;-&gt;
InT y (Node i l x&#39; r) /\ ~ X.eq y x</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk65" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (remove x0 l) &lt;-&gt; InT y0 l /\ ~ X.eq y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (remove x0 r) &lt;-&gt; InT y0 r /\ ~ X.eq y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk65"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (bal l x&#39; (remove x r)) &lt;-&gt;
InT y (Node i l x&#39; r) /\ ~ X.eq y x</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk66" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk66"><span class="highlight">intuition_in.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (remove x0 l) &lt;-&gt; InT y0 l /\ ~ X.eq y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (remove x0 r) &lt;-&gt; InT y0 r /\ ~ X.eq y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y (merge l r) &lt;-&gt;
InT y (Node i l x&#39; r) /\ ~ X.eq y x</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk67" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (remove x0 l) &lt;-&gt; InT y0 l /\ ~ X.eq y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (remove x0 r) &lt;-&gt; InT y0 r /\ ~ X.eq y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk67"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (bal (remove x l) x&#39; r) &lt;-&gt;
InT y (Node i l x&#39; r) /\ ~ X.eq y x</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk68" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (remove x0 l) &lt;-&gt; InT y0 l /\ ~ X.eq y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (remove x0 r) &lt;-&gt; InT y0 r /\ ~ X.eq y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk68"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (bal l x&#39; (remove x r)) &lt;-&gt;
InT y (Node i l x&#39; r) /\ ~ X.eq y x</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk69" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk69"><span class="highlight"><span class="nb">rewrite</span> merge_spec; <span class="nb">intuition</span>; [order|order|intuition_in].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (remove x0 l) &lt;-&gt; InT y0 l /\ (X.eq y0 x0 -&gt; <span class="kt">False</span>)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (remove x0 r) &lt;-&gt; InT y0 r /\ (X.eq y0 x0 -&gt; <span class="kt">False</span>)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq y x -&gt; <span class="kt">False</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq y x&#39;</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y l \/ InT y r</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk6a" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (remove x0 l) &lt;-&gt; InT y0 l /\ ~ X.eq y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (remove x0 r) &lt;-&gt; InT y0 r /\ ~ X.eq y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk6a"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (bal (remove x l) x&#39; r) &lt;-&gt;
InT y (Node i l x&#39; r) /\ ~ X.eq y x</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk6b" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (remove x0 l) &lt;-&gt; InT y0 l /\ ~ X.eq y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (remove x0 r) &lt;-&gt; InT y0 r /\ ~ X.eq y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk6b"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (bal l x&#39; (remove x r)) &lt;-&gt;
InT y (Node i l x&#39; r) /\ ~ X.eq y x</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk6c" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk6c"><span class="highlight"><span class="nb">elim</span> H2; <span class="nb">eauto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (remove x0 l) &lt;-&gt; InT y0 l /\ ~ X.eq y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (remove x0 r) &lt;-&gt; InT y0 r /\ ~ X.eq y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y (bal (remove x l) x&#39; r) &lt;-&gt;
InT y (Node i l x&#39; r) /\ ~ X.eq y x</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk6d" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (remove x0 l) &lt;-&gt; InT y0 l /\ ~ X.eq y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (remove x0 r) &lt;-&gt; InT y0 r /\ ~ X.eq y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk6d"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (bal l x&#39; (remove x r)) &lt;-&gt;
InT y (Node i l x&#39; r) /\ ~ X.eq y x</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk6e" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk6e"><span class="highlight"><span class="nb">rewrite</span> bal_spec, IHl; <span class="nb">clear</span> IHl IHr; <span class="nb">intuition</span>; [order|order|intuition_in].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (remove x0 l) &lt;-&gt; InT y0 l /\ ~ X.eq y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (remove x0 r) &lt;-&gt; InT y0 r /\ ~ X.eq y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y (bal l x&#39; (remove x r)) &lt;-&gt;
InT y (Node i l x&#39; r) /\ ~ X.eq y x</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">rewrite</span> bal_spec, IHr; <span class="nb">clear</span> IHl IHr; <span class="nb">intuition</span>; [order|order|intuition_in].</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk6f" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk6f"><span class="highlight"><span class="kn">Instance</span> <span class="nf">remove_ok</span> <span class="nv">s</span> <span class="nv">x</span> `(Ok s) : Ok (remove x s).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (remove x s)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk70" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk70"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (remove x s)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk71" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk71"><span class="highlight">induct s x.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok Leaf</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok Leaf</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk72" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l -&gt; Ok (remove x l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r -&gt; Ok (remove x r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk72"><hr></label><div class="goal-conclusion"><span class="highlight">Ok (merge l r)</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk73" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l -&gt; Ok (remove x l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r -&gt; Ok (remove x r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk73"><hr></label><div class="goal-conclusion"><span class="highlight">Ok (bal (remove x l) x&#39; r)</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk74" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l -&gt; Ok (remove x l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r -&gt; Ok (remove x r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk74"><hr></label><div class="goal-conclusion"><span class="highlight">Ok (bal l x&#39; (remove x r))</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk75" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk75"><span class="highlight"><span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l -&gt; Ok (remove x l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r -&gt; Ok (remove x r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (merge l r)</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk76" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l -&gt; Ok (remove x l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r -&gt; Ok (remove x r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk76"><hr></label><div class="goal-conclusion"><span class="highlight">Ok (bal (remove x l) x&#39; r)</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk77" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l -&gt; Ok (remove x l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r -&gt; Ok (remove x r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk77"><hr></label><div class="goal-conclusion"><span class="highlight">Ok (bal l x&#39; (remove x r))</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight"> <span class="c">(* EQ *)</span>
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk78" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk78"><span class="highlight"><span class="nb">apply</span> merge_ok; <span class="nb">eauto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l -&gt; Ok (remove x l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r -&gt; Ok (remove x r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (bal (remove x l) x&#39; r)</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk79" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l -&gt; Ok (remove x l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r -&gt; Ok (remove x r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk79"><hr></label><div class="goal-conclusion"><span class="highlight">Ok (bal l x&#39; (remove x r))</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight"> <span class="c">(* LT *)</span>
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk7a" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk7a"><span class="highlight"><span class="nb">apply</span> bal_ok; <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l -&gt; Ok (remove x l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r -&gt; Ok (remove x r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">lt_tree x&#39; (remove x l)</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk7b" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l -&gt; Ok (remove x l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r -&gt; Ok (remove x r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk7b"><hr></label><div class="goal-conclusion"><span class="highlight">Ok (bal l x&#39; (remove x r))</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk7c" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk7c"><span class="highlight"><span class="nb">intro</span> z; <span class="nb">rewrite</span> remove_spec; <span class="nb">auto</span>; <span class="nb">destruct</span> <span class="mi">1</span>; <span class="nb">eauto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l -&gt; Ok (remove x l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r -&gt; Ok (remove x r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (bal l x&#39; (remove x r))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight"> <span class="c">(* GT *)</span>
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk7d" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk7d"><span class="highlight"><span class="nb">apply</span> bal_ok; <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l -&gt; Ok (remove x l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r -&gt; Ok (remove x r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">gt_tree x&#39; (remove x r)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">intro</span> z; <span class="nb">rewrite</span> remove_spec; <span class="nb">auto</span>; <span class="nb">destruct</span> <span class="mi">1</span>; <span class="nb">eauto</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
<a name="lab27"></a><h2 class="section">Concatenation</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk7e" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk7e"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">concat_spec</span> : <span class="kr">forall</span> <span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">y</span>,
 InT y (concat s1 s2) &lt;-&gt; InT y s1 \/ InT y s2.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : tree) (<span class="nv">y</span> : elt),
InT y (concat s1 s2) &lt;-&gt; InT y s1 \/ InT y s2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk7f" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk7f"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : tree) (<span class="nv">y</span> : elt),
InT y (concat s1 s2) &lt;-&gt; InT y s1 \/ InT y s2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk80" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk80"><span class="highlight"><span class="nb">intros</span> s1 s2; <span class="nb">functional induction</span> (concat s1 s2); <span class="nb">intros</span>;
  <span class="kp">try</span> factornode s1.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y s2 &lt;-&gt; InT y Leaf \/ InT y s2</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk81" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk81"><hr></label><div class="goal-conclusion"><span class="highlight">InT y s1 &lt;-&gt; InT y s1 \/ InT y Leaf</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk82" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk82"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (join s1 m s2&#39;) &lt;-&gt;
InT y s1 \/ InT y (Node _x3 l2 x2 r2)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk83" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk83"><span class="highlight">intuition_in.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y s1 &lt;-&gt; InT y s1 \/ InT y Leaf</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk84" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk84"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (join s1 m s2&#39;) &lt;-&gt;
InT y s1 \/ InT y (Node _x3 l2 x2 r2)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk85" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk85"><span class="highlight">intuition_in.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y (join s1 m s2&#39;) &lt;-&gt;
InT y s1 \/ InT y (Node _x3 l2 x2 r2)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">rewrite</span> join_spec, remove_min_spec, e1; <span class="nb">simpl</span>; <span class="nb">intuition</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk86" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk86"><span class="highlight"><span class="kn">Instance</span> <span class="nf">concat_ok</span> <span class="nv">s1</span> <span class="nv">s2</span> : <span class="kr">forall</span> `(Ok s1, Ok s2)
 `(<span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt, InT y1 s1 -&gt; InT y2 s2 -&gt; X.lt y1 y2),
 Ok (concat s1 s2).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok s1 -&gt;
Ok s2 -&gt;
(<span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt,
 InT y1 s1 -&gt; InT y2 s2 -&gt; X.lt y1 y2) -&gt;
Ok (concat s1 s2)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk87" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk87"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok s1 -&gt;
Ok s2 -&gt;
(<span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt,
 InT y1 s1 -&gt; InT y2 s2 -&gt; X.lt y1 y2) -&gt;
Ok (concat s1 s2)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk88" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk88"><span class="highlight"><span class="nb">functional induction</span> (concat s1 s2); <span class="nb">intros</span>; <span class="nb">auto</span>;
  <span class="kp">try</span> factornode s1.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x3 l2 x2 r2)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt,
InT y1 s1 -&gt;
InT y2 (Node _x3 l2 x2 r2) -&gt; X.lt y1 y2</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (join s1 m s2&#39;)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk89" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk89"><span class="highlight"><span class="nb">apply</span> join_ok; <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x3 l2 x2 r2)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt,
InT y1 s1 -&gt;
InT y2 (Node _x3 l2 x2 r2) -&gt; X.lt y1 y2</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok s2&#39;</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk8a" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x3 l2 x2 r2)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt,
InT y1 s1 -&gt;
InT y2 (Node _x3 l2 x2 r2) -&gt; X.lt y1 y2</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk8a"><hr></label><div class="goal-conclusion"><span class="highlight">lt_tree m s1</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk8b" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x3 l2 x2 r2)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt,
InT y1 s1 -&gt;
InT y2 (Node _x3 l2 x2 r2) -&gt; X.lt y1 y2</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk8b"><hr></label><div class="goal-conclusion"><span class="highlight">gt_tree m s2&#39;</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk8c" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk8c"><span class="highlight"><span class="nb">change</span> (Ok (s2&#39;,m)#<span class="mi">1</span>); <span class="nb">rewrite</span> &lt;-e1; <span class="nb">eauto with</span> *.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x3 l2 x2 r2)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt,
InT y1 s1 -&gt;
InT y2 (Node _x3 l2 x2 r2) -&gt; X.lt y1 y2</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">lt_tree m s1</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk8d" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x3 l2 x2 r2)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt,
InT y1 s1 -&gt;
InT y2 (Node _x3 l2 x2 r2) -&gt; X.lt y1 y2</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk8d"><hr></label><div class="goal-conclusion"><span class="highlight">gt_tree m s2&#39;</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk8e" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk8e"><span class="highlight"><span class="nb">intros</span> y Hy.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x3 l2 x2 r2)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt,
InT y1 s1 -&gt;
InT y2 (Node _x3 l2 x2 r2) -&gt; X.lt y1 y2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hy</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">InT y s1</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">X.lt y m</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk8f" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x3 l2 x2 r2)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt,
InT y1 s1 -&gt;
InT y2 (Node _x3 l2 x2 r2) -&gt; X.lt y1 y2</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk8f"><hr></label><div class="goal-conclusion"><span class="highlight">gt_tree m s2&#39;</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk90" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk90"><span class="highlight"><span class="nb">apply</span> H1; <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x3 l2 x2 r2)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt,
InT y1 s1 -&gt;
InT y2 (Node _x3 l2 x2 r2) -&gt; X.lt y1 y2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hy</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">InT y s1</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT m (Node _x3 l2 x2 r2)</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk91" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x3 l2 x2 r2)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt,
InT y1 s1 -&gt;
InT y2 (Node _x3 l2 x2 r2) -&gt; X.lt y1 y2</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk91"><hr></label><div class="goal-conclusion"><span class="highlight">gt_tree m s2&#39;</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk92" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk92"><span class="highlight"><span class="nb">rewrite</span> remove_min_spec, e1; <span class="nb">simpl</span>; <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">remove_min l2 x2 r2 = (s2&#39;, m)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">s1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x3 l2 x2 r2)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y1</span> <span class="nv">y2</span> : elt,
InT y1 s1 -&gt;
InT y2 (Node _x3 l2 x2 r2) -&gt; X.lt y1 y2</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">gt_tree m s2&#39;</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">change</span> (gt_tree (s2&#39;,m)#<span class="mi">2</span> (s2&#39;,m)#<span class="mi">1</span>); <span class="nb">rewrite</span> &lt;-e1; <span class="nb">eauto</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
<a name="lab28"></a><h2 class="section">Splitting</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk93" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk93"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">split_spec1</span> : <span class="kr">forall</span> <span class="nv">s</span> <span class="nv">x</span> <span class="nv">y</span> `{Ok s},
 (InT y (<span class="nb">split</span> x s)#l &lt;-&gt; InT y s /\ X.lt y x).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s</span> : tree) (<span class="nv">x</span> : X.t) (<span class="nv">y</span> : elt),
Ok s -&gt; InT y (<span class="nb">split</span> x s)#l &lt;-&gt; InT y s /\ X.lt y x</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk94" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk94"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s</span> : tree) (<span class="nv">x</span> : X.t) (<span class="nv">y</span> : elt),
Ok s -&gt; InT y (<span class="nb">split</span> x s)#l &lt;-&gt; InT y s /\ X.lt y x</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk95" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk95"><span class="highlight">induct s x.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok Leaf</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y Leaf &lt;-&gt; InT y Leaf /\ X.lt y x</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk96" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (<span class="nb">split</span> x0 l)#l &lt;-&gt; InT y0 l /\ X.lt y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (<span class="nb">split</span> x0 r)#l &lt;-&gt; InT y0 r /\ X.lt y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk96"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (&lt;&lt; l, true, r &gt;&gt;)#l &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt y x</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk97" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (<span class="nb">split</span> x0 l)#l &lt;-&gt; InT y0 l /\ X.lt y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (<span class="nb">split</span> x0 r)#l &lt;-&gt; InT y0 r /\ X.lt y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk97"><hr></label><div class="goal-conclusion"><span class="highlight">InT y
  (<span class="kr">let</span> (<span class="nv">ll</span>, b, rl) := <span class="nb">split</span> x l <span class="kr">in</span>
   &lt;&lt; ll, b, join rl x&#39; r &gt;&gt;)#l &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt y x</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk98" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (<span class="nb">split</span> x0 l)#l &lt;-&gt; InT y0 l /\ X.lt y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (<span class="nb">split</span> x0 r)#l &lt;-&gt; InT y0 r /\ X.lt y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk98"><hr></label><div class="goal-conclusion"><span class="highlight">InT y
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#l &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt y x</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk99" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk99"><span class="highlight">intuition_in.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (<span class="nb">split</span> x0 l)#l &lt;-&gt; InT y0 l /\ X.lt y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (<span class="nb">split</span> x0 r)#l &lt;-&gt; InT y0 r /\ X.lt y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y (&lt;&lt; l, true, r &gt;&gt;)#l &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt y x</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk9a" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (<span class="nb">split</span> x0 l)#l &lt;-&gt; InT y0 l /\ X.lt y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (<span class="nb">split</span> x0 r)#l &lt;-&gt; InT y0 r /\ X.lt y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk9a"><hr></label><div class="goal-conclusion"><span class="highlight">InT y
  (<span class="kr">let</span> (<span class="nv">ll</span>, b, rl) := <span class="nb">split</span> x l <span class="kr">in</span>
   &lt;&lt; ll, b, join rl x&#39; r &gt;&gt;)#l &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt y x</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk9b" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (<span class="nb">split</span> x0 l)#l &lt;-&gt; InT y0 l /\ X.lt y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (<span class="nb">split</span> x0 r)#l &lt;-&gt; InT y0 r /\ X.lt y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk9b"><hr></label><div class="goal-conclusion"><span class="highlight">InT y
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#l &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt y x</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk9c" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk9c"><span class="highlight">intuition_in; order.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (<span class="nb">split</span> x0 l)#l &lt;-&gt; InT y0 l /\ X.lt y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (<span class="nb">split</span> x0 r)#l &lt;-&gt; InT y0 r /\ X.lt y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y
  (<span class="kr">let</span> (<span class="nv">ll</span>, b, rl) := <span class="nb">split</span> x l <span class="kr">in</span>
   &lt;&lt; ll, b, join rl x&#39; r &gt;&gt;)#l &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt y x</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk9d" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (<span class="nb">split</span> x0 l)#l &lt;-&gt; InT y0 l /\ X.lt y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (<span class="nb">split</span> x0 r)#l &lt;-&gt; InT y0 r /\ X.lt y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk9d"><hr></label><div class="goal-conclusion"><span class="highlight">InT y
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#l &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt y x</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk9e" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk9e"><span class="highlight"><span class="nb">specialize</span> (IHl x y).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l -&gt; InT y (<span class="nb">split</span> x l)#l &lt;-&gt; InT y l /\ X.lt y x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (<span class="nb">split</span> x0 r)#l &lt;-&gt; InT y0 r /\ X.lt y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y
  (<span class="kr">let</span> (<span class="nv">ll</span>, b, rl) := <span class="nb">split</span> x l <span class="kr">in</span>
   &lt;&lt; ll, b, join rl x&#39; r &gt;&gt;)#l &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt y x</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk9f" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (<span class="nb">split</span> x0 l)#l &lt;-&gt; InT y0 l /\ X.lt y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (<span class="nb">split</span> x0 r)#l &lt;-&gt; InT y0 r /\ X.lt y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk9f"><hr></label><div class="goal-conclusion"><span class="highlight">InT y
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#l &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt y x</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chka0" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chka0"><span class="highlight"><span class="nb">destruct</span> (<span class="nb">split</span> x l); <span class="nb">simpl</span> <span class="kr">in</span> *.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_left0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_in0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_right0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l -&gt; InT y t_left0 &lt;-&gt; InT y l /\ X.lt y x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt;
InT y0 (<span class="nb">split</span> x0 r)#l &lt;-&gt; InT y0 r /\ X.lt y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y t_left0 &lt;-&gt; InT y (Node i l x&#39; r) /\ X.lt y x</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chka1" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt;
InT y0 (<span class="nb">split</span> x0 l)#l &lt;-&gt; InT y0 l /\ X.lt y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt;
InT y0 (<span class="nb">split</span> x0 r)#l &lt;-&gt; InT y0 r /\ X.lt y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chka1"><hr></label><div class="goal-conclusion"><span class="highlight">InT y
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#l &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt y x</span></div></blockquote></div></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chka2" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chka2"><span class="highlight"><span class="nb">rewrite</span> IHl; intuition_in; order.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (<span class="nb">split</span> x0 l)#l &lt;-&gt; InT y0 l /\ X.lt y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (<span class="nb">split</span> x0 r)#l &lt;-&gt; InT y0 r /\ X.lt y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#l &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt y x</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chka3" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chka3"><span class="highlight"><span class="nb">specialize</span> (IHr x y).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (<span class="nb">split</span> x0 l)#l &lt;-&gt; InT y0 l /\ X.lt y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r -&gt; InT y (<span class="nb">split</span> x r)#l &lt;-&gt; InT y r /\ X.lt y x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#l &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt y x</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chka4" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chka4"><span class="highlight"><span class="nb">destruct</span> (<span class="nb">split</span> x r); <span class="nb">simpl</span> <span class="kr">in</span> *.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (<span class="nb">split</span> x0 l)#l &lt;-&gt; InT y0 l /\ X.lt y0 x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_left0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_in0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_right0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r -&gt; InT y t_left0 &lt;-&gt; InT y r /\ X.lt y x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y (join l x&#39; t_left0) &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt y x</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">rewrite</span> join_spec, IHr; intuition_in; order.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chka5" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chka5"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">split_spec2</span> : <span class="kr">forall</span> <span class="nv">s</span> <span class="nv">x</span> <span class="nv">y</span> `{Ok s},
 (InT y (<span class="nb">split</span> x s)#r &lt;-&gt; InT y s /\ X.lt x y).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s</span> : tree) (<span class="nv">x</span> : X.t) (<span class="nv">y</span> : elt),
Ok s -&gt; InT y (<span class="nb">split</span> x s)#r &lt;-&gt; InT y s /\ X.lt x y</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chka6" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chka6"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s</span> : tree) (<span class="nv">x</span> : X.t) (<span class="nv">y</span> : elt),
Ok s -&gt; InT y (<span class="nb">split</span> x s)#r &lt;-&gt; InT y s /\ X.lt x y</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chka7" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chka7"><span class="highlight">induct s x.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok Leaf</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y Leaf &lt;-&gt; InT y Leaf /\ X.lt x y</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chka8" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (<span class="nb">split</span> x0 l)#r &lt;-&gt; InT y0 l /\ X.lt x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (<span class="nb">split</span> x0 r)#r &lt;-&gt; InT y0 r /\ X.lt x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chka8"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (&lt;&lt; l, true, r &gt;&gt;)#r &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt x y</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chka9" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (<span class="nb">split</span> x0 l)#r &lt;-&gt; InT y0 l /\ X.lt x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (<span class="nb">split</span> x0 r)#r &lt;-&gt; InT y0 r /\ X.lt x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chka9"><hr></label><div class="goal-conclusion"><span class="highlight">InT y
  (<span class="kr">let</span> (<span class="nv">ll</span>, b, rl) := <span class="nb">split</span> x l <span class="kr">in</span>
   &lt;&lt; ll, b, join rl x&#39; r &gt;&gt;)#r &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt x y</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chkaa" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (<span class="nb">split</span> x0 l)#r &lt;-&gt; InT y0 l /\ X.lt x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (<span class="nb">split</span> x0 r)#r &lt;-&gt; InT y0 r /\ X.lt x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chkaa"><hr></label><div class="goal-conclusion"><span class="highlight">InT y
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#r &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt x y</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkab" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkab"><span class="highlight">intuition_in.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (<span class="nb">split</span> x0 l)#r &lt;-&gt; InT y0 l /\ X.lt x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (<span class="nb">split</span> x0 r)#r &lt;-&gt; InT y0 r /\ X.lt x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y (&lt;&lt; l, true, r &gt;&gt;)#r &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt x y</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chkac" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (<span class="nb">split</span> x0 l)#r &lt;-&gt; InT y0 l /\ X.lt x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (<span class="nb">split</span> x0 r)#r &lt;-&gt; InT y0 r /\ X.lt x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chkac"><hr></label><div class="goal-conclusion"><span class="highlight">InT y
  (<span class="kr">let</span> (<span class="nv">ll</span>, b, rl) := <span class="nb">split</span> x l <span class="kr">in</span>
   &lt;&lt; ll, b, join rl x&#39; r &gt;&gt;)#r &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt x y</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chkad" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (<span class="nb">split</span> x0 l)#r &lt;-&gt; InT y0 l /\ X.lt x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (<span class="nb">split</span> x0 r)#r &lt;-&gt; InT y0 r /\ X.lt x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chkad"><hr></label><div class="goal-conclusion"><span class="highlight">InT y
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#r &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt x y</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkae" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkae"><span class="highlight">intuition_in; order.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (<span class="nb">split</span> x0 l)#r &lt;-&gt; InT y0 l /\ X.lt x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (<span class="nb">split</span> x0 r)#r &lt;-&gt; InT y0 r /\ X.lt x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y
  (<span class="kr">let</span> (<span class="nv">ll</span>, b, rl) := <span class="nb">split</span> x l <span class="kr">in</span>
   &lt;&lt; ll, b, join rl x&#39; r &gt;&gt;)#r &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt x y</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chkaf" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (<span class="nb">split</span> x0 l)#r &lt;-&gt; InT y0 l /\ X.lt x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (<span class="nb">split</span> x0 r)#r &lt;-&gt; InT y0 r /\ X.lt x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chkaf"><hr></label><div class="goal-conclusion"><span class="highlight">InT y
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#r &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt x y</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkb0" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkb0"><span class="highlight"><span class="nb">specialize</span> (IHl x y).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l -&gt; InT y (<span class="nb">split</span> x l)#r &lt;-&gt; InT y l /\ X.lt x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (<span class="nb">split</span> x0 r)#r &lt;-&gt; InT y0 r /\ X.lt x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y
  (<span class="kr">let</span> (<span class="nv">ll</span>, b, rl) := <span class="nb">split</span> x l <span class="kr">in</span>
   &lt;&lt; ll, b, join rl x&#39; r &gt;&gt;)#r &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt x y</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chkb1" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (<span class="nb">split</span> x0 l)#r &lt;-&gt; InT y0 l /\ X.lt x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (<span class="nb">split</span> x0 r)#r &lt;-&gt; InT y0 r /\ X.lt x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chkb1"><hr></label><div class="goal-conclusion"><span class="highlight">InT y
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#r &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt x y</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkb2" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkb2"><span class="highlight"><span class="nb">destruct</span> (<span class="nb">split</span> x l); <span class="nb">simpl</span> <span class="kr">in</span> *.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_left0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_in0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_right0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l -&gt; InT y t_right0 &lt;-&gt; InT y l /\ X.lt x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt;
InT y0 (<span class="nb">split</span> x0 r)#r &lt;-&gt; InT y0 r /\ X.lt x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y (join t_right0 x&#39; r) &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt x y</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chkb3" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt;
InT y0 (<span class="nb">split</span> x0 l)#r &lt;-&gt; InT y0 l /\ X.lt x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt;
InT y0 (<span class="nb">split</span> x0 r)#r &lt;-&gt; InT y0 r /\ X.lt x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chkb3"><hr></label><div class="goal-conclusion"><span class="highlight">InT y
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#r &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt x y</span></div></blockquote></div></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkb4" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkb4"><span class="highlight"><span class="nb">rewrite</span> join_spec, IHl; intuition_in; order.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (<span class="nb">split</span> x0 l)#r &lt;-&gt; InT y0 l /\ X.lt x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok r -&gt; InT y0 (<span class="nb">split</span> x0 r)#r &lt;-&gt; InT y0 r /\ X.lt x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#r &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt x y</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkb5" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkb5"><span class="highlight"><span class="nb">specialize</span> (IHr x y).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (<span class="nb">split</span> x0 l)#r &lt;-&gt; InT y0 l /\ X.lt x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r -&gt; InT y (<span class="nb">split</span> x r)#r &lt;-&gt; InT y r /\ X.lt x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#r &lt;-&gt;
InT y (Node i l x&#39; r) /\ X.lt x y</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkb6" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkb6"><span class="highlight"><span class="nb">destruct</span> (<span class="nb">split</span> x r); <span class="nb">simpl</span> <span class="kr">in</span> *.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : X.t) (<span class="nv">y0</span> : elt),
Ok l -&gt; InT y0 (<span class="nb">split</span> x0 l)#r &lt;-&gt; InT y0 l /\ X.lt x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_left0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_in0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_right0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r -&gt; InT y t_right0 &lt;-&gt; InT y r /\ X.lt x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y t_right0 &lt;-&gt; InT y (Node i l x&#39; r) /\ X.lt x y</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">rewrite</span> IHr; intuition_in; order.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkb7" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkb7"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">split_spec3</span> : <span class="kr">forall</span> <span class="nv">s</span> <span class="nv">x</span> `{Ok s},
 ((<span class="nb">split</span> x s)#b = true &lt;-&gt; InT x s).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s</span> : tree) (<span class="nv">x</span> : X.t),
Ok s -&gt; (<span class="nb">split</span> x s)#b = true &lt;-&gt; InT x s</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkb8" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkb8"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s</span> : tree) (<span class="nv">x</span> : X.t),
Ok s -&gt; (<span class="nb">split</span> x s)#b = true &lt;-&gt; InT x s</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkb9" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkb9"><span class="highlight">induct s x.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok Leaf</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">false = true &lt;-&gt; InT x Leaf</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chkba" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok l -&gt; (<span class="nb">split</span> x0 l)#b = true &lt;-&gt; InT x0 l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok r -&gt; (<span class="nb">split</span> x0 r)#b = true &lt;-&gt; InT x0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chkba"><hr></label><div class="goal-conclusion"><span class="highlight">(&lt;&lt; l, true, r &gt;&gt;)#b = true &lt;-&gt; InT x (Node i l x&#39; r)</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chkbb" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok l -&gt; (<span class="nb">split</span> x0 l)#b = true &lt;-&gt; InT x0 l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok r -&gt; (<span class="nb">split</span> x0 r)#b = true &lt;-&gt; InT x0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chkbb"><hr></label><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">ll</span>, b, rl) := <span class="nb">split</span> x l <span class="kr">in</span>
 &lt;&lt; ll, b, join rl x&#39; r &gt;&gt;)#b = true &lt;-&gt;
InT x (Node i l x&#39; r)</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chkbc" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok l -&gt; (<span class="nb">split</span> x0 l)#b = true &lt;-&gt; InT x0 l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok r -&gt; (<span class="nb">split</span> x0 r)#b = true &lt;-&gt; InT x0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chkbc"><hr></label><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
 &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#b = true &lt;-&gt;
InT x (Node i l x&#39; r)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkbd" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkbd"><span class="highlight">intuition_in; <span class="kp">try</span> <span class="bp">discriminate</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok l -&gt; (<span class="nb">split</span> x0 l)#b = true &lt;-&gt; InT x0 l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok r -&gt; (<span class="nb">split</span> x0 r)#b = true &lt;-&gt; InT x0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(&lt;&lt; l, true, r &gt;&gt;)#b = true &lt;-&gt; InT x (Node i l x&#39; r)</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chkbe" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok l -&gt; (<span class="nb">split</span> x0 l)#b = true &lt;-&gt; InT x0 l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok r -&gt; (<span class="nb">split</span> x0 r)#b = true &lt;-&gt; InT x0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chkbe"><hr></label><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">ll</span>, b, rl) := <span class="nb">split</span> x l <span class="kr">in</span>
 &lt;&lt; ll, b, join rl x&#39; r &gt;&gt;)#b = true &lt;-&gt;
InT x (Node i l x&#39; r)</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chkbf" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok l -&gt; (<span class="nb">split</span> x0 l)#b = true &lt;-&gt; InT x0 l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok r -&gt; (<span class="nb">split</span> x0 r)#b = true &lt;-&gt; InT x0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chkbf"><hr></label><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
 &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#b = true &lt;-&gt;
InT x (Node i l x&#39; r)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkc0" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkc0"><span class="highlight"><span class="nb">intuition</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok l -&gt; (<span class="nb">split</span> x0 l)#b = true &lt;-&gt; InT x0 l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok r -&gt; (<span class="nb">split</span> x0 r)#b = true &lt;-&gt; InT x0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">ll</span>, b, rl) := <span class="nb">split</span> x l <span class="kr">in</span>
 &lt;&lt; ll, b, join rl x&#39; r &gt;&gt;)#b = true &lt;-&gt;
InT x (Node i l x&#39; r)</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chkc1" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok l -&gt; (<span class="nb">split</span> x0 l)#b = true &lt;-&gt; InT x0 l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok r -&gt; (<span class="nb">split</span> x0 r)#b = true &lt;-&gt; InT x0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chkc1"><hr></label><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
 &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#b = true &lt;-&gt;
InT x (Node i l x&#39; r)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkc2" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkc2"><span class="highlight"><span class="nb">specialize</span> (IHl x).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l -&gt; (<span class="nb">split</span> x l)#b = true &lt;-&gt; InT x l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok r -&gt; (<span class="nb">split</span> x0 r)#b = true &lt;-&gt; InT x0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">ll</span>, b, rl) := <span class="nb">split</span> x l <span class="kr">in</span>
 &lt;&lt; ll, b, join rl x&#39; r &gt;&gt;)#b = true &lt;-&gt;
InT x (Node i l x&#39; r)</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chkc3" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok l -&gt; (<span class="nb">split</span> x0 l)#b = true &lt;-&gt; InT x0 l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok r -&gt; (<span class="nb">split</span> x0 r)#b = true &lt;-&gt; InT x0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chkc3"><hr></label><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
 &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#b = true &lt;-&gt;
InT x (Node i l x&#39; r)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkc4" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkc4"><span class="highlight"><span class="nb">destruct</span> (<span class="nb">split</span> x l); <span class="nb">simpl</span> <span class="kr">in</span> *.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_left0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_in0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_right0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l -&gt; t_in0 = true &lt;-&gt; InT x l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t,
Ok r -&gt; (<span class="nb">split</span> x0 r)#b = true &lt;-&gt; InT x0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">t_in0 = true &lt;-&gt; InT x (Node i l x&#39; r)</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chkc5" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t,
Ok l -&gt; (<span class="nb">split</span> x0 l)#b = true &lt;-&gt; InT x0 l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t,
Ok r -&gt; (<span class="nb">split</span> x0 r)#b = true &lt;-&gt; InT x0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chkc5"><hr></label><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
 &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#b = true &lt;-&gt;
InT x (Node i l x&#39; r)</span></div></blockquote></div></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkc6" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkc6"><span class="highlight"><span class="nb">rewrite</span> IHl; intuition_in; order.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok l -&gt; (<span class="nb">split</span> x0 l)#b = true &lt;-&gt; InT x0 l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok r -&gt; (<span class="nb">split</span> x0 r)#b = true &lt;-&gt; InT x0 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
 &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#b = true &lt;-&gt;
InT x (Node i l x&#39; r)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkc7" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkc7"><span class="highlight"><span class="nb">specialize</span> (IHr x).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok l -&gt; (<span class="nb">split</span> x0 l)#b = true &lt;-&gt; InT x0 l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r -&gt; (<span class="nb">split</span> x r)#b = true &lt;-&gt; InT x r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
 &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#b = true &lt;-&gt;
InT x (Node i l x&#39; r)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkc8" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkc8"><span class="highlight"><span class="nb">destruct</span> (<span class="nb">split</span> x r); <span class="nb">simpl</span> <span class="kr">in</span> *.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok l -&gt; (<span class="nb">split</span> x0 l)#b = true &lt;-&gt; InT x0 l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_left0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_in0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_right0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r -&gt; t_in0 = true &lt;-&gt; InT x r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">t_in0 = true &lt;-&gt; InT x (Node i l x&#39; r)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">rewrite</span> IHr; intuition_in; order.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkc9" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkc9"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">split_ok</span> : <span class="kr">forall</span> <span class="nv">s</span> <span class="nv">x</span> `{Ok s}, Ok (<span class="nb">split</span> x s)#l /\ Ok (<span class="nb">split</span> x s)#r.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s</span> : tree) (<span class="nv">x</span> : X.t),
Ok s -&gt; Ok (<span class="nb">split</span> x s)#l /\ Ok (<span class="nb">split</span> x s)#r</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkca" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkca"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s</span> : tree) (<span class="nv">x</span> : X.t),
Ok s -&gt; Ok (<span class="nb">split</span> x s)#l /\ Ok (<span class="nb">split</span> x s)#r</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkcb" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkcb"><span class="highlight">induct s x; <span class="nb">simpl</span>; <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok l -&gt; Ok (<span class="nb">split</span> x0 l)#l /\ Ok (<span class="nb">split</span> x0 l)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok r -&gt; Ok (<span class="nb">split</span> x0 r)#l /\ Ok (<span class="nb">split</span> x0 r)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok
  (<span class="kr">let</span> (<span class="nv">ll</span>, b, rl) := <span class="nb">split</span> x l <span class="kr">in</span>
   &lt;&lt; ll, b, join rl x&#39; r &gt;&gt;)#l /\
Ok
  (<span class="kr">let</span> (<span class="nv">ll</span>, b, rl) := <span class="nb">split</span> x l <span class="kr">in</span>
   &lt;&lt; ll, b, join rl x&#39; r &gt;&gt;)#r</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chkcc" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok l -&gt; Ok (<span class="nb">split</span> x0 l)#l /\ Ok (<span class="nb">split</span> x0 l)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok r -&gt; Ok (<span class="nb">split</span> x0 r)#l /\ Ok (<span class="nb">split</span> x0 r)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chkcc"><hr></label><div class="goal-conclusion"><span class="highlight">Ok
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#l /\
Ok
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#r</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkcd" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkcd"><span class="highlight"><span class="nb">specialize</span> (IHl x).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l -&gt; Ok (<span class="nb">split</span> x l)#l /\ Ok (<span class="nb">split</span> x l)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok r -&gt; Ok (<span class="nb">split</span> x0 r)#l /\ Ok (<span class="nb">split</span> x0 r)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok
  (<span class="kr">let</span> (<span class="nv">ll</span>, b, rl) := <span class="nb">split</span> x l <span class="kr">in</span>
   &lt;&lt; ll, b, join rl x&#39; r &gt;&gt;)#l /\
Ok
  (<span class="kr">let</span> (<span class="nv">ll</span>, b, rl) := <span class="nb">split</span> x l <span class="kr">in</span>
   &lt;&lt; ll, b, join rl x&#39; r &gt;&gt;)#r</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chkce" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok l -&gt; Ok (<span class="nb">split</span> x0 l)#l /\ Ok (<span class="nb">split</span> x0 l)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok r -&gt; Ok (<span class="nb">split</span> x0 r)#l /\ Ok (<span class="nb">split</span> x0 r)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chkce"><hr></label><div class="goal-conclusion"><span class="highlight">Ok
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#l /\
Ok
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#r</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkcf" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkcf"><span class="highlight"><span class="nb">generalize</span> (<span class="kr">fun</span> <span class="nv">y</span> =&gt; @split_spec2 l x y _).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l -&gt; Ok (<span class="nb">split</span> x l)#l /\ Ok (<span class="nb">split</span> x l)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok r -&gt; Ok (<span class="nb">split</span> x0 r)#l /\ Ok (<span class="nb">split</span> x0 r)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">forall</span> <span class="nv">y</span> : elt,
 InT y (<span class="nb">split</span> x l)#r &lt;-&gt; InT y l /\ X.lt x y) -&gt;
Ok
  (<span class="kr">let</span> (<span class="nv">ll</span>, b, rl) := <span class="nb">split</span> x l <span class="kr">in</span>
   &lt;&lt; ll, b, join rl x&#39; r &gt;&gt;)#l /\
Ok
  (<span class="kr">let</span> (<span class="nv">ll</span>, b, rl) := <span class="nb">split</span> x l <span class="kr">in</span>
   &lt;&lt; ll, b, join rl x&#39; r &gt;&gt;)#r</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chkd0" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok l -&gt; Ok (<span class="nb">split</span> x0 l)#l /\ Ok (<span class="nb">split</span> x0 l)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok r -&gt; Ok (<span class="nb">split</span> x0 r)#l /\ Ok (<span class="nb">split</span> x0 r)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chkd0"><hr></label><div class="goal-conclusion"><span class="highlight">Ok
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#l /\
Ok
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#r</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkd1" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkd1"><span class="highlight"><span class="nb">destruct</span> (<span class="nb">split</span> x l); <span class="nb">simpl</span> <span class="kr">in</span> *; <span class="nb">intuition</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_left0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_in0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_right0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t,
Ok r -&gt; Ok (<span class="nb">split</span> x0 r)#l /\ Ok (<span class="nb">split</span> x0 r)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : elt,
InT y t_right0 &lt;-&gt; InT y l /\ X.lt x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok t_left0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok t_right0</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (join t_right0 x&#39; r)</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chkd2" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t,
Ok l -&gt; Ok (<span class="nb">split</span> x0 l)#l /\ Ok (<span class="nb">split</span> x0 l)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t,
Ok r -&gt; Ok (<span class="nb">split</span> x0 r)#l /\ Ok (<span class="nb">split</span> x0 r)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chkd2"><hr></label><div class="goal-conclusion"><span class="highlight">Ok
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#l /\
Ok
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#r</span></div></blockquote></div></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkd3" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkd3"><span class="highlight"><span class="nb">apply</span> join_ok; <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_left0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_in0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_right0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t,
Ok r -&gt; Ok (<span class="nb">split</span> x0 r)#l /\ Ok (<span class="nb">split</span> x0 r)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x x&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : elt,
InT y t_right0 &lt;-&gt; InT y l /\ X.lt x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok t_left0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok t_right0</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">lt_tree x&#39; t_right0</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chkd4" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t,
Ok l -&gt; Ok (<span class="nb">split</span> x0 l)#l /\ Ok (<span class="nb">split</span> x0 l)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t,
Ok r -&gt; Ok (<span class="nb">split</span> x0 r)#l /\ Ok (<span class="nb">split</span> x0 r)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chkd4"><hr></label><div class="goal-conclusion"><span class="highlight">Ok
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#l /\
Ok
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#r</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkd5" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkd5"><span class="highlight"><span class="nb">intros</span> y; <span class="nb">rewrite</span> H; <span class="nb">intuition</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok l -&gt; Ok (<span class="nb">split</span> x0 l)#l /\ Ok (<span class="nb">split</span> x0 l)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok r -&gt; Ok (<span class="nb">split</span> x0 r)#l /\ Ok (<span class="nb">split</span> x0 r)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#l /\
Ok
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#r</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkd6" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkd6"><span class="highlight"><span class="nb">specialize</span> (IHr x).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok l -&gt; Ok (<span class="nb">split</span> x0 l)#l /\ Ok (<span class="nb">split</span> x0 l)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r -&gt; Ok (<span class="nb">split</span> x r)#l /\ Ok (<span class="nb">split</span> x r)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#l /\
Ok
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#r</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkd7" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkd7"><span class="highlight"><span class="nb">generalize</span> (<span class="kr">fun</span> <span class="nv">y</span> =&gt; @split_spec1 r x y _).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok l -&gt; Ok (<span class="nb">split</span> x0 l)#l /\ Ok (<span class="nb">split</span> x0 l)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r -&gt; Ok (<span class="nb">split</span> x r)#l /\ Ok (<span class="nb">split</span> x r)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">forall</span> <span class="nv">y</span> : elt,
 InT y (<span class="nb">split</span> x r)#l &lt;-&gt; InT y r /\ X.lt y x) -&gt;
Ok
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#l /\
Ok
  (<span class="kr">let</span> (<span class="nv">rl</span>, b, rr) := <span class="nb">split</span> x r <span class="kr">in</span>
   &lt;&lt; join l x&#39; rl, b, rr &gt;&gt;)#r</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkd8" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkd8"><span class="highlight"><span class="nb">destruct</span> (<span class="nb">split</span> x r); <span class="nb">simpl</span> <span class="kr">in</span> *; <span class="nb">intuition</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok l -&gt; Ok (<span class="nb">split</span> x0 l)#l /\ Ok (<span class="nb">split</span> x0 l)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_left0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_in0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_right0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : elt,
InT y t_left0 &lt;-&gt; InT y r /\ X.lt y x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok t_left0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok t_right0</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (join l x&#39; t_left0)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkd9" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkd9"><span class="highlight"><span class="nb">apply</span> join_ok; <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : X.t, Ok l -&gt; Ok (<span class="nb">split</span> x0 l)#l /\ Ok (<span class="nb">split</span> x0 l)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_left0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_in0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">t_right0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.lt x&#39; x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x&#39; l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H8</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x&#39; r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : elt,
InT y t_left0 &lt;-&gt; InT y r /\ X.lt y x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok t_left0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok t_right0</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">gt_tree x&#39; t_left0</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">intros</span> y; <span class="nb">rewrite</span> H; <span class="nb">intuition</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkda" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkda"><span class="highlight"><span class="kn">Instance</span> <span class="nf">split_ok1</span> <span class="nv">s</span> <span class="nv">x</span> `(Ok s) : Ok (<span class="nb">split</span> x s)#l.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (<span class="nb">split</span> x s)#l</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkdb" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkdb"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (<span class="nb">split</span> x s)#l</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">intros</span>; <span class="nb">destruct</span> (@split_ok s x); <span class="nb">auto</span>.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkdc" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkdc"><span class="highlight"><span class="kn">Instance</span> <span class="nf">split_ok2</span> <span class="nv">s</span> <span class="nv">x</span> `(Ok s) : Ok (<span class="nb">split</span> x s)#r.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (<span class="nb">split</span> x s)#r</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkdd" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkdd"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (<span class="nb">split</span> x s)#r</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">intros</span>; <span class="nb">destruct</span> (@split_ok s x); <span class="nb">auto</span>.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
<a name="lab29"></a><h2 class="section">Intersection</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Ltac</span> <span class="nf">destruct_split</span> := <span class="kr">match goal with</span>
 | H : <span class="nb">split</span> ?x ?s = &lt;&lt; ?u, ?v, ?w &gt;&gt; |- _ =&gt;
   <span class="nb">assert</span> ((<span class="nb">split</span> x s)#l = u) <span class="bp">by</span> (<span class="nb">rewrite</span> H; <span class="nb">auto</span>);
   <span class="nb">assert</span> ((<span class="nb">split</span> x s)#b = v) <span class="bp">by</span> (<span class="nb">rewrite</span> H; <span class="nb">auto</span>);
   <span class="nb">assert</span> ((<span class="nb">split</span> x s)#r = w) <span class="bp">by</span> (<span class="nb">rewrite</span> H; <span class="nb">auto</span>);
   <span class="nb">clear</span> H; <span class="nb">subst</span> u w
 <span class="kr">end</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkde" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkde"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">inter_spec_ok</span> : <span class="kr">forall</span> <span class="nv">s1</span> <span class="nv">s2</span> `{Ok s1, Ok s2},
 Ok (inter s1 s2) /\ (<span class="kr">forall</span> <span class="nv">y</span>, InT y (inter s1 s2) &lt;-&gt; InT y s1 /\ InT y s2).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">s1</span> <span class="nv">s2</span> : tree,
Ok s1 -&gt;
Ok s2 -&gt;
Ok (inter s1 s2) /\
(<span class="kr">forall</span> <span class="nv">y</span> : elt,
 InT y (inter s1 s2) &lt;-&gt; InT y s1 /\ InT y s2)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkdf" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkdf"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">s1</span> <span class="nv">s2</span> : tree,
Ok s1 -&gt;
Ok s2 -&gt;
Ok (inter s1 s2) /\
(<span class="kr">forall</span> <span class="nv">y</span> : elt,
 InT y (inter s1 s2) &lt;-&gt; InT y s1 /\ InT y s2)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chke0" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chke0"><span class="highlight"><span class="nb">intros</span> s1 s2; <span class="nb">functional induction</span> inter s1 s2; <span class="nb">intros</span> B1 B2;
 [intuition_in|intuition_in | | ]; factornode s2;
 destruct_split; inv;
 <span class="nb">destruct</span> IHt0 <span class="kr">as</span> (IHo1,IHi1), IHt1 <span class="kr">as</span> (IHo2,IHi2); <span class="nb">auto with</span> *;
 <span class="nb">split</span>; <span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : elt,
InT y (inter l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y l1 /\ InT y (<span class="nb">split</span> x1 s2)#l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : elt,
InT y (inter r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y r1 /\ InT y (<span class="nb">split</span> x1 s2)#r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok
  (join (inter l1 (<span class="nb">split</span> x1 s2)#l) x1
     (inter r1 (<span class="nb">split</span> x1 s2)#r))</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chke1" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (inter l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 /\ InT y0 (<span class="nb">split</span> x1 s2)#l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (inter r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 /\ InT y0 (<span class="nb">split</span> x1 s2)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chke1"><hr></label><div class="goal-conclusion"><span class="highlight">InT y
  (join (inter l1 (<span class="nb">split</span> x1 s2)#l) x1
     (inter r1 (<span class="nb">split</span> x1 s2)#r)) &lt;-&gt;
InT y (Node _x l1 x1 r1) /\ InT y s2</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chke2" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : elt,
InT y (inter l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y l1 /\ InT y (<span class="nb">split</span> x1 s2)#l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : elt,
InT y (inter r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y r1 /\ InT y (<span class="nb">split</span> x1 s2)#r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chke2"><hr></label><div class="goal-conclusion"><span class="highlight">Ok
  (concat (inter l1 (<span class="nb">split</span> x1 s2)#l)
     (inter r1 (<span class="nb">split</span> x1 s2)#r))</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chke3" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (inter l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 /\ InT y0 (<span class="nb">split</span> x1 s2)#l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (inter r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 /\ InT y0 (<span class="nb">split</span> x1 s2)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chke3"><hr></label><div class="goal-conclusion"><span class="highlight">InT y
  (concat (inter l1 (<span class="nb">split</span> x1 s2)#l)
     (inter r1 (<span class="nb">split</span> x1 s2)#r)) &lt;-&gt;
InT y (Node _x l1 x1 r1) /\ InT y s2</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chke4" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chke4"><span class="highlight">- <span class="c">(* Ok join *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : elt,
InT y (inter l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y l1 /\ InT y (<span class="nb">split</span> x1 s2)#l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : elt,
InT y (inter r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y r1 /\ InT y (<span class="nb">split</span> x1 s2)#r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok
  (join (inter l1 (<span class="nb">split</span> x1 s2)#l) x1
     (inter r1 (<span class="nb">split</span> x1 s2)#r))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> join_ok; <span class="nb">auto with</span> *; <span class="nb">intro</span> y; <span class="nb">rewrite</span> ?IHi1, ?IHi2; <span class="nb">intuition</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chke5" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chke5"><span class="highlight">- <span class="c">(* InT join *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (inter l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 /\ InT y0 (<span class="nb">split</span> x1 s2)#l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (inter r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 /\ InT y0 (<span class="nb">split</span> x1 s2)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y
  (join (inter l1 (<span class="nb">split</span> x1 s2)#l) x1
     (inter r1 (<span class="nb">split</span> x1 s2)#r)) &lt;-&gt;
InT y (Node _x l1 x1 r1) /\ InT y s2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chke6" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chke6"><span class="highlight"><span class="nb">rewrite</span> join_spec, IHi1, IHi2, split_spec1, split_spec2; intuition_in.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (inter l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 /\ InT y0 (<span class="nb">split</span> x1 s2)#l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (inter r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 /\ InT y0 (<span class="nb">split</span> x1 s2)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq y x1</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y s2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chke7" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chke7"><span class="highlight"><span class="nb">setoid_replace</span> y <span class="kr">with</span> x1; <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (inter l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 /\ InT y0 (<span class="nb">split</span> x1 s2)#l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (inter r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 /\ InT y0 (<span class="nb">split</span> x1 s2)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq y x1</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT x1 s2</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">rewrite</span> &lt;- split_spec3; <span class="nb">auto</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chke8" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chke8"><span class="highlight">- <span class="c">(* Ok concat *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : elt,
InT y (inter l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y l1 /\ InT y (<span class="nb">split</span> x1 s2)#l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : elt,
InT y (inter r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y r1 /\ InT y (<span class="nb">split</span> x1 s2)#r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok
  (concat (inter l1 (<span class="nb">split</span> x1 s2)#l)
     (inter r1 (<span class="nb">split</span> x1 s2)#r))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> concat_ok; <span class="nb">auto with</span> *; <span class="nb">intros</span> y1 y2; <span class="nb">rewrite</span> IHi1, IHi2;
   <span class="nb">intuition</span>; order.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chke9" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chke9"><span class="highlight">- <span class="c">(* InT concat *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (inter l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 /\ InT y0 (<span class="nb">split</span> x1 s2)#l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (inter r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 /\ InT y0 (<span class="nb">split</span> x1 s2)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y
  (concat (inter l1 (<span class="nb">split</span> x1 s2)#l)
     (inter r1 (<span class="nb">split</span> x1 s2)#r)) &lt;-&gt;
InT y (Node _x l1 x1 r1) /\ InT y s2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkea" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkea"><span class="highlight"><span class="nb">rewrite</span> concat_spec, IHi1, IHi2, split_spec1, split_spec2; <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (inter l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 /\ InT y0 (<span class="nb">split</span> x1 s2)#l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (inter r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 /\ InT y0 (<span class="nb">split</span> x1 s2)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y l1 /\ InT y s2 /\ X.lt y x1 \/
InT y r1 /\ InT y s2 /\ X.lt x1 y &lt;-&gt;
InT y (Node _x l1 x1 r1) /\ InT y s2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkeb" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkeb"><span class="highlight">intuition_in.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (inter l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 /\ InT y0 (<span class="nb">split</span> x1 s2)#l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (inter r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 /\ InT y0 (<span class="nb">split</span> x1 s2)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">InT y s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq y x1</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y l1 /\ InT y s2 /\ X.lt y x1 \/
InT y r1 /\ InT y s2 /\ X.lt x1 y</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkec" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkec"><span class="highlight"><span class="nb">absurd</span> (InT x1 s2).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (inter l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 /\ InT y0 (<span class="nb">split</span> x1 s2)#l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (inter r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 /\ InT y0 (<span class="nb">split</span> x1 s2)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">InT y s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq y x1</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~ InT x1 s2</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chked" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (inter l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 /\ InT y0 (<span class="nb">split</span> x1 s2)#l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (inter r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 /\ InT y0 (<span class="nb">split</span> x1 s2)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">InT y s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq y x1</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chked"><hr></label><div class="goal-conclusion"><span class="highlight">InT x1 s2</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkee" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkee"><span class="highlight"><span class="nb">rewrite</span> &lt;- split_spec3; <span class="nb">auto</span>; <span class="bp">congruence</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (inter l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 /\ InT y0 (<span class="nb">split</span> x1 s2)#l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHo2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (inter r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (inter r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 /\ InT y0 (<span class="nb">split</span> x1 s2)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">InT y s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq y x1</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT x1 s2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">setoid_replace</span> x1 <span class="kr">with</span> y; <span class="nb">auto</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkef" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkef"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">inter_spec</span> : <span class="kr">forall</span> <span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">y</span> `{Ok s1, Ok s2},
 (InT y (inter s1 s2) &lt;-&gt; InT y s1 /\ InT y s2).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : tree) (<span class="nv">y</span> : elt),
Ok s1 -&gt;
Ok s2 -&gt; InT y (inter s1 s2) &lt;-&gt; InT y s1 /\ InT y s2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkf0" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkf0"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : tree) (<span class="nv">y</span> : elt),
Ok s1 -&gt;
Ok s2 -&gt; InT y (inter s1 s2) &lt;-&gt; InT y s1 /\ InT y s2</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">intros</span>; <span class="nb">destruct</span> (@inter_spec_ok s1 s2); <span class="nb">auto</span>.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkf1" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkf1"><span class="highlight"><span class="kn">Instance</span> <span class="nf">inter_ok</span> <span class="nv">s1</span> <span class="nv">s2</span> `(Ok s1, Ok s2) : Ok (inter s1 s2).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (inter s1 s2)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkf2" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkf2"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (inter s1 s2)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">intros</span>; <span class="nb">destruct</span> (@inter_spec_ok s1 s2); <span class="nb">auto</span>.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
<a name="lab30"></a><h2 class="section">Difference</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkf3" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkf3"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">diff_spec_ok</span> : <span class="kr">forall</span> <span class="nv">s1</span> <span class="nv">s2</span> `{Ok s1, Ok s2},
 Ok (diff s1 s2) /\ (<span class="kr">forall</span> <span class="nv">y</span>, InT y (diff s1 s2) &lt;-&gt; InT y s1 /\ ~InT y s2).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">s1</span> <span class="nv">s2</span> : tree,
Ok s1 -&gt;
Ok s2 -&gt;
Ok (diff s1 s2) /\
(<span class="kr">forall</span> <span class="nv">y</span> : elt,
 InT y (diff s1 s2) &lt;-&gt; InT y s1 /\ ~ InT y s2)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkf4" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkf4"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">s1</span> <span class="nv">s2</span> : tree,
Ok s1 -&gt;
Ok s2 -&gt;
Ok (diff s1 s2) /\
(<span class="kr">forall</span> <span class="nv">y</span> : elt,
 InT y (diff s1 s2) &lt;-&gt; InT y s1 /\ ~ InT y s2)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkf5" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkf5"><span class="highlight"><span class="nb">intros</span> s1 s2; <span class="nb">functional induction</span> diff s1 s2; <span class="nb">intros</span> B1 B2;
 [intuition_in|intuition_in | | ]; factornode s2;
 destruct_split; inv;
 <span class="nb">destruct</span> IHt0 <span class="kr">as</span> (IHb1,IHi1), IHt1 <span class="kr">as</span> (IHb2,IHi2); <span class="nb">auto with</span> *;
 <span class="nb">split</span>; <span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : elt,
InT y (diff l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y l1 /\ ~ InT y (<span class="nb">split</span> x1 s2)#l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : elt,
InT y (diff r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y r1 /\ ~ InT y (<span class="nb">split</span> x1 s2)#r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok
  (concat (diff l1 (<span class="nb">split</span> x1 s2)#l)
     (diff r1 (<span class="nb">split</span> x1 s2)#r))</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chkf6" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 /\ ~ InT y0 (<span class="nb">split</span> x1 s2)#l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 /\ ~ InT y0 (<span class="nb">split</span> x1 s2)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chkf6"><hr></label><div class="goal-conclusion"><span class="highlight">InT y
  (concat (diff l1 (<span class="nb">split</span> x1 s2)#l)
     (diff r1 (<span class="nb">split</span> x1 s2)#r)) &lt;-&gt;
InT y (Node _x l1 x1 r1) /\ ~ InT y s2</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chkf7" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : elt,
InT y (diff l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y l1 /\ ~ InT y (<span class="nb">split</span> x1 s2)#l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : elt,
InT y (diff r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y r1 /\ ~ InT y (<span class="nb">split</span> x1 s2)#r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chkf7"><hr></label><div class="goal-conclusion"><span class="highlight">Ok
  (join (diff l1 (<span class="nb">split</span> x1 s2)#l) x1
     (diff r1 (<span class="nb">split</span> x1 s2)#r))</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chkf8" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 /\ ~ InT y0 (<span class="nb">split</span> x1 s2)#l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 /\ ~ InT y0 (<span class="nb">split</span> x1 s2)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chkf8"><hr></label><div class="goal-conclusion"><span class="highlight">InT y
  (join (diff l1 (<span class="nb">split</span> x1 s2)#l) x1
     (diff r1 (<span class="nb">split</span> x1 s2)#r)) &lt;-&gt;
InT y (Node _x l1 x1 r1) /\ ~ InT y s2</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkf9" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkf9"><span class="highlight">- <span class="c">(* Ok concat *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : elt,
InT y (diff l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y l1 /\ ~ InT y (<span class="nb">split</span> x1 s2)#l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : elt,
InT y (diff r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y r1 /\ ~ InT y (<span class="nb">split</span> x1 s2)#r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok
  (concat (diff l1 (<span class="nb">split</span> x1 s2)#l)
     (diff r1 (<span class="nb">split</span> x1 s2)#r))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> concat_ok; <span class="nb">auto</span>; <span class="nb">intros</span> y1 y2; <span class="nb">rewrite</span> IHi1, IHi2; <span class="nb">intuition</span>; order.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkfa" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkfa"><span class="highlight">- <span class="c">(* InT concat *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 /\ ~ InT y0 (<span class="nb">split</span> x1 s2)#l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 /\ ~ InT y0 (<span class="nb">split</span> x1 s2)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y
  (concat (diff l1 (<span class="nb">split</span> x1 s2)#l)
     (diff r1 (<span class="nb">split</span> x1 s2)#r)) &lt;-&gt;
InT y (Node _x l1 x1 r1) /\ ~ InT y s2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkfb" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkfb"><span class="highlight"><span class="nb">rewrite</span> concat_spec, IHi1, IHi2, split_spec1, split_spec2; intuition_in.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 /\ (InT y0 (<span class="nb">split</span> x1 s2)#l -&gt; <span class="kt">False</span>)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 /\ (InT y0 (<span class="nb">split</span> x1 s2)#r -&gt; <span class="kt">False</span>)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">InT y s2 -&gt; <span class="kt">False</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq y x1</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y l1 /\ (InT y s2 /\ X.lt y x1 -&gt; <span class="kt">False</span>) \/
InT y r1 /\ (InT y s2 /\ X.lt x1 y -&gt; <span class="kt">False</span>)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkfc" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkfc"><span class="highlight"><span class="nb">absurd</span> (InT x1 s2).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 /\ (InT y0 (<span class="nb">split</span> x1 s2)#l -&gt; <span class="kt">False</span>)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 /\ (InT y0 (<span class="nb">split</span> x1 s2)#r -&gt; <span class="kt">False</span>)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">InT y s2 -&gt; <span class="kt">False</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq y x1</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~ InT x1 s2</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chkfd" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 /\ (InT y0 (<span class="nb">split</span> x1 s2)#l -&gt; <span class="kt">False</span>)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 /\ (InT y0 (<span class="nb">split</span> x1 s2)#r -&gt; <span class="kt">False</span>)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">InT y s2 -&gt; <span class="kt">False</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq y x1</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chkfd"><hr></label><div class="goal-conclusion"><span class="highlight">InT x1 s2</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkfe" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkfe"><span class="highlight">+</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 /\ (InT y0 (<span class="nb">split</span> x1 s2)#l -&gt; <span class="kt">False</span>)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 /\ (InT y0 (<span class="nb">split</span> x1 s2)#r -&gt; <span class="kt">False</span>)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">InT y s2 -&gt; <span class="kt">False</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq y x1</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~ InT x1 s2</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">setoid_replace</span> x1 <span class="kr">with</span> y; <span class="nb">auto</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chkff" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chkff"><span class="highlight">+</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 /\ (InT y0 (<span class="nb">split</span> x1 s2)#l -&gt; <span class="kt">False</span>)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 /\ (InT y0 (<span class="nb">split</span> x1 s2)#r -&gt; <span class="kt">False</span>)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">InT y s2 -&gt; <span class="kt">False</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq y x1</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT x1 s2</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">rewrite</span> &lt;- split_spec3; <span class="nb">auto</span>; <span class="bp">congruence</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk100" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk100"><span class="highlight">- <span class="c">(* Ok join *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : elt,
InT y (diff l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y l1 /\ ~ InT y (<span class="nb">split</span> x1 s2)#l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : elt,
InT y (diff r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y r1 /\ ~ InT y (<span class="nb">split</span> x1 s2)#r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok
  (join (diff l1 (<span class="nb">split</span> x1 s2)#l) x1
     (diff r1 (<span class="nb">split</span> x1 s2)#r))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> join_ok; <span class="nb">auto</span>; <span class="nb">intro</span> y; <span class="nb">rewrite</span> ?IHi1, ?IHi2; <span class="nb">intuition</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk101" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk101"><span class="highlight">- <span class="c">(* InT join *)</span></span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 /\ ~ InT y0 (<span class="nb">split</span> x1 s2)#l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 /\ ~ InT y0 (<span class="nb">split</span> x1 s2)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y
  (join (diff l1 (<span class="nb">split</span> x1 s2)#l) x1
     (diff r1 (<span class="nb">split</span> x1 s2)#r)) &lt;-&gt;
InT y (Node _x l1 x1 r1) /\ ~ InT y s2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk102" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk102"><span class="highlight"><span class="nb">rewrite</span> join_spec, IHi1, IHi2, split_spec1, split_spec2; <span class="nb">auto with</span> *.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 /\ ~ InT y0 (<span class="nb">split</span> x1 s2)#l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 /\ ~ InT y0 (<span class="nb">split</span> x1 s2)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">X.eq y x1 \/
InT y l1 /\ ~ (InT y s2 /\ X.lt y x1) \/
InT y r1 /\ ~ (InT y s2 /\ X.lt x1 y) &lt;-&gt;
InT y (Node _x l1 x1 r1) /\ ~ InT y s2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk103" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk103"><span class="highlight">intuition_in.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 /\ (InT y0 (<span class="nb">split</span> x1 s2)#l -&gt; <span class="kt">False</span>)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 /\ (InT y0 (<span class="nb">split</span> x1 s2)#r -&gt; <span class="kt">False</span>)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq y x1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">InT y s2</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kt">False</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk104" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk104"><span class="highlight"><span class="nb">absurd</span> (InT x1 s2); <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 /\ (InT y0 (<span class="nb">split</span> x1 s2)#l -&gt; <span class="kt">False</span>)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 /\ (InT y0 (<span class="nb">split</span> x1 s2)#r -&gt; <span class="kt">False</span>)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq y x1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">InT y s2</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~ InT x1 s2</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk105" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 /\ (InT y0 (<span class="nb">split</span> x1 s2)#l -&gt; <span class="kt">False</span>)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 /\ (InT y0 (<span class="nb">split</span> x1 s2)#r -&gt; <span class="kt">False</span>)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq y x1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">InT y s2</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk105"><hr></label><div class="goal-conclusion"><span class="highlight">InT x1 s2</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk106" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk106"><span class="highlight">*</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 /\ (InT y0 (<span class="nb">split</span> x1 s2)#l -&gt; <span class="kt">False</span>)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 /\ (InT y0 (<span class="nb">split</span> x1 s2)#r -&gt; <span class="kt">False</span>)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq y x1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">InT y s2</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">~ InT x1 s2</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">rewrite</span> &lt;- split_spec3; <span class="nb">auto</span>; <span class="bp">congruence</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk107" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk107"><span class="highlight">*</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(<span class="nb">split</span> x1 s2)#b = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 /\ (InT y0 (<span class="nb">split</span> x1 s2)#l -&gt; <span class="kt">False</span>)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHb2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (diff r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHi2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
InT y0 (diff r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 /\ (InT y0 (<span class="nb">split</span> x1 s2)#r -&gt; <span class="kt">False</span>)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq y x1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">InT y s2</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT x1 s2</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">setoid_replace</span> x1 <span class="kr">with</span> y; <span class="nb">auto</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk108" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk108"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">diff_spec</span> : <span class="kr">forall</span> <span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">y</span> `{Ok s1, Ok s2},
 (InT y (diff s1 s2) &lt;-&gt; InT y s1 /\ ~InT y s2).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : tree) (<span class="nv">y</span> : elt),
Ok s1 -&gt;
Ok s2 -&gt; InT y (diff s1 s2) &lt;-&gt; InT y s1 /\ ~ InT y s2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk109" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk109"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : tree) (<span class="nv">y</span> : elt),
Ok s1 -&gt;
Ok s2 -&gt; InT y (diff s1 s2) &lt;-&gt; InT y s1 /\ ~ InT y s2</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">intros</span>; <span class="nb">destruct</span> (@diff_spec_ok s1 s2); <span class="nb">auto</span>.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk10a" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk10a"><span class="highlight"><span class="kn">Instance</span> <span class="nf">diff_ok</span> <span class="nv">s1</span> <span class="nv">s2</span> `(Ok s1, Ok s2) : Ok (diff s1 s2).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (diff s1 s2)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk10b" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk10b"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (diff s1 s2)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">intros</span>; <span class="nb">destruct</span> (@diff_spec_ok s1 s2); <span class="nb">auto</span>.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
<a name="lab31"></a><h2 class="section">Union</h2>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk10c" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk10c"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">union_spec</span> : <span class="kr">forall</span> <span class="nv">s1</span> <span class="nv">s2</span> <span class="nv">y</span> `{Ok s1, Ok s2},
 (InT y (union s1 s2) &lt;-&gt; InT y s1 \/ InT y s2).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : tree) (<span class="nv">y</span> : elt),
Ok s1 -&gt;
Ok s2 -&gt; InT y (union s1 s2) &lt;-&gt; InT y s1 \/ InT y s2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk10d" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk10d"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s1</span> <span class="nv">s2</span> : tree) (<span class="nv">y</span> : elt),
Ok s1 -&gt;
Ok s2 -&gt; InT y (union s1 s2) &lt;-&gt; InT y s1 \/ InT y s2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk10e" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk10e"><span class="highlight"><span class="nb">intros</span> s1 s2; <span class="nb">functional induction</span> union s1 s2; <span class="nb">intros</span> y B1 B2.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok Leaf</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y s2 &lt;-&gt; InT y Leaf \/ InT y s2</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk10f" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x l1 x1 r1)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok Leaf</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk10f"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (Node _x l1 x1 r1) &lt;-&gt;
InT y (Node _x l1 x1 r1) \/ InT y Leaf</span></div></blockquote><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk110" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="nb">split</span> x1 (Node _x0 _x1 _x2 _x3) =
&lt;&lt; l2&#39;, _x4, r2&#39; &gt;&gt;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHt0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
Ok l1 -&gt;
Ok l2&#39; -&gt;
InT y0 (union l1 l2&#39;) &lt;-&gt;
InT y0 l1 \/ InT y0 l2&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHt1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
Ok r1 -&gt;
Ok r2&#39; -&gt;
InT y0 (union r1 r2&#39;) &lt;-&gt;
InT y0 r1 \/ InT y0 r2&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x l1 x1 r1)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x0 _x1 _x2 _x3)</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk110"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (join (union l1 l2&#39;) x1 (union r1 r2&#39;)) &lt;-&gt;
InT y (Node _x l1 x1 r1) \/
InT y (Node _x0 _x1 _x2 _x3)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk111" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk111"><span class="highlight">intuition_in.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x l1 x1 r1)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok Leaf</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y (Node _x l1 x1 r1) &lt;-&gt;
InT y (Node _x l1 x1 r1) \/ InT y Leaf</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk112" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="nb">split</span> x1 (Node _x0 _x1 _x2 _x3) =
&lt;&lt; l2&#39;, _x4, r2&#39; &gt;&gt;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHt0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
Ok l1 -&gt;
Ok l2&#39; -&gt;
InT y0 (union l1 l2&#39;) &lt;-&gt;
InT y0 l1 \/ InT y0 l2&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHt1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
Ok r1 -&gt;
Ok r2&#39; -&gt;
InT y0 (union r1 r2&#39;) &lt;-&gt;
InT y0 r1 \/ InT y0 r2&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x l1 x1 r1)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x0 _x1 _x2 _x3)</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk112"><hr></label><div class="goal-conclusion"><span class="highlight">InT y (join (union l1 l2&#39;) x1 (union r1 r2&#39;)) &lt;-&gt;
InT y (Node _x l1 x1 r1) \/
InT y (Node _x0 _x1 _x2 _x3)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk113" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk113"><span class="highlight">intuition_in.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="nb">split</span> x1 (Node _x0 _x1 _x2 _x3) =
&lt;&lt; l2&#39;, _x4, r2&#39; &gt;&gt;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHt0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
Ok l1 -&gt;
Ok l2&#39; -&gt;
InT y0 (union l1 l2&#39;) &lt;-&gt;
InT y0 l1 \/ InT y0 l2&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHt1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
Ok r1 -&gt;
Ok r2&#39; -&gt;
InT y0 (union r1 r2&#39;) &lt;-&gt;
InT y0 r1 \/ InT y0 r2&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x l1 x1 r1)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x0 _x1 _x2 _x3)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y (join (union l1 l2&#39;) x1 (union r1 r2&#39;)) &lt;-&gt;
InT y (Node _x l1 x1 r1) \/
InT y (Node _x0 _x1 _x2 _x3)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk114" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk114"><span class="highlight">factornode s2; destruct_split; inv.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHt0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
Ok l1 -&gt;
Ok (<span class="nb">split</span> x1 s2)#l -&gt;
InT y0 (union l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 \/ InT y0 (<span class="nb">split</span> x1 s2)#l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHt1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
Ok r1 -&gt;
Ok (<span class="nb">split</span> x1 s2)#r -&gt;
InT y0 (union r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 \/ InT y0 (<span class="nb">split</span> x1 s2)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT y
  (join (union l1 (<span class="nb">split</span> x1 s2)#l) x1
     (union r1 (<span class="nb">split</span> x1 s2)#r)) &lt;-&gt;
InT y (Node _x l1 x1 r1) \/ InT y s2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk115" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk115"><span class="highlight"><span class="nb">rewrite</span> join_spec, IHt0, IHt1, split_spec1, split_spec2; <span class="nb">auto with</span> *.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHt0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
Ok l1 -&gt;
Ok (<span class="nb">split</span> x1 s2)#l -&gt;
InT y0 (union l1 (<span class="nb">split</span> x1 s2)#l) &lt;-&gt;
InT y0 l1 \/ InT y0 (<span class="nb">split</span> x1 s2)#l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHt1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : elt,
Ok r1 -&gt;
Ok (<span class="nb">split</span> x1 s2)#r -&gt;
InT y0 (union r1 (<span class="nb">split</span> x1 s2)#r) &lt;-&gt;
InT y0 r1 \/ InT y0 (<span class="nb">split</span> x1 s2)#r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">X.eq y x1 \/
(InT y l1 \/ InT y s2 /\ X.lt y x1) \/
InT y r1 \/ InT y s2 /\ X.lt x1 y &lt;-&gt;
InT y (Node _x l1 x1 r1) \/ InT y s2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">destruct</span> (X.compare_spec y x1); intuition_in.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk116" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk116"><span class="highlight"><span class="kn">Instance</span> <span class="nf">union_ok</span> <span class="nv">s1</span> <span class="nv">s2</span> : <span class="kr">forall</span> `(Ok s1, Ok s2), Ok (union s1 s2).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok s1 -&gt; Ok s2 -&gt; Ok (union s1 s2)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk117" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk117"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok s1 -&gt; Ok s2 -&gt; Ok (union s1 s2)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk118" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk118"><span class="highlight"><span class="nb">functional induction</span> union s1 s2; <span class="nb">intros</span> B1 B2; <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">_x4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r2'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">e1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="nb">split</span> x1 (Node _x0 _x1 _x2 _x3) =
&lt;&lt; l2&#39;, _x4, r2&#39; &gt;&gt;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHt0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1 -&gt; Ok l2&#39; -&gt; Ok (union l1 l2&#39;)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHt1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1 -&gt; Ok r2&#39; -&gt; Ok (union r1 r2&#39;)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x l1 x1 r1)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (Node _x0 _x1 _x2 _x3)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (join (union l1 l2&#39;) x1 (union r1 r2&#39;))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk119" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk119"><span class="highlight">factornode s2; destruct_split; inv.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHt0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1 -&gt;
Ok (<span class="nb">split</span> x1 s2)#l -&gt;
Ok (union l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHt1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1 -&gt;
Ok (<span class="nb">split</span> x1 s2)#r -&gt;
Ok (union r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok
  (join (union l1 (<span class="nb">split</span> x1 s2)#l) x1
     (union r1 (<span class="nb">split</span> x1 s2)#r))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk11a" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk11a"><span class="highlight"><span class="nb">apply</span> join_ok; <span class="nb">auto with</span> *.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHt0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1 -&gt;
Ok (<span class="nb">split</span> x1 s2)#l -&gt;
Ok (union l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHt1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1 -&gt;
Ok (<span class="nb">split</span> x1 s2)#r -&gt;
Ok (union r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">lt_tree x1 (union l1 (<span class="nb">split</span> x1 s2)#l)</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk11b" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHt0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1 -&gt;
Ok (<span class="nb">split</span> x1 s2)#l -&gt;
Ok (union l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHt1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1 -&gt;
Ok (<span class="nb">split</span> x1 s2)#r -&gt;
Ok (union r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk11b"><hr></label><div class="goal-conclusion"><span class="highlight">gt_tree x1 (union r1 (<span class="nb">split</span> x1 s2)#r)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk11c" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk11c"><span class="highlight"><span class="nb">intro</span> y; <span class="nb">rewrite</span> union_spec, split_spec1; intuition_in.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">_x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r1, s2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHt0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1 -&gt;
Ok (<span class="nb">split</span> x1 s2)#l -&gt;
Ok (union l1 (<span class="nb">split</span> x1 s2)#l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">IHt1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1 -&gt;
Ok (<span class="nb">split</span> x1 s2)#r -&gt;
Ok (union r1 (<span class="nb">split</span> x1 s2)#r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">B2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H5</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok r1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H6</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x1 l1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H7</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x1 r1</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">gt_tree x1 (union r1 (<span class="nb">split</span> x1 s2)#r)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">intro</span> y; <span class="nb">rewrite</span> union_spec, split_spec2; intuition_in.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
<a name="lab32"></a><h1 class="section">Filter</h1>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk11d" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk11d"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">filter_spec</span> : <span class="kr">forall</span> <span class="nv">s</span> <span class="nv">x</span> <span class="nv">f</span>,
 Proper (X.eq==&gt;Logic.eq) f -&gt;
 (InT x (filter f s) &lt;-&gt; InT x s /\ f x = true).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s</span> : tree) (<span class="nv">x</span> : elt) (<span class="nv">f</span> : X.t -&gt; bool),
Proper (X.eq ==&gt; Logic.eq) f -&gt;
InT x (filter f s) &lt;-&gt; InT x s /\ f x = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk11e" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk11e"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s</span> : tree) (<span class="nv">x</span> : elt) (<span class="nv">f</span> : X.t -&gt; bool),
Proper (X.eq ==&gt; Logic.eq) f -&gt;
InT x (filter f s) &lt;-&gt; InT x s /\ f x = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk11f" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk11f"><span class="highlight"><span class="nb">induction</span> s <span class="kr">as</span> [ |h l Hl x0 r Hr]; <span class="nb">intros</span> x f Hf; <span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper (X.eq ==&gt; Logic.eq) f</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT x Leaf &lt;-&gt; InT x Leaf /\ f x = true</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk120" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : X.t -&gt; bool),
Proper (X.eq ==&gt; Logic.eq) f0 -&gt;
InT x1 (filter f0 l) &lt;-&gt; InT x1 l /\ f0 x1 = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : X.t -&gt; bool),
Proper (X.eq ==&gt; Logic.eq) f0 -&gt;
InT x1 (filter f0 r) &lt;-&gt; InT x1 r /\ f0 x1 = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper (X.eq ==&gt; Logic.eq) f</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk120"><hr></label><div class="goal-conclusion"><span class="highlight">InT x
  (<span class="kr">if</span> f x0
   <span class="kr">then</span> join (filter f l) x0 (filter f r)
   <span class="kr">else</span> concat (filter f l) (filter f r)) &lt;-&gt;
InT x (Node h l x0 r) /\ f x = true</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk121" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk121"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper (X.eq ==&gt; Logic.eq) f</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT x Leaf &lt;-&gt; InT x Leaf /\ f x = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight">intuition_in.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk122" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk122"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : X.t -&gt; bool),
Proper (X.eq ==&gt; Logic.eq) f0 -&gt;
InT x1 (filter f0 l) &lt;-&gt; InT x1 l /\ f0 x1 = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : X.t -&gt; bool),
Proper (X.eq ==&gt; Logic.eq) f0 -&gt;
InT x1 (filter f0 r) &lt;-&gt; InT x1 r /\ f0 x1 = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper (X.eq ==&gt; Logic.eq) f</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT x
  (<span class="kr">if</span> f x0
   <span class="kr">then</span> join (filter f l) x0 (filter f r)
   <span class="kr">else</span> concat (filter f l) (filter f r)) &lt;-&gt;
InT x (Node h l x0 r) /\ f x = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk123" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk123"><span class="highlight"><span class="nb">case_eq</span> (f x0); <span class="nb">intros</span> Hx0.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : X.t -&gt; bool),
Proper (X.eq ==&gt; Logic.eq) f0 -&gt;
InT x1 (filter f0 l) &lt;-&gt; InT x1 l /\ f0 x1 = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : X.t -&gt; bool),
Proper (X.eq ==&gt; Logic.eq) f0 -&gt;
InT x1 (filter f0 r) &lt;-&gt; InT x1 r /\ f0 x1 = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper (X.eq ==&gt; Logic.eq) f</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">f x0 = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT x (join (filter f l) x0 (filter f r)) &lt;-&gt;
InT x (Node h l x0 r) /\ f x = true</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk124" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : X.t -&gt; bool),
Proper (X.eq ==&gt; Logic.eq) f0 -&gt;
InT x1 (filter f0 l) &lt;-&gt; InT x1 l /\ f0 x1 = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : X.t -&gt; bool),
Proper (X.eq ==&gt; Logic.eq) f0 -&gt;
InT x1 (filter f0 r) &lt;-&gt; InT x1 r /\ f0 x1 = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper (X.eq ==&gt; Logic.eq) f</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">f x0 = false</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk124"><hr></label><div class="goal-conclusion"><span class="highlight">InT x (concat (filter f l) (filter f r)) &lt;-&gt;
InT x (Node h l x0 r) /\ f x = true</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk125" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk125"><span class="highlight">*</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : X.t -&gt; bool),
Proper (X.eq ==&gt; Logic.eq) f0 -&gt;
InT x1 (filter f0 l) &lt;-&gt; InT x1 l /\ f0 x1 = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : X.t -&gt; bool),
Proper (X.eq ==&gt; Logic.eq) f0 -&gt;
InT x1 (filter f0 r) &lt;-&gt; InT x1 r /\ f0 x1 = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper (X.eq ==&gt; Logic.eq) f</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">f x0 = true</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT x (join (filter f l) x0 (filter f r)) &lt;-&gt;
InT x (Node h l x0 r) /\ f x = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk126" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk126"><span class="highlight"><span class="nb">rewrite</span> join_spec, Hl, Hr; intuition_in.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : X.t -&gt; bool),
Proper (X.eq ==&gt; Logic.eq) f0 -&gt;
InT x1 (filter f0 l) &lt;-&gt; InT x1 l /\ f0 x1 = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : X.t -&gt; bool),
Proper (X.eq ==&gt; Logic.eq) f0 -&gt;
InT x1 (filter f0 r) &lt;-&gt; InT x1 r /\ f0 x1 = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper (X.eq ==&gt; Logic.eq) f</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">f x0 = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq x x0</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">f x = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">     </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">now</span> <span class="nb">setoid_replace</span> x <span class="kr">with</span> x0.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk127" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk127"><span class="highlight">*</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : X.t -&gt; bool),
Proper (X.eq ==&gt; Logic.eq) f0 -&gt;
InT x1 (filter f0 l) &lt;-&gt; InT x1 l /\ f0 x1 = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : X.t -&gt; bool),
Proper (X.eq ==&gt; Logic.eq) f0 -&gt;
InT x1 (filter f0 r) &lt;-&gt; InT x1 r /\ f0 x1 = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper (X.eq ==&gt; Logic.eq) f</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">f x0 = false</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT x (concat (filter f l) (filter f r)) &lt;-&gt;
InT x (Node h l x0 r) /\ f x = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk128" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk128"><span class="highlight"><span class="nb">rewrite</span> concat_spec, Hl, Hr; intuition_in.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : X.t -&gt; bool),
Proper (X.eq ==&gt; Logic.eq) f0 -&gt;
InT x1 (filter f0 l) &lt;-&gt; InT x1 l /\ f0 x1 = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : X.t -&gt; bool),
Proper (X.eq ==&gt; Logic.eq) f0 -&gt;
InT x1 (filter f0 r) &lt;-&gt; InT x1 r /\ f0 x1 = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper (X.eq ==&gt; Logic.eq) f</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">f x0 = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">f x = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq x x0</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT x l /\ f x = true \/ InT x r /\ f x = true</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">     </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk129" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk129"><span class="highlight"><span class="nb">assert</span> (f x = f x0) <span class="bp">by</span> <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : X.t -&gt; bool),
Proper (X.eq ==&gt; Logic.eq) f0 -&gt;
InT x1 (filter f0 l) &lt;-&gt; InT x1 l /\ f0 x1 = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : X.t -&gt; bool),
Proper (X.eq ==&gt; Logic.eq) f0 -&gt;
InT x1 (filter f0 r) &lt;-&gt; InT x1 r /\ f0 x1 = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper (X.eq ==&gt; Logic.eq) f</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hx0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">f x0 = false</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">f x = true</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.eq x x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">f x = f x0</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT x l /\ f x = true \/ InT x r /\ f x = true</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">congruence</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk12a" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk12a"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">filter_weak_spec</span> : <span class="kr">forall</span> <span class="nv">s</span> <span class="nv">x</span> <span class="nv">f</span>,
 InT x (filter f s) -&gt; InT x s.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s</span> : tree) (<span class="nv">x</span> : elt) (<span class="nv">f</span> : elt -&gt; bool),
InT x (filter f s) -&gt; InT x s</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk12b" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk12b"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">s</span> : tree) (<span class="nv">x</span> : elt) (<span class="nv">f</span> : elt -&gt; bool),
InT x (filter f s) -&gt; InT x s</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk12c" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk12c"><span class="highlight"><span class="nb">induction</span> s <span class="kr">as</span> [ |h l Hl x0 r Hr]; <span class="nb">intros</span> x f; <span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT x Leaf -&gt; InT x Leaf</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk12d" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : elt -&gt; bool),
InT x1 (filter f0 l) -&gt; InT x1 l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : elt -&gt; bool),
InT x1 (filter f0 r) -&gt; InT x1 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk12d"><hr></label><div class="goal-conclusion"><span class="highlight">InT x
  (<span class="kr">if</span> f x0
   <span class="kr">then</span> join (filter f l) x0 (filter f r)
   <span class="kr">else</span> concat (filter f l) (filter f r)) -&gt;
InT x (Node h l x0 r)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk12e" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk12e"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT x Leaf -&gt; InT x Leaf</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">trivial</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk12f" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk12f"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : elt -&gt; bool),
InT x1 (filter f0 l) -&gt; InT x1 l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : elt -&gt; bool),
InT x1 (filter f0 r) -&gt; InT x1 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT x
  (<span class="kr">if</span> f x0
   <span class="kr">then</span> join (filter f l) x0 (filter f r)
   <span class="kr">else</span> concat (filter f l) (filter f r)) -&gt;
InT x (Node h l x0 r)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk130" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk130"><span class="highlight"><span class="nb">destruct</span> (f x0).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : elt -&gt; bool),
InT x1 (filter f0 l) -&gt; InT x1 l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : elt -&gt; bool),
InT x1 (filter f0 r) -&gt; InT x1 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT x (join (filter f l) x0 (filter f r)) -&gt;
InT x (Node h l x0 r)</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk131" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : elt -&gt; bool),
InT x1 (filter f0 l) -&gt; InT x1 l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : elt -&gt; bool),
InT x1 (filter f0 r) -&gt; InT x1 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk131"><hr></label><div class="goal-conclusion"><span class="highlight">InT x (concat (filter f l) (filter f r)) -&gt;
InT x (Node h l x0 r)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk132" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk132"><span class="highlight">*</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : elt -&gt; bool),
InT x1 (filter f0 l) -&gt; InT x1 l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : elt -&gt; bool),
InT x1 (filter f0 r) -&gt; InT x1 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT x (join (filter f l) x0 (filter f r)) -&gt;
InT x (Node h l x0 r)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">rewrite</span> join_spec; intuition_in; <span class="nb">eauto</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk133" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk133"><span class="highlight">*</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : elt -&gt; bool),
InT x1 (filter f0 l) -&gt; InT x1 l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : elt) (<span class="nv">f0</span> : elt -&gt; bool),
InT x1 (filter f0 r) -&gt; InT x1 r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">InT x (concat (filter f l) (filter f r)) -&gt;
InT x (Node h l x0 r)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">rewrite</span> concat_spec; intuition_in; <span class="nb">eauto</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk134" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk134"><span class="highlight"><span class="kn">Instance</span> <span class="nf">filter_ok</span> <span class="nv">s</span> <span class="nv">f</span> `(H : Ok s) : Ok (filter f s).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (filter f s)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk135" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk135"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (filter f s)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk136" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk136"><span class="highlight"><span class="nb">induction</span> H <span class="kr">as</span> [ | h x l r Hl Hfl Hr Hfr Hlt Hgt ].</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (filter f Leaf)</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk137" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l, r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">bst l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">bst r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlt</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgt</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (filter f l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (filter f r)</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk137"><hr></label><div class="goal-conclusion"><span class="highlight">Ok (filter f (Node h l x r))</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk138" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk138"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (filter f Leaf)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">constructor</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk139" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk139"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l, r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">bst l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">bst r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlt</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgt</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (filter f l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (filter f r)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (filter f (Node h l x r))</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk13a" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk13a"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l, r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">bst l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">bst r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlt</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgt</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (filter f l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (filter f r)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok
  (<span class="kr">if</span> f x
   <span class="kr">then</span> join (filter f l) x (filter f r)
   <span class="kr">else</span> concat (filter f l) (filter f r))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk13b" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk13b"><span class="highlight"><span class="nb">assert</span> (lt_tree x (filter f l)) <span class="bp">by</span> (<span class="nb">eauto using</span> filter_weak_spec).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l, r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">bst l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">bst r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlt</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgt</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (filter f l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (filter f r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x (filter f l)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok
  (<span class="kr">if</span> f x
   <span class="kr">then</span> join (filter f l) x (filter f r)
   <span class="kr">else</span> concat (filter f l) (filter f r))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk13c" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk13c"><span class="highlight"><span class="nb">assert</span> (gt_tree x (filter f r)) <span class="bp">by</span> (<span class="nb">eauto using</span> filter_weak_spec).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l, r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">bst l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">bst r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hlt</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hgt</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x r</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (filter f l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hfr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok (filter f r)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">lt_tree x (filter f l)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">gt_tree x (filter f r)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok
  (<span class="kr">if</span> f x
   <span class="kr">then</span> join (filter f l) x (filter f r)
   <span class="kr">else</span> concat (filter f l) (filter f r))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">destruct</span> (f x); <span class="nb">eauto using</span> concat_ok, join_ok.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
<a name="lab33"></a><h1 class="section">Partition</h1>
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk13d" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk13d"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">partition_spec1&#39;</span> <span class="nv">s</span> <span class="nv">f</span> : (partition f s)#<span class="mi">1</span> = filter f s.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(partition f s)#<span class="mi">1</span> = filter f s</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk13e" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk13e"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(partition f s)#<span class="mi">1</span> = filter f s</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk13f" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk13f"><span class="highlight"><span class="nb">induction</span> s <span class="kr">as</span> [ | h l Hl x r Hr ]; <span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Leaf = Leaf</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk140" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(partition f l)#<span class="mi">1</span> = filter f l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(partition f r)#<span class="mi">1</span> = filter f r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk140"><hr></label><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">l1</span>, l2) := partition f l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">r1</span>, r2) := partition f r <span class="kr">in</span>
 <span class="kr">if</span> f x
 <span class="kr">then</span> (join l1 x r1, concat l2 r2)
 <span class="kr">else</span> (concat l1 r1, join l2 x r2))#<span class="mi">1</span> =
(<span class="kr">if</span> f x
 <span class="kr">then</span> join (filter f l) x (filter f r)
 <span class="kr">else</span> concat (filter f l) (filter f r))</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk141" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk141"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Leaf = Leaf</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">trivial</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk142" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk142"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(partition f l)#<span class="mi">1</span> = filter f l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(partition f r)#<span class="mi">1</span> = filter f r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">l1</span>, l2) := partition f l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">r1</span>, r2) := partition f r <span class="kr">in</span>
 <span class="kr">if</span> f x
 <span class="kr">then</span> (join l1 x r1, concat l2 r2)
 <span class="kr">else</span> (concat l1 r1, join l2 x r2))#<span class="mi">1</span> =
(<span class="kr">if</span> f x
 <span class="kr">then</span> join (filter f l) x (filter f r)
 <span class="kr">else</span> concat (filter f l) (filter f r))</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk143" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk143"><span class="highlight"><span class="nb">rewrite</span> &lt;- Hl, &lt;- Hr.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(partition f l)#<span class="mi">1</span> = filter f l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(partition f r)#<span class="mi">1</span> = filter f r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">l1</span>, l2) := partition f l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">r1</span>, r2) := partition f r <span class="kr">in</span>
 <span class="kr">if</span> f x
 <span class="kr">then</span> (join l1 x r1, concat l2 r2)
 <span class="kr">else</span> (concat l1 r1, join l2 x r2))#<span class="mi">1</span> =
(<span class="kr">if</span> f x
 <span class="kr">then</span> join (partition f l)#<span class="mi">1</span> x (partition f r)#<span class="mi">1</span>
 <span class="kr">else</span> concat (partition f l)#<span class="mi">1</span> (partition f r)#<span class="mi">1</span>)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">now</span> <span class="nb">destruct</span> (partition f l), (partition f r), (f x).</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk144" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk144"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">partition_spec2&#39;</span> <span class="nv">s</span> <span class="nv">f</span> :
 (partition f s)#<span class="mi">2</span> = filter (<span class="kr">fun</span> <span class="nv">x</span> =&gt; negb (f x)) s.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(partition f s)#<span class="mi">2</span> =
filter (<span class="kr">fun</span> <span class="nv">x</span> : elt =&gt; negb (f x)) s</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk145" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk145"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(partition f s)#<span class="mi">2</span> =
filter (<span class="kr">fun</span> <span class="nv">x</span> : elt =&gt; negb (f x)) s</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk146" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk146"><span class="highlight"><span class="nb">induction</span> s <span class="kr">as</span> [ | h l Hl x r Hr ]; <span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Leaf = Leaf</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="MSetAVL-v-chk147" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(partition f l)#<span class="mi">2</span> =
filter (<span class="kr">fun</span> <span class="nv">x0</span> : elt =&gt; negb (f x0)) l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(partition f r)#<span class="mi">2</span> =
filter (<span class="kr">fun</span> <span class="nv">x0</span> : elt =&gt; negb (f x0)) r</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="MSetAVL-v-chk147"><hr></label><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">l1</span>, l2) := partition f l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">r1</span>, r2) := partition f r <span class="kr">in</span>
 <span class="kr">if</span> f x
 <span class="kr">then</span> (join l1 x r1, concat l2 r2)
 <span class="kr">else</span> (concat l1 r1, join l2 x r2))#<span class="mi">2</span> =
(<span class="kr">if</span> negb (f x)
 <span class="kr">then</span>
  join (filter (<span class="kr">fun</span> <span class="nv">x0</span> : elt =&gt; negb (f x0)) l) x
    (filter (<span class="kr">fun</span> <span class="nv">x0</span> : elt =&gt; negb (f x0)) r)
 <span class="kr">else</span>
  concat (filter (<span class="kr">fun</span> <span class="nv">x0</span> : elt =&gt; negb (f x0)) l)
    (filter (<span class="kr">fun</span> <span class="nv">x0</span> : elt =&gt; negb (f x0)) r))</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk148" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk148"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Leaf = Leaf</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">trivial</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk149" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk149"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(partition f l)#<span class="mi">2</span> =
filter (<span class="kr">fun</span> <span class="nv">x0</span> : elt =&gt; negb (f x0)) l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(partition f r)#<span class="mi">2</span> =
filter (<span class="kr">fun</span> <span class="nv">x0</span> : elt =&gt; negb (f x0)) r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">l1</span>, l2) := partition f l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">r1</span>, r2) := partition f r <span class="kr">in</span>
 <span class="kr">if</span> f x
 <span class="kr">then</span> (join l1 x r1, concat l2 r2)
 <span class="kr">else</span> (concat l1 r1, join l2 x r2))#<span class="mi">2</span> =
(<span class="kr">if</span> negb (f x)
 <span class="kr">then</span>
  join (filter (<span class="kr">fun</span> <span class="nv">x0</span> : elt =&gt; negb (f x0)) l) x
    (filter (<span class="kr">fun</span> <span class="nv">x0</span> : elt =&gt; negb (f x0)) r)
 <span class="kr">else</span>
  concat (filter (<span class="kr">fun</span> <span class="nv">x0</span> : elt =&gt; negb (f x0)) l)
    (filter (<span class="kr">fun</span> <span class="nv">x0</span> : elt =&gt; negb (f x0)) r))</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk14a" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk14a"><span class="highlight"><span class="nb">rewrite</span> &lt;- Hl, &lt;- Hr.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">h</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">I.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">l</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(partition f l)#<span class="mi">2</span> =
filter (<span class="kr">fun</span> <span class="nv">x0</span> : elt =&gt; negb (f x0)) l</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Hr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(partition f r)#<span class="mi">2</span> =
filter (<span class="kr">fun</span> <span class="nv">x0</span> : elt =&gt; negb (f x0)) r</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">let</span> (<span class="nv">l1</span>, l2) := partition f l <span class="kr">in</span>
 <span class="kr">let</span> (<span class="nv">r1</span>, r2) := partition f r <span class="kr">in</span>
 <span class="kr">if</span> f x
 <span class="kr">then</span> (join l1 x r1, concat l2 r2)
 <span class="kr">else</span> (concat l1 r1, join l2 x r2))#<span class="mi">2</span> =
(<span class="kr">if</span> negb (f x)
 <span class="kr">then</span> join (partition f l)#<span class="mi">2</span> x (partition f r)#<span class="mi">2</span>
 <span class="kr">else</span> concat (partition f l)#<span class="mi">2</span> (partition f r)#<span class="mi">2</span>)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">   </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">now</span> <span class="nb">destruct</span> (partition f l), (partition f r), (f x).</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk14b" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk14b"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">partition_spec1</span> <span class="nv">s</span> <span class="nv">f</span> :
 Proper (X.eq==&gt;Logic.eq) f -&gt;
 Equal (partition f s)#<span class="mi">1</span> (filter f s).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t -&gt; bool</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Proper (X.eq ==&gt; Logic.eq) f -&gt;
Equal (partition f s)#<span class="mi">1</span> (filter f s)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk14c" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk14c"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t -&gt; bool</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Proper (X.eq ==&gt; Logic.eq) f -&gt;
Equal (partition f s)#<span class="mi">1</span> (filter f s)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">now</span> <span class="nb">rewrite</span> partition_spec1&#39;.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk14d" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk14d"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">partition_spec2</span> <span class="nv">s</span> <span class="nv">f</span> :
 Proper (X.eq==&gt;Logic.eq) f -&gt;
 Equal (partition f s)#<span class="mi">2</span> (filter (<span class="kr">fun</span> <span class="nv">x</span> =&gt; negb (f x)) s).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t -&gt; bool</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Proper (X.eq ==&gt; Logic.eq) f -&gt;
Equal (partition f s)#<span class="mi">2</span>
  (filter (<span class="kr">fun</span> <span class="nv">x</span> : elt =&gt; negb (f x)) s)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk14e" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk14e"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">t</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">X.t -&gt; bool</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Proper (X.eq ==&gt; Logic.eq) f -&gt;
Equal (partition f s)#<span class="mi">2</span>
  (filter (<span class="kr">fun</span> <span class="nv">x</span> : elt =&gt; negb (f x)) s)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">now</span> <span class="nb">rewrite</span> partition_spec2&#39;.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk14f" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk14f"><span class="highlight"><span class="kn">Instance</span> <span class="nf">partition_ok1</span> <span class="nv">s</span> <span class="nv">f</span> `(Ok s) : Ok (partition f s)#<span class="mi">1</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (partition f s)#<span class="mi">1</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk150" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk150"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (partition f s)#<span class="mi">1</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">rewrite</span> partition_spec1&#39;; <span class="bp">now</span> <span class="nb">apply</span> filter_ok.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk151" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk151"><span class="highlight"><span class="kn">Instance</span> <span class="nf">partition_ok2</span> <span class="nv">s</span> <span class="nv">f</span> `(Ok s) : Ok (partition f s)#<span class="mi">2</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (partition f s)#<span class="mi">2</span></span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="MSetAVL-v-chk152" style="display: none" type="checkbox"><label class="coq-input" for="MSetAVL-v-chk152"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">s</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">tree</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">elt -&gt; bool</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Ok s</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Ok (partition f s)#<span class="mi">2</span></span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">rewrite</span> partition_spec2&#39;; <span class="bp">now</span> <span class="nb">apply</span> filter_ok.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">End</span> <span class="nf">MakeRaw</span>.</span></span></span></pre><div class="doc">
<a name="lab34"></a><h1 class="section">Encapsulation</h1>
<div class="paragraph"> </div>

   Now, in order to really provide a functor implementing <span class="inlinecode"><span class="id" title="var">S</span></span>, we
   need to encapsulate everything into a type of binary search trees.
   They also happen to be well-balanced, but this has no influence
   on the correctness of operations, so we won't state this here,
   see <span class="inlinecode"><span class="id" title="var">MSetFullAVL</span></span> if you need more than just the MSet interface.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Module</span> <span class="nf">IntMake</span> (I:Int)(X: OrderedType) &lt;: S <span class="kr">with</span> <span class="kn">Module</span> <span class="nf">E</span> := X.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Module</span> <span class="nf">Raw</span> := MakeRaw I X.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"> </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Include</span> Raw2Sets X Raw.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">End</span> <span class="nf">IntMake</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
<span class="c">(* For concrete use inside Coq, we propose an instantiation of [Int] by [Z]. *)</span>

</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Module</span> <span class="nf">Make</span> (X: OrderedType) &lt;: S <span class="kr">with</span> <span class="kn">Module</span> <span class="nf">E</span> := X
 :=IntMake(Z_as_Int)(X).</span></span></span></pre></article></body></html>