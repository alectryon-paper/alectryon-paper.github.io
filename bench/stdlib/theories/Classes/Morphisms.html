<!DOCTYPE html>
<html><head><title>Morphisms.v</title><meta charset="utf-8"><meta content="Alectryon v0.2" name="generator"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Serif:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" rel="stylesheet"><link href="https://unpkg.com/firacode/distr/fira_code.css" rel="stylesheet"><link href="alectryon.css" rel="stylesheet"><script src="alectryon.js"></script><style type="text/css">.highlight .hll { background-color: #ffffcc }
.highlight .c { color: #555753; font-style: italic } /* Comment */
.highlight .err { color: #a40000; border: 1px solid #cc0000 } /* Error */
.highlight .g { color: #000000 } /* Generic */
.highlight .k { color: #8f5902 } /* Keyword */
.highlight .l { color: #2e3436 } /* Literal */
.highlight .n { color: #000000 } /* Name */
.highlight .o { color: #000000 } /* Operator */
.highlight .x { color: #2e3436 } /* Other */
.highlight .p { color: #000000 } /* Punctuation */
.highlight .ch { color: #555753; font-weight: bold; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #555753; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #3465a4; font-style: italic } /* Comment.Preproc */
.highlight .cpf { color: #555753; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #555753; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3465a4; font-weight: bold; font-style: italic } /* Comment.Special */
.highlight .gd { color: #a40000 } /* Generic.Deleted */
.highlight .ge { color: #000000; font-style: italic } /* Generic.Emph */
.highlight .gr { color: #a40000 } /* Generic.Error */
.highlight .gh { color: #a40000; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #4e9a06 } /* Generic.Inserted */
.highlight .go { color: #000000; font-style: italic } /* Generic.Output */
.highlight .gp { color: #8f5902 } /* Generic.Prompt */
.highlight .gs { color: #000000; font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #000000; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #000000; font-style: italic } /* Generic.Traceback */
.highlight .kc { color: #204a87; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #4e9a06; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #4e9a06; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #204a87 } /* Keyword.Pseudo */
.highlight .kr { color: #8f5902 } /* Keyword.Reserved */
.highlight .kt { color: #204a87 } /* Keyword.Type */
.highlight .ld { color: #2e3436 } /* Literal.Date */
.highlight .m { color: #2e3436 } /* Literal.Number */
.highlight .s { color: #ad7fa8 } /* Literal.String */
.highlight .na { color: #c4a000 } /* Name.Attribute */
.highlight .nb { color: #75507b } /* Name.Builtin */
.highlight .nc { color: #204a87 } /* Name.Class */
.highlight .no { color: #ce5c00 } /* Name.Constant */
.highlight .nd { color: #3465a4; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #c4a000; text-decoration: underline } /* Name.Entity */
.highlight .ne { color: #cc0000 } /* Name.Exception */
.highlight .nf { color: #a40000 } /* Name.Function */
.highlight .nl { color: #3465a4; font-weight: bold } /* Name.Label */
.highlight .nn { color: #000000 } /* Name.Namespace */
.highlight .nx { color: #000000 } /* Name.Other */
.highlight .py { color: #000000 } /* Name.Property */
.highlight .nt { color: #a40000 } /* Name.Tag */
.highlight .nv { color: #ce5c00 } /* Name.Variable */
.highlight .ow { color: #8f5902 } /* Operator.Word */
.highlight .w { color: #d3d7cf; text-decoration: underline } /* Text.Whitespace */
.highlight .mb { color: #2e3436 } /* Literal.Number.Bin */
.highlight .mf { color: #2e3436 } /* Literal.Number.Float */
.highlight .mh { color: #2e3436 } /* Literal.Number.Hex */
.highlight .mi { color: #2e3436 } /* Literal.Number.Integer */
.highlight .mo { color: #2e3436 } /* Literal.Number.Oct */
.highlight .sa { color: #ad7fa8 } /* Literal.String.Affix */
.highlight .sb { color: #ad7fa8 } /* Literal.String.Backtick */
.highlight .sc { color: #ad7fa8; font-weight: bold } /* Literal.String.Char */
.highlight .dl { color: #ad7fa8 } /* Literal.String.Delimiter */
.highlight .sd { color: #ad7fa8 } /* Literal.String.Doc */
.highlight .s2 { color: #ad7fa8 } /* Literal.String.Double */
.highlight .se { color: #ad7fa8; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #ad7fa8; text-decoration: underline } /* Literal.String.Heredoc */
.highlight .si { color: #ce5c00 } /* Literal.String.Interpol */
.highlight .sx { color: #ad7fa8 } /* Literal.String.Other */
.highlight .sr { color: #ad7fa8 } /* Literal.String.Regex */
.highlight .s1 { color: #ad7fa8 } /* Literal.String.Single */
.highlight .ss { color: #8f5902 } /* Literal.String.Symbol */
.highlight .bp { color: #5c35cc } /* Name.Builtin.Pseudo */
.highlight .fm { color: #a40000 } /* Name.Function.Magic */
.highlight .vc { color: #ce5c00 } /* Name.Variable.Class */
.highlight .vg { color: #ce5c00; text-decoration: underline } /* Name.Variable.Global */
.highlight .vi { color: #ce5c00 } /* Name.Variable.Instance */
.highlight .vm { color: #ce5c00 } /* Name.Variable.Magic */
.highlight .il { color: #2e3436 } /* Literal.Number.Integer.Long */</style></head><body><article class="alectryon-root alectryon-standalone alectryon-centered alectryon-coqdoc"><div class="alectryon-header">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running <a href="https://coq.inria.fr/">Coq</a>+<a href="https://github.com/ejgallego/coq-serapi">SerAPI</a> v8.10.0+0.7.0. Coq sources are in this panel; goals and messages will appear in the other. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus.</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight"><span class="c">(* -*- coding: utf-8; coq-prog-args: (&quot;-coqlib&quot; &quot;../..&quot; &quot;-R&quot; &quot;..&quot; &quot;Coq&quot; &quot;-top&quot; &quot;Coq.Classes.Morphisms&quot;) -*- *)</span>
<span class="sd">(************************************************************************)</span>
<span class="c">(*         *   The Coq Proof Assistant / The Coq Development Team       *)</span>
<span class="c">(*  v      *   INRIA, CNRS and contributors - Copyright 1999-2018       *)</span>
<span class="c">(* &lt;O___,, *       (see CREDITS file for the list of authors)           *)</span>
<span class="c">(*   \VV/  **************************************************************)</span>
<span class="c">(*    //   *    This file is distributed under the terms of the         *)</span>
<span class="c">(*         *     GNU Lesser General Public License Version 2.1          *)</span>
<span class="c">(*         *     (see LICENSE file for the text of the license)         *)</span>
<span class="sd">(************************************************************************)</span></span></span></pre><div class="doc">
<a name="lab1"></a><h1 class="section">Typeclass-based morphism definition and standard, minimal instances</h1>
<div class="paragraph"> </div>

   Author: Matthieu Sozeau
   Institution: LRI, CNRS UMR 8623 - University Paris Sud

</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Require Import</span> Coq.Program.Basics.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Require Import</span> Coq.Program.Tactics.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Require Import</span> Coq.Relations.Relation_Definitions.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Require Export</span> Coq.Classes.RelationClasses.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Generalizable Variables</span> <span class="nf">A</span> eqA B C D R RA RB RC m f x y.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Local Obligation Tactic</span> := simpl_relation.</span></span></span></pre><div class="doc">
<a name="lab2"></a><h1 class="section">Morphisms.</h1>
<div class="paragraph"> </div>

   We now turn to the definition of <span class="inlinecode"><span class="id" title="var">Proper</span></span> and declare standard instances.
   These will be used by the <span class="inlinecode"><span class="id" title="tactic">setoid_rewrite</span></span> tactic later. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --></pre><div class="doc">
A morphism for a relation <span class="inlinecode"><span class="id" title="var">R</span></span> is a proper element of the relation.
   The relation <span class="inlinecode"><span class="id" title="var">R</span></span> will be instantiated by <span class="inlinecode"><span class="id" title="var">respectful</span></span> and <span class="inlinecode"><span class="id" title="var">A</span></span> by an arrow
   type for usual morphisms. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Section</span> <span class="nf">Proper</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Let</span> <span class="nf">U</span> := <span class="kt">Type</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Context</span> {<span class="nv">A</span> <span class="nv">B</span> : U}.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Class</span> <span class="nf">Proper</span> (<span class="nv">R</span> : relation A) (<span class="nv">m</span> : A) : <span class="kt">Prop</span> :=
    proper_prf : R m m.</span></span></span></pre><div class="doc">
Every element in the carrier of a reflexive relation is a morphism
   for this relation.  We use a proxy class for this case which is used
   internally to discharge reflexivity constraints.  The <span class="inlinecode"><span class="id" title="var">Reflexive</span></span>
   instance will almost always be used, but it won't apply in general to
   any kind of <span class="inlinecode"><span class="id" title="var">Proper</span></span> <span class="inlinecode">(<span class="id" title="var">A</span></span> <span class="inlinecode">‚Üí</span> <span class="inlinecode"><span class="id" title="var">B</span>)</span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> goal, making proof-search much
   slower. A cleaner solution would be to be able to set different
   priorities in different hint bases and select a particular hint
   database for resolution of a type class constraint. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Class</span> <span class="nf">ProperProxy</span> (<span class="nv">R</span> : relation A) (<span class="nv">m</span> : A) : <span class="kt">Prop</span> :=
    proper_proxy : R m m.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk0" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk0"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">eq_proper_proxy</span> (<span class="nv">x</span> : A) : ProperProxy (@eq A) x.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">ProperProxy eq x</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk1" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk1"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">ProperProxy eq x</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">firstorder</span>.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">  
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk2" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk2"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">reflexive_proper_proxy</span> `(Reflexive A R) (x : A) : ProperProxy R x.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Reflexive R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">ProperProxy R x</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk3" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk3"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Reflexive R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">ProperProxy R x</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">firstorder</span>.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk4" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk4"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">proper_proper_proxy</span> <span class="nv">x</span> `(Proper R x) : ProperProxy R x.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper R x</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">ProperProxy R x</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk5" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk5"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper R x</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">ProperProxy R x</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">firstorder</span>.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Respectful morphisms. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">  </span></span></pre><div class="doc">
The fully dependent version, not used yet. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">respectful_hetero</span>
  (<span class="nv">A</span> <span class="nv">B</span> : <span class="kt">Type</span>)
  (<span class="nv">C</span> : A -&gt; <span class="kt">Type</span>) (<span class="nv">D</span> : B -&gt; <span class="kt">Type</span>)
  (<span class="nv">R</span> : A -&gt; B -&gt; <span class="kt">Prop</span>)
  (<span class="nv">R&#39;</span> : <span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">y</span> : B), C x -&gt; D y -&gt; <span class="kt">Prop</span>) :
    (<span class="kr">forall</span> <span class="nv">x</span> : A, C x) -&gt; (<span class="kr">forall</span> <span class="nv">x</span> : B, D x) -&gt; <span class="kt">Prop</span> :=
    <span class="kr">fun</span> <span class="nv">f</span> <span class="nv">g</span> =&gt; <span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span>, R x y -&gt; R&#39; x y (f x) (g y).</span></span></span></pre><div class="doc">
The non-dependent version is an instance where we forget dependencies. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">respectful</span> (<span class="nv">R</span> : relation A) (<span class="nv">R&#39;</span> : relation B) : relation (A -&gt; B) :=
    <span class="kn">Eval</span> <span class="nb">compute</span> <span class="kr">in</span> @respectful_hetero A A (<span class="kr">fun</span> <span class="nv">_</span> =&gt; B) (<span class="kr">fun</span> <span class="nv">_</span> =&gt; B) R (<span class="kr">fun</span> <span class="nv">_</span> <span class="nv">_</span> =&gt; R&#39;).</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">End</span> <span class="nf">Proper</span>.</span></span></span></pre><div class="doc">
We favor the use of Leibniz equality or a declared reflexive relation 
  when resolving <span class="inlinecode"><span class="id" title="var">ProperProxy</span></span>, otherwise, if the relation is given (not an evar),
  we fall back to <span class="inlinecode"><span class="id" title="var">Proper</span></span>. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Hint Extern</span> <span class="mi">1</span> (ProperProxy _ _) =&gt; 
  class_apply @eq_proper_proxy || class_apply @reflexive_proper_proxy : typeclass_instances.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Hint Extern</span> <span class="mi">2</span> (ProperProxy ?R _) =&gt; 
  not_evar R; class_apply @proper_proper_proxy : typeclass_instances.</span></span></span></pre><div class="doc">
Notations reminiscent of the old syntax for declaring morphisms. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Declare Scope</span> signature_scope.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Delimit Scope</span> signature_scope <span class="kn">with signature</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Module</span> <span class="nf">ProperNotations</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Notation</span> <span class="s2">&quot; R ++&gt; R&#39; &quot;</span> := (@respectful _ _ (R%signature) (R&#39;%signature))
    (<span class="kn">right associativity</span>, <span class="kn">at level</span> <span class="mi">55</span>) : signature_scope.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Notation</span> <span class="s2">&quot; R ==&gt; R&#39; &quot;</span> := (@respectful _ _ (R%signature) (R&#39;%signature))
    (<span class="kn">right associativity</span>, <span class="kn">at level</span> <span class="mi">55</span>) : signature_scope.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Notation</span> <span class="s2">&quot; R --&gt; R&#39; &quot;</span> := (@respectful _ _ (flip (R%signature)) (R&#39;%signature))
    (<span class="kn">right associativity</span>, <span class="kn">at level</span> <span class="mi">55</span>) : signature_scope.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">End</span> <span class="nf">ProperNotations</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Arguments</span> Proper {A}%type R%signature m.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Arguments</span> respectful {A B}%type (R R&#39;)%signature _ _.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Export</span> ProperNotations.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Local Open Scope</span> signature_scope.</span></span></span></pre><div class="doc">
<span class="inlinecode"><span class="id" title="var">solve_proper</span></span> try to solve the goal <span class="inlinecode"><span class="id" title="var">Proper</span></span> <span class="inlinecode">(?==&gt;</span> <span class="inlinecode">...</span> <span class="inlinecode">==&gt;?)</span> <span class="inlinecode"><span class="id" title="var">f</span></span>
    by repeated introductions and setoid rewrites. It should work
    fine when <span class="inlinecode"><span class="id" title="var">f</span></span> is a combination of already known morphisms and
    quantifiers. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Ltac</span> <span class="nf">solve_respectful</span> t :=
 <span class="kr">match goal with</span>
   | |- respectful _ _ _ _ =&gt;
     <span class="kr">let</span> <span class="nv">H</span> := <span class="kp">fresh</span> <span class="s2">&quot;H&quot;</span> <span class="kr">in</span>
     <span class="nb">intros</span> ? ? H; solve_respectful <span class="kp">ltac</span>:(<span class="nb">setoid_rewrite</span> H; t)
   | _ =&gt; t; <span class="bp">reflexivity</span>
 <span class="kr">end</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Ltac</span> <span class="nf">solve_proper</span> := <span class="nb">unfold</span> Proper; solve_respectful <span class="kp">ltac</span>:(<span class="kp">idtac</span>).</span></span></span></pre><div class="doc">
<span class="inlinecode"><span class="id" title="var">f_equiv</span></span> is a clone of <span class="inlinecode"><span class="id" title="tactic">f_equal</span></span> that handles setoid equivalences.
    For example, if we know that <span class="inlinecode"><span class="id" title="var">f</span></span> is a morphism for <span class="inlinecode"><span class="id" title="var">E1</span>==&gt;<span class="id" title="var">E2</span>==&gt;<span class="id" title="var">E</span></span>,
    then the goal <span class="inlinecode"><span class="id" title="var">E</span></span> <span class="inlinecode">(<span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">y</span>)</span> <span class="inlinecode">(<span class="id" title="var">f</span></span> <span class="inlinecode"><span class="id" title="var">x'</span></span> <span class="inlinecode"><span class="id" title="var">y'</span>)</span> will be transformed by <span class="inlinecode"><span class="id" title="var">f_equiv</span></span>
    into the subgoals <span class="inlinecode"><span class="id" title="var">E1</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">x'</span></span> and <span class="inlinecode"><span class="id" title="var">E2</span></span> <span class="inlinecode"><span class="id" title="var">y</span></span> <span class="inlinecode"><span class="id" title="var">y'</span></span>.

</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Ltac</span> <span class="nf">f_equiv</span> :=
 <span class="kr">match goal with</span>
  | |- ?R (?f ?x) (?f&#39; _) =&gt;
    <span class="kr">let</span> <span class="nv">T</span> := <span class="kp">type of</span> x <span class="kr">in</span>
    <span class="kr">let</span> <span class="nv">Rx</span> := <span class="kp">fresh</span> <span class="s2">&quot;R&quot;</span> <span class="kr">in</span>
    <span class="nb">evar</span> (Rx : relation T);
    <span class="kr">let</span> <span class="nv">H</span> := <span class="kp">fresh</span> <span class="kr">in</span>
    <span class="nb">assert</span> (H : (Rx==&gt;R)%signature f f&#39;);
    <span class="nb">unfold</span> Rx <span class="kr">in</span> *; <span class="nb">clear</span> Rx; [ f_equiv | <span class="nb">apply</span> H; <span class="nb">clear</span> H; <span class="kp">try</span> <span class="bp">reflexivity</span> ]
  | |- ?R ?f ?f&#39; =&gt;
    <span class="kp">solve</span> [<span class="nb">change</span> (Proper R f); <span class="nb">eauto with</span> typeclass_instances | <span class="bp">reflexivity</span> ]
  | _ =&gt; <span class="kp">idtac</span>
 <span class="kr">end</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Section</span> <span class="nf">Relations</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Let</span> <span class="nf">U</span> := <span class="kt">Type</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Context</span> {<span class="nv">A</span> <span class="nv">B</span> : U} (<span class="nv">P</span> : A -&gt; U).</span></span></span></pre><div class="doc">
<span class="inlinecode"><span class="id" title="var">forall_def</span></span> reifies the dependent product as a definition. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">forall_def</span> : <span class="kt">Type</span> := <span class="kr">forall</span> <span class="nv">x</span> : A, P x.</span></span></span></pre><div class="doc">
Dependent pointwise lifting of a relation on the range. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">forall_relation</span> 
             (<span class="nv">sig</span> : <span class="kr">forall</span> <span class="nv">a</span>, relation (P a)) : relation (<span class="kr">forall</span> <span class="nv">x</span>, P x) :=
    <span class="kr">fun</span> <span class="nv">f</span> <span class="nv">g</span> =&gt; <span class="kr">forall</span> <span class="nv">a</span>, sig a (f a) (g a).</span></span></span></pre><div class="doc">
Non-dependent pointwise lifting 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">pointwise_relation</span> (<span class="nv">R</span> : relation B) : relation (A -&gt; B) :=
    <span class="kr">fun</span> <span class="nv">f</span> <span class="nv">g</span> =&gt; <span class="kr">forall</span> <span class="nv">a</span>, R (f a) (g a).</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk6" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk6"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">pointwise_pointwise</span> (<span class="nv">R</span> : relation B) :
    relation_equivalence (pointwise_relation R) (@eq A ==&gt; R).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">relation_equivalence (pointwise_relation R) (eq ==&gt; R)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk7" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk7"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">relation_equivalence (pointwise_relation R) (eq ==&gt; R)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk8" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk8"><span class="highlight"><span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">relation_equivalence (pointwise_relation R) (eq ==&gt; R)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">split</span>; reduce; <span class="nb">subst</span>; <span class="nb">firstorder</span>.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Subrelations induce a morphism on the identity. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">  </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk9" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk9"><span class="highlight"><span class="kn">Instance</span> <span class="nf">subrelation_id_proper</span> `(subrelation A RA RA&#39;) : Proper (RA ==&gt; RA&#39;) id.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RA, RA'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">subrelation RA RA&#39;</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">Proper (RA ==&gt; RA&#39;) id</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chka" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chka"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RA, RA'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">subrelation RA RA&#39;</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">Proper (RA ==&gt; RA&#39;) id</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">firstorder</span>.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
The subrelation property goes through products as usual. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">  </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chkb" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chkb"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">subrelation_respectful</span> `(subl : subrelation A RA&#39; RA, subr : subrelation B RB RB&#39;) :
    subrelation (RA ==&gt; RB) (RA&#39; ==&gt; RB&#39;).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RA', RA</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">subl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">subrelation RA&#39; RA</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RB, RB'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">subr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">subrelation RB RB&#39;</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">subrelation (RA ==&gt; RB) (RA&#39; ==&gt; RB&#39;)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chkc" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chkc"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RA', RA</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">subl</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">subrelation RA&#39; RA</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RB, RB'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">subr</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">subrelation RB RB&#39;</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">subrelation (RA ==&gt; RB) (RA&#39; ==&gt; RB&#39;)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">unfold</span> subrelation <span class="kr">in</span> *; <span class="nb">firstorder</span>.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
And of course it is reflexive. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">  </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chkd" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chkd"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">subrelation_refl</span> <span class="nv">R</span> : @subrelation A R R.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">subrelation R R</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chke" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chke"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">subrelation R R</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">unfold</span> subrelation; <span class="nb">firstorder</span>.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
<span class="inlinecode"><span class="id" title="var">Proper</span></span> is itself a covariant morphism for <span class="inlinecode"><span class="id" title="var">subrelation</span></span>.
   We use an unconvertible premise to avoid looping.
   
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">  </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chkf" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chkf"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">subrelation_proper</span> `(mor : Proper A R&#39; m) 
        `(unc : Unconvertible (relation A) R R&#39;)
        `(sub : subrelation A R&#39; R) : Proper R m.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">mor</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper R&#39; m</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">unc</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Unconvertible (relation A) R R&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">subrelation R&#39; R</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">Proper R m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk10" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk10"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">mor</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper R&#39; m</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">unc</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Unconvertible (relation A) R R&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">subrelation R&#39; R</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">Proper R m</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk11" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk11"><span class="highlight"><span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">mor</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper R&#39; m</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">unc</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Unconvertible (relation A) R R&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">subrelation R&#39; R</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">Proper R m</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk12" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk12"><span class="highlight"><span class="nb">apply</span> sub.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">mor</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper R&#39; m</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">unc</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Unconvertible (relation A) R R&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">subrelation R&#39; R</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R&#39; m m</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> mor.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk13" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk13"><span class="highlight"><span class="kn">Instance</span> <span class="nf">proper_subrelation_proper</span> :
    Proper (subrelation ++&gt; eq ==&gt; impl) (@Proper A).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; U</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">Proper (subrelation ==&gt; eq ==&gt; impl) Proper</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk14" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk14"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; U</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">Proper (subrelation ==&gt; eq ==&gt; impl) Proper</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk15" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk15"><span class="highlight">reduce.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">subrelation x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">x0 = y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper x x0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">y y0 y0</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk16" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk16"><span class="highlight"><span class="nb">subst</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">subrelation x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper x y0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">y y0 y0</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">firstorder</span>.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk17" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk17"><span class="highlight"><span class="kn">Instance</span> <span class="nf">pointwise_subrelation</span> `(sub : subrelation B R R&#39;) :
    subrelation (pointwise_relation R) (pointwise_relation R&#39;) | <span class="mi">4</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R, R'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">subrelation R R&#39;</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">subrelation (pointwise_relation R)
  (pointwise_relation R&#39;)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk18" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk18"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R, R'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">subrelation R R&#39;</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">subrelation (pointwise_relation R)
  (pointwise_relation R&#39;)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk19" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk19"><span class="highlight">reduce.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R, R'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">subrelation R R&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">pointwise_relation R x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R&#39; (x a) (y a)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk1a" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk1a"><span class="highlight"><span class="nb">unfold</span> pointwise_relation <span class="kr">in</span> *.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R, R'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">subrelation R R&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">a0</span> : A, R (x a0) (y a0)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R&#39; (x a) (y a)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk1b" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk1b"><span class="highlight"><span class="nb">apply</span> sub.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R, R'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">sub</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">subrelation R R&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">a0</span> : A, R (x a0) (y a0)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R (x a) (y a)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> H.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
For dependent function types. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">  </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk1c" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk1c"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">forall_subrelation</span> (<span class="nv">R</span> <span class="nv">S</span> : <span class="kr">forall</span> <span class="nv">x</span> : A, relation (P x)) :
    (<span class="kr">forall</span> <span class="nv">a</span>, subrelation (R a) (S a)) -&gt; subrelation (forall_relation R) (forall_relation S).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R, S</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A, relation (P x)</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">(<span class="kr">forall</span> <span class="nv">a</span> : A, subrelation (R a) (S a)) -&gt;
subrelation (forall_relation R) (forall_relation S)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk1d" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk1d"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R, S</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A, relation (P x)</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">(<span class="kr">forall</span> <span class="nv">a</span> : A, subrelation (R a) (S a)) -&gt;
subrelation (forall_relation R) (forall_relation S)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk1e" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk1e"><span class="highlight">reduce.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R, S</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A, relation (P x0)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">a0</span> : A, subrelation (R a0) (S a0)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A, P x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">forall_relation R x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">S a (x a) (y a)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk1f" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk1f"><span class="highlight"><span class="nb">apply</span> H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R, S</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A, relation (P x0)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">a0</span> : A, subrelation (R a0) (S a0)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A, P x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">forall_relation R x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R a (x a) (y a)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> H0.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">End</span> <span class="nf">Relations</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Typeclasses Opaque</span> respectful pointwise_relation forall_relation.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Arguments</span> forall_relation {A P}%type sig%signature _ _.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Arguments</span> pointwise_relation A%type {B}%type R%signature _ _.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">  
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Hint Unfold</span> Reflexive : core.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Hint Unfold</span> Symmetric : core.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Hint Unfold</span> Transitive : core.</span></span></span></pre><div class="doc">
Resolution with subrelation: favor decomposing products over applying reflexivity
  for unconstrained goals. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Ltac</span> <span class="nf">subrelation_tac</span> T U :=
  (is_ground T ; is_ground U ; class_apply @subrelation_refl) ||
    class_apply @subrelation_respectful || class_apply @subrelation_refl.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Hint Extern</span> <span class="mi">3</span> (@subrelation _ ?T ?U) =&gt; subrelation_tac T U : typeclass_instances.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">CoInductive</span> <span class="nf">apply_subrelation</span> : <span class="kt">Prop</span> := do_subrelation.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Ltac</span> <span class="nf">proper_subrelation</span> :=
  <span class="kr">match goal with</span>
    [ H : apply_subrelation |- _ ] =&gt; <span class="nb">clear</span> H ; class_apply @subrelation_proper
  <span class="kr">end</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Hint Extern</span> <span class="mi">5</span> (@Proper _ ?H _) =&gt; proper_subrelation : typeclass_instances.</span></span></span></pre><div class="doc">
Essential subrelation instances for <span class="inlinecode"><span class="id" title="var">iff</span></span>, <span class="inlinecode"><span class="id" title="var">impl</span></span> and <span class="inlinecode"><span class="id" title="var">pointwise_relation</span></span>. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk20" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk20"><span class="highlight"><span class="kn">Instance</span> <span class="nf">iff_impl_subrelation</span> : subrelation iff impl | <span class="mi">2</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">subrelation iff impl</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk21" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk21"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">subrelation iff impl</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">firstorder</span>.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk22" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk22"><span class="highlight"><span class="kn">Instance</span> <span class="nf">iff_flip_impl_subrelation</span> : subrelation iff (flip impl) | <span class="mi">2</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">subrelation iff (flip impl)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk23" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk23"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">subrelation iff (flip impl)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">firstorder</span>.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
We use an extern hint to help unification. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Hint Extern</span> <span class="mi">4</span> (subrelation (@forall_relation ?A ?B ?R) (@forall_relation _ _ ?S)) =&gt;
  <span class="nb">apply</span> (@forall_subrelation A B R S) ; <span class="nb">intro</span> : typeclass_instances.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Section</span> <span class="nf">GenericInstances</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">  <span class="c">(* Share universes *)</span>
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Let</span> <span class="nf">U</span> := <span class="kt">Type</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Context</span> {<span class="nv">A</span> <span class="nv">B</span> <span class="nv">C</span> : U}.</span></span></span></pre><div class="doc">
We can build a PER on the Coq function space if we have PERs on the domain and
   codomain. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Instance</span> <span class="nf">respectful_per</span> `(PER A R, PER B R&#39;) : PER (R ==&gt; R&#39;).</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk24" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk24"><span class="highlight"><span class="kn">Next Obligation</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y, z</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(R ==&gt; R&#39;) x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(R ==&gt; R&#39;) y z</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R&#39; (x x0) (z y0)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk25" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk25"><span class="highlight"><span class="kn">Proof with</span> <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y, z</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(R ==&gt; R&#39;) x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(R ==&gt; R&#39;) y z</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R&#39; (x x0) (z y0)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk26" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk26"><span class="highlight"><span class="nb">assert</span>(R x0 x0).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y, z</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(R ==&gt; R&#39;) x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(R ==&gt; R&#39;) y z</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R x0 x0</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Morphisms-v-chk27" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y, z</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(R ==&gt; R&#39;) x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(R ==&gt; R&#39;) y z</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 x0</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Morphisms-v-chk27"><hr></label><div class="goal-conclusion"><span class="highlight">R&#39; (x x0) (z y0)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk28" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk28"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y, z</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(R ==&gt; R&#39;) x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(R ==&gt; R&#39;) y z</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R x0 x0</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk29" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk29"><span class="highlight"><span class="nb">transitivity</span> y0...</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y, z</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(R ==&gt; R&#39;) x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(R ==&gt; R&#39;) y z</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R y0 x0</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">symmetry</span>...</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk2a" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk2a"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R&#39;</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y, z</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(R ==&gt; R&#39;) x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(R ==&gt; R&#39;) y z</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H3</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H4</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 x0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R&#39; (x x0) (z y0)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">transitivity</span> (y x0)...</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
The complement of a relation conserves its proper elements. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">complement_proper</span>
          `(mR : Proper (A -&gt; A -&gt; <span class="kt">Prop</span>) (RA ==&gt; RA ==&gt; iff) R) :
    Proper (RA ==&gt; RA ==&gt; iff) (complement R) := _.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">  
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk2b" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk2b"><span class="highlight"><span class="kn">Next Obligation</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RA</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">mR</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper (RA ==&gt; RA ==&gt; iff) R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">RA x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">RA x0 y0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">complement R x x0 &lt;-&gt; complement R y y0</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk2c" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk2c"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RA</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">mR</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper (RA ==&gt; RA ==&gt; iff) R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">RA x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">RA x0 y0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">complement R x x0 &lt;-&gt; complement R y y0</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk2d" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk2d"><span class="highlight"><span class="nb">unfold</span> complement.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RA</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">mR</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper (RA ==&gt; RA ==&gt; iff) R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">RA x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">RA x0 y0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">(R x x0 -&gt; <span class="kt">False</span>) &lt;-&gt; (R y y0 -&gt; <span class="kt">False</span>)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk2e" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk2e"><span class="highlight"><span class="nb">pose</span> (mR x y H x0 y0 H0).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RA</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">mR</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper (RA ==&gt; RA ==&gt; iff) R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">RA x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">RA x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">i</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight">mR x y H x0 y0 H0</span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x x0 &lt;-&gt; R y y0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">(R x x0 -&gt; <span class="kt">False</span>) &lt;-&gt; (R y y0 -&gt; <span class="kt">False</span>)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">intuition</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
The <span class="inlinecode"><span class="id" title="var">flip</span></span> too, actually the <span class="inlinecode"><span class="id" title="var">flip</span></span> instance is a bit more general. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">flip_proper</span>
          `(mor : Proper (A -&gt; B -&gt; C) (RA ==&gt; RB ==&gt; RC) f) :
    Proper (RB ==&gt; RA ==&gt; RC) (flip f) := _.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">  
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk2f" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk2f"><span class="highlight"><span class="kn">Next Obligation</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RA</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RB</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RC</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation C</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; B -&gt; C</span></span></span></div><div class="goal-hyp"><span class="hyp-names">mor</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper (RA ==&gt; RB ==&gt; RC) f</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">RB x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">RA x0 y0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">RC (f x0 x) (f y0 y)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk30" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk30"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RA</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RB</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RC</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation C</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; B -&gt; C</span></span></span></div><div class="goal-hyp"><span class="hyp-names">mor</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper (RA ==&gt; RB ==&gt; RC) f</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">RB x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">RA x0 y0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">RC (f x0 x) (f y0 y)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> mor ; <span class="nb">auto</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Every Transitive relation gives rise to a binary morphism on <span class="inlinecode"><span class="id" title="var">impl</span></span>,
   contravariant in the first argument, covariant in the second. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Global</span> Program 
  <span class="kn">Instance</span> <span class="nf">trans_contra_co_morphism</span>
    `(Transitive A R) : Proper (R --&gt; R ++&gt; impl) R.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">  
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk31" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk31"><span class="highlight"><span class="kn">Next Obligation</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Transitive R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R y x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x x0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R y y0</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk32" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk32"><span class="highlight"><span class="kn">Proof with</span> <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Transitive R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R y x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x x0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R y y0</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk33" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk33"><span class="highlight"><span class="nb">transitivity</span> x...</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Transitive R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R y x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x x0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R x y0</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">transitivity</span> x0...</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Proper declarations for partial applications. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Global</span> Program 
  <span class="kn">Instance</span> <span class="nf">trans_contra_inv_impl_morphism</span>
  `(Transitive A R) : Proper (R --&gt; flip impl) (R x) | <span class="mi">3</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk34" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk34"><span class="highlight"><span class="kn">Next Obligation</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Transitive R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R y x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x y</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R x x0</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk35" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk35"><span class="highlight"><span class="kn">Proof with</span> <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Transitive R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R y x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x y</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R x x0</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">transitivity</span> y...</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Global</span> Program 
  <span class="kn">Instance</span> <span class="nf">trans_co_impl_morphism</span>
    `(Transitive A R) : Proper (R ++&gt; impl) (R x) | <span class="mi">3</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk36" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk36"><span class="highlight"><span class="kn">Next Obligation</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Transitive R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x x0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R x y</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk37" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk37"><span class="highlight"><span class="kn">Proof with</span> <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Transitive R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x x0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R x y</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">transitivity</span> x0...</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Global</span> Program 
  <span class="kn">Instance</span> <span class="nf">trans_sym_co_inv_impl_morphism</span>
    `(PER A R) : Proper (R ++&gt; flip impl) (R x) | <span class="mi">3</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk38" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk38"><span class="highlight"><span class="kn">Next Obligation</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x y</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R x x0</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk39" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk39"><span class="highlight"><span class="kn">Proof with</span> <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x y</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R x x0</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk3a" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk3a"><span class="highlight"><span class="nb">transitivity</span> y...</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x y</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R y x0</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">symmetry</span>...</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Instance</span> <span class="nf">trans_sym_contra_impl_morphism</span>
    `(PER A R) : Proper (R --&gt; impl) (R x) | <span class="mi">3</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk3b" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk3b"><span class="highlight"><span class="kn">Next Obligation</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R y x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x x0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R x y</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk3c" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk3c"><span class="highlight"><span class="kn">Proof with</span> <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R y x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x x0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R x y</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk3d" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk3d"><span class="highlight"><span class="nb">transitivity</span> x0...</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R y x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x x0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R x0 y</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">symmetry</span>...</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Instance</span> <span class="nf">per_partial_app_morphism</span>
  `(PER A R) : Proper (R ==&gt; iff) (R x) | <span class="mi">2</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk3e" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk3e"><span class="highlight"><span class="kn">Next Obligation</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R x x0 &lt;-&gt; R x y</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk3f" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk3f"><span class="highlight"><span class="kn">Proof with</span> <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R x x0 &lt;-&gt; R x y</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk40" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk40"><span class="highlight"><span class="nb">split</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R x x0 -&gt; R x y</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Morphisms-v-chk41" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Morphisms-v-chk41"><hr></label><div class="goal-conclusion"><span class="highlight">R x y -&gt; R x x0</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk42" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk42"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R x x0 -&gt; R x y</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">intros</span> ; <span class="nb">transitivity</span> x0...</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk43" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk43"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R x y -&gt; R x x0</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk44" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk44"><span class="highlight"><span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x y</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R x x0</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk45" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk45"><span class="highlight"><span class="nb">transitivity</span> y...</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x y</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R y x0</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">symmetry</span>...</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Every Transitive relation induces a morphism by "pushing" an <span class="inlinecode"><span class="id" title="var">R</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">y</span></span> on the left of an <span class="inlinecode"><span class="id" title="var">R</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">z</span></span> proof to get an <span class="inlinecode"><span class="id" title="var">R</span></span> <span class="inlinecode"><span class="id" title="var">y</span></span> <span class="inlinecode"><span class="id" title="var">z</span></span> goal. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Global</span> Program 
  <span class="kn">Instance</span> <span class="nf">trans_co_eq_inv_impl_morphism</span>
  `(Transitive A R) : Proper (R ==&gt; (@eq A) ==&gt; flip impl) R | <span class="mi">2</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk46" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk46"><span class="highlight"><span class="kn">Next Obligation</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Transitive R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R y y0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R x y0</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk47" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk47"><span class="highlight"><span class="kn">Proof with</span> <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Transitive R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R y y0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R x y0</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">transitivity</span> y...</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Every Symmetric and Transitive relation gives rise to an equivariant morphism. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Global</span> Program 
  <span class="kn">Instance</span> <span class="nf">PER_morphism</span> `(PER A R) : Proper (R ==&gt; R ==&gt; iff) R | <span class="mi">1</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk48" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk48"><span class="highlight"><span class="kn">Next Obligation</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R x x0 &lt;-&gt; R y y0</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk49" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk49"><span class="highlight"><span class="kn">Proof with</span> <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R x x0 &lt;-&gt; R y y0</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk4a" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk4a"><span class="highlight"><span class="nb">split</span> ; <span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x x0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R y y0</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Morphisms-v-chk4b" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R y y0</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Morphisms-v-chk4b"><hr></label><div class="goal-conclusion"><span class="highlight">R x x0</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk4c" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk4c"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x x0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R y y0</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk4d" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk4d"><span class="highlight"><span class="nb">transitivity</span> x0...</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x x0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R y x0</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk4e" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk4e"><span class="highlight"><span class="nb">transitivity</span> x...</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x x0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R y x</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">symmetry</span>...</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk4f" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk4f"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R y y0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R x x0</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk50" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk50"><span class="highlight"><span class="nb">transitivity</span> y...</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R y y0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R y x0</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk51" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk51"><span class="highlight"><span class="nb">transitivity</span> y0...</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">PER R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R y y0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">R y0 x0</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">symmetry</span>...</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk52" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk52"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">symmetric_equiv_flip</span> `(Symmetric A R) : relation_equivalence R (flip R).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Symmetric R</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">relation_equivalence R (flip R)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk53" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk53"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Symmetric R</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">relation_equivalence R (flip R)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">firstorder</span>.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Instance</span> <span class="nf">compose_proper</span> <span class="nv">RA</span> <span class="nv">RB</span> <span class="nv">RC</span> :
    Proper ((RB ==&gt; RC) ==&gt; (RA ==&gt; RB) ==&gt; (RA ==&gt; RC)) (@compose A B C).</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk54" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk54"><span class="highlight"><span class="kn">Next Obligation</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RA</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RB</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RC</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation C</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">B -&gt; C</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(RB ==&gt; RC) x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(RA ==&gt; RB) x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1, y1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">RA x1 y1</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">RC (compose x x0 x1) (compose y y0 y1)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk55" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk55"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RA</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RB</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RC</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation C</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">B -&gt; C</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(RB ==&gt; RC) x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(RA ==&gt; RB) x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1, y1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">RA x1 y1</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">RC (compose x x0 x1) (compose y y0 y1)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk56" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk56"><span class="highlight">simpl_relation.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RA</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RB</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RC</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation C</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">B -&gt; C</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(RB ==&gt; RC) x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(RA ==&gt; RB) x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1, y1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">RA x1 y1</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">RC (compose x x0 x1) (compose y y0 y1)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk57" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk57"><span class="highlight"><span class="nb">unfold</span> compose.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RA</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RB</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RC</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation C</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">B -&gt; C</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(RB ==&gt; RC) x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(RA ==&gt; RB) x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1, y1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">RA x1 y1</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">RC (x (x0 x1)) (y (y0 y1))</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk58" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk58"><span class="highlight"><span class="nb">apply</span> H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RA</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RB</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RC</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation C</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">B -&gt; C</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(RB ==&gt; RC) x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(RA ==&gt; RB) x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1, y1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">RA x1 y1</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">RB (x0 x1) (y0 y1)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk59" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk59"><span class="highlight"><span class="nb">apply</span> H0.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RA</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RB</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">RC</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation C</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">B -&gt; C</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(RB ==&gt; RC) x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">(RA ==&gt; RB) x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1, y1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">RA x1 y1</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">RA x1 y1</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> H1.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Coq functions are morphisms for Leibniz equality,
     applied only if really needed. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">  </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk5a" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk5a"><span class="highlight"><span class="kn">Instance</span> <span class="nf">reflexive_eq_dom_reflexive</span> `(Reflexive B R&#39;) :
    Reflexive (@Logic.eq A ==&gt; R&#39;).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Reflexive R&#39;</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">Reflexive (eq ==&gt; R&#39;)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk5b" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk5b"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Reflexive R&#39;</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">Reflexive (eq ==&gt; R&#39;)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight">simpl_relation.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
<span class="inlinecode"><span class="id" title="var">respectful</span></span> is a morphism for relation equivalence. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">  </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk5c" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk5c"><span class="highlight"><span class="kn">Instance</span> <span class="nf">respectful_morphism</span> :
    Proper (relation_equivalence ++&gt; relation_equivalence ++&gt; relation_equivalence) 
           (@respectful A B).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">Proper
  (relation_equivalence ==&gt;
   relation_equivalence ==&gt; relation_equivalence)
  respectful</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk5d" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk5d"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">Proper
  (relation_equivalence ==&gt;
   relation_equivalence ==&gt; relation_equivalence)
  respectful</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk5e" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk5e"><span class="highlight">reduce.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation_equivalence x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation_equivalence x0 y0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1, x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; B</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">(x ==&gt; x0) x1 x2 &lt;-&gt; (y ==&gt; y0) x1 x2</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk5f" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk5f"><span class="highlight"><span class="nb">unfold</span> respectful, relation_equivalence, predicate_equivalence <span class="kr">in</span> * ; <span class="nb">simpl</span> <span class="kr">in</span> *.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x3</span> <span class="nv">x4</span> : A, x x3 x4 &lt;-&gt; y x3 x4</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x3</span> <span class="nv">x4</span> : B, x0 x3 x4 &lt;-&gt; y0 x3 x4</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1, x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; B</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">(<span class="kr">forall</span> <span class="nv">x3</span> <span class="nv">y1</span> : A, x x3 y1 -&gt; x0 (x1 x3) (x2 y1)) &lt;-&gt;
(<span class="kr">forall</span> <span class="nv">x3</span> <span class="nv">y1</span> : A, y x3 y1 -&gt; y0 (x1 x3) (x2 y1))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk60" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk60"><span class="highlight"><span class="nb">split</span> ; <span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x4</span> <span class="nv">x5</span> : A, x x4 x5 &lt;-&gt; y x4 x5</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x4</span> <span class="nv">x5</span> : B, x0 x4 x5 &lt;-&gt; y0 x4 x5</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1, x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x4</span> <span class="nv">y2</span> : A, x x4 y2 -&gt; x0 (x1 x4) (x2 y2)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x3, y1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">y x3 y1</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">y0 (x1 x3) (x2 y1)</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Morphisms-v-chk61" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x4</span> <span class="nv">x5</span> : A, x x4 x5 &lt;-&gt; y x4 x5</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x4</span> <span class="nv">x5</span> : B, x0 x4 x5 &lt;-&gt; y0 x4 x5</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1, x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x4</span> <span class="nv">y2</span> : A, y x4 y2 -&gt; y0 (x1 x4) (x2 y2)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x3, y1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">x x3 y1</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Morphisms-v-chk61"><hr></label><div class="goal-conclusion"><span class="highlight">x0 (x1 x3) (x2 y1)</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">    
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk62" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk62"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x4</span> <span class="nv">x5</span> : A, x x4 x5 &lt;-&gt; y x4 x5</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0, y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x4</span> <span class="nv">x5</span> : B, x0 x4 x5 &lt;-&gt; y0 x4 x5</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1, x2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x4</span> <span class="nv">y2</span> : A, x x4 y2 -&gt; x0 (x1 x4) (x2 y2)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x3, y1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H2</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">y x3 y1</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">y0 (x1 x3) (x2 y1)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk63" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk63"><span class="highlight"><span class="nb">rewrite</span> &lt;- H0.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-responses"><blockquote class="coq-response"><span class="highlight">Tactic failure: Setoid library not loaded.</span></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> H1.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">rewrite</span> H.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><span class="coq-input"><span class="highlight">-</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">rewrite</span> H0.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> H1.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">rewrite</span> &lt;- H.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
<span class="inlinecode"><span class="id" title="var">R</span></span> is Reflexive, hence we can build the needed proof. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">  </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk64" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk64"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">Reflexive_partial_app_morphism</span> `(Proper (A -&gt; B) (R ==&gt; R&#39;) m, ProperProxy A R x) :
    Proper R&#39; (m x).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper (R ==&gt; R&#39;) m</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">ProperProxy R x</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">Proper R&#39; (m x)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk65" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk65"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; B</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper (R ==&gt; R&#39;) m</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">ProperProxy R x</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">Proper R&#39; (m x)</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight">simpl_relation.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">  
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk66" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk66"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">flip_respectful</span> (<span class="nv">R</span> : relation A) (<span class="nv">R&#39;</span> : relation B) :
    relation_equivalence (flip (R ==&gt; R&#39;)) (flip R ==&gt; flip R&#39;).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">relation_equivalence (flip (R ==&gt; R&#39;)) (R --&gt; flip R&#39;)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk67" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk67"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">relation_equivalence (flip (R ==&gt; R&#39;)) (R --&gt; flip R&#39;)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk68" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk68"><span class="highlight"><span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">relation_equivalence (flip (R ==&gt; R&#39;)) (R --&gt; flip R&#39;)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk69" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk69"><span class="highlight"><span class="nb">unfold</span> flip, respectful.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation B</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">relation_equivalence
  (<span class="kr">fun</span> <span class="nv">x</span> <span class="nv">y</span> : A -&gt; B =&gt;
   <span class="kr">forall</span> <span class="nv">x0</span> <span class="nv">y0</span> : A, R x0 y0 -&gt; R&#39; (y x0) (x y0))
  (<span class="kr">fun</span> <span class="nv">f</span> <span class="nv">g</span> : A -&gt; B =&gt;
   <span class="kr">forall</span> <span class="nv">x</span> <span class="nv">y</span> : A, R y x -&gt; R&#39; (g y) (f x))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">split</span> ; <span class="nb">intros</span> ; <span class="nb">intuition</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Treating flip: can't make them direct instances as we
   need at least a <span class="inlinecode"><span class="id" title="var">flip</span></span> present in the goal. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">  </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk6a" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk6a"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">flip1</span> `(subrelation A R&#39; R) : subrelation (flip (flip R&#39;)) R.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R', R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">subrelation R&#39; R</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">subrelation (flip (flip R&#39;)) R</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk6b" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk6b"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R', R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">subrelation R&#39; R</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">subrelation (flip (flip R&#39;)) R</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">firstorder</span>.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">  
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk6c" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk6c"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">flip2</span> `(subrelation A R R&#39;) : subrelation R (flip (flip R&#39;)).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R, R'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">subrelation R R&#39;</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">subrelation R (flip (flip R&#39;))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk6d" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk6d"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R, R'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">subrelation R R&#39;</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">subrelation R (flip (flip R&#39;))</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">firstorder</span>.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
That's if and only if 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">  </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk6e" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk6e"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">eq_subrelation</span> `(Reflexive A R) : subrelation (@eq A) R.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Reflexive R</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">subrelation eq R</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk6f" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk6f"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Reflexive R</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">subrelation eq R</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight">simpl_relation.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Once we have normalized, we will apply this instance to simplify the problem. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">proper_flip_proper</span> `(mor : Proper A R m) : Proper (flip R) m := mor.</span></span></span></pre><div class="doc">
Every reflexive relation gives rise to a morphism, 
  only for immediately solving goals without variables. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">  </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk70" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk70"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">reflexive_proper</span> `{Reflexive A R} (x : A) : Proper R x.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Reflexive R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">Proper R x</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk71" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk71"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Reflexive R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">Proper R x</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">firstorder</span>.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">  
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk72" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk72"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">proper_eq</span> (<span class="nv">x</span> : A) : Proper (@eq A) x.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">Proper eq x</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk73" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk73"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">Proper eq x</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk74" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk74"><span class="highlight"><span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">U</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kt">Type</span></span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">A, B, C</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">U</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">Proper eq x</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> reflexive_proper.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">  
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">End</span> <span class="nf">GenericInstances</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Class</span> <span class="nf">PartialApplication</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">CoInductive</span> <span class="nf">normalization_done</span> : <span class="kt">Prop</span> := did_normalization.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Class</span> <span class="nf">Params</span> {<span class="nv">A</span> : <span class="kt">Type</span>} (<span class="nv">of</span> : A) (<span class="nv">arity</span> : nat).</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Ltac</span> <span class="nf">partial_application_tactic</span> :=
  <span class="kr">let rec</span> <span class="nv">do_partial_apps</span> <span class="nv">H</span> <span class="nv">m</span> <span class="nv">cont</span> := 
    <span class="kr">match</span> m <span class="kr">with</span>
      | ?m&#39; ?x =&gt; class_apply @Reflexive_partial_app_morphism ; 
        [(do_partial_apps H m&#39; <span class="kp">ltac</span>:(<span class="kp">idtac</span>))|<span class="nb">clear</span> H]
      | _ =&gt; cont
    <span class="kr">end</span>
  <span class="kr">in</span>
  <span class="kr">let rec</span> <span class="nv">do_partial</span> <span class="nv">H</span> <span class="nv">ar</span> <span class="nv">m</span> := 
    <span class="kr">lazymatch</span> ar <span class="kr">with</span>
      | <span class="mi">0</span>%nat =&gt; do_partial_apps H m <span class="kp">ltac</span>:(<span class="kp">fail</span> <span class="mi">1</span>)
      | S ?n&#39; =&gt;
        <span class="kr">match</span> m <span class="kr">with</span>
          ?m&#39; ?x =&gt; do_partial H n&#39; m&#39;
        <span class="kr">end</span>
    <span class="kr">end</span>
  <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">params</span> <span class="nv">m</span> <span class="nv">sk</span> <span class="nv">fk</span> :=
    (<span class="kr">let</span> <span class="nv">m&#39;</span> := <span class="kp">fresh</span> <span class="kr">in</span> head_of_constr m&#39; m ;
     <span class="kr">let</span> <span class="nv">n</span> := <span class="kp">fresh</span> <span class="kr">in</span> <span class="nb">evar</span> (n:nat) ;
     <span class="kr">let</span> <span class="nv">v</span> := <span class="kp">eval</span> <span class="nb">compute</span> <span class="kr">in</span> n <span class="kr">in</span> <span class="nb">clear</span> n ;
      <span class="kr">let</span> <span class="nv">H</span> := <span class="kp">fresh</span> <span class="kr">in</span>
        <span class="nb">assert</span>(H:Params m&#39; v) <span class="bp">by</span> (<span class="nb">subst</span> m&#39;; <span class="kp">once</span> <span class="nb">typeclasses eauto</span>) ;
          <span class="kr">let</span> <span class="nv">v&#39;</span> := <span class="kp">eval</span> <span class="nb">compute</span> <span class="kr">in</span> v <span class="kr">in</span> <span class="nb">subst</span> m&#39;;
            (sk H v&#39; || <span class="kp">fail</span> <span class="mi">1</span>))
    || fk
  <span class="kr">in</span>
  <span class="kr">let</span> <span class="nv">on_morphism</span> <span class="nv">m</span> <span class="nv">cont</span> :=
    params m <span class="kp">ltac</span>:(<span class="kr">fun</span> <span class="nv">H</span> <span class="nv">n</span> =&gt; do_partial H n m)
      <span class="kp">ltac</span>:(cont)
  <span class="kr">in</span>
  <span class="kr">match goal with</span>
    | [ _ : normalization_done |- _ ] =&gt; <span class="kp">fail</span> <span class="mi">1</span>
    | [ _ : @Params _ _ _ |- _ ] =&gt; <span class="kp">fail</span> <span class="mi">1</span>
    | [ |- @Proper ?T _ (?m ?x) ] =&gt;
      <span class="kr">match goal with</span>
        | [ H : PartialApplication |- _ ] =&gt;
          class_apply @Reflexive_partial_app_morphism; [|<span class="nb">clear</span> H]
        | _ =&gt; on_morphism (m x)
          <span class="kp">ltac</span>:(class_apply @Reflexive_partial_app_morphism)
      <span class="kr">end</span>
  <span class="kr">end</span>.</span></span></span></pre><div class="doc">
Bootstrap !!! 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk75" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk75"><span class="highlight"><span class="kn">Instance</span> <span class="nf">proper_proper</span> : Proper (relation_equivalence ==&gt; eq ==&gt; iff) (@Proper A).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">A</span> : <span class="kt">Type</span>,
Proper (relation_equivalence ==&gt; eq ==&gt; iff) Proper</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk76" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk76"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">A</span> : <span class="kt">Type</span>,
Proper (relation_equivalence ==&gt; eq ==&gt; iff) Proper</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk77" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk77"><span class="highlight">simpl_relation.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation_equivalence x y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">Proper x y0 &lt;-&gt; Proper y y0</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk78" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk78"><span class="highlight">reduce <span class="kr">in</span> H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> <span class="nv">x1</span> : A, x x0 x1 &lt;-&gt; y x0 x1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">Proper x y0 &lt;-&gt; Proper y y0</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk79" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk79"><span class="highlight"><span class="nb">split</span> ; <span class="nb">red</span> ; <span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> <span class="nv">x1</span> : A, x x0 x1 &lt;-&gt; y x0 x1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper x y0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">y y0 y0</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Morphisms-v-chk7a" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> <span class="nv">x1</span> : A, x x0 x1 &lt;-&gt; y x0 x1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper y y0</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Morphisms-v-chk7a"><hr></label><div class="goal-conclusion"><span class="highlight">x y0 y0</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk7b" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk7b"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">relation A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> <span class="nv">x1</span> : A, x x0 x1 &lt;-&gt; y x0 x1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Proper x y0</span></span></span></div></div><label class="goal-separator"><hr></label><div class="goal-conclusion"><span class="highlight">y y0 y0</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Morphisms-v-chk7c" style="display: none" type="checkbox"><label class="coq-input" for="Morphisms-v-chk7c"><span class="highlight"><span class="nb">setoid_rewrite</span> &lt;- H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-responses"><blockquote class="coq-response"><span class="highlight">Tactic failure: Setoid library not loaded.</span></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> H0.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight">-</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">setoid_rewrite</span> H.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> H0.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Ltac</span> <span class="nf">proper_reflexive</span> :=
  <span class="kr">match goal with</span>
    | [ _ : normalization_done |- _ ] =&gt; <span class="kp">fail</span> <span class="mi">1</span>
    | _ =&gt; class_apply proper_eq || class_apply @reflexive_proper
  <span class="kr">end</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">

</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Hint Extern</span> <span class="mi">1</span> (subrelation (flip _) _) =&gt; class_apply @flip1 : typeclass_instances.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Hint Extern</span> <span class="mi">1</span> (subrelation _ (flip _)) =&gt; class_apply @flip2 : typeclass_instances.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Hint Extern</span> <span class="mi">1</span> (Proper _ (complement _)) =&gt; <span class="nb">apply</span> @complement_proper 
  : typeclass_instances.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Hint Extern</span> <span class="mi">1</span> (Proper _ (flip _)) =&gt; <span class="nb">apply</span> @flip_proper 
  : typeclass_instances.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Hint Extern</span> <span class="mi">2</span> (@Proper _ (flip _) _) =&gt; class_apply @proper_flip_proper 
  : typeclass_instances.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Hint Extern</span> <span class="mi">4</span> (@Proper _ _ _) =&gt; partial_application_tactic 
  : typeclass_instances.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Hint Extern</span> <span class="mi">7</span> (@Proper _ _ _) =&gt; proper_reflexive 
  : typeclass_instances.</span></span></span></pre><div class="doc">
Special-purpose class to do normalization of signatures w.r.t. flip. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Section</span> <span class="nf">Normalize</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-nc"><span class="highlight">  <span class="kn">Context</span> (<span class="nv">A</span> : <span class="kt">Type</span>).

  <span class="kn">Class</span> <span class="nf">Normalizes</span> (<span class="nv">m</span> : relation A) (<span class="nv">m&#39;</span> : relation A) : <span class="kt">Prop</span> :=
    normalizes : relation_equivalence m m&#39;.</span></span></pre><div class="doc">
Current strategy: add <span class="inlinecode"><span class="id" title="var">flip</span></span> everywhere and reduce using <span class="inlinecode"><span class="id" title="var">subrelation</span></span>
   afterwards. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight">  <span class="kn">Lemma</span> <span class="nf">proper_normalizes_proper</span> `(Normalizes R0 R1, Proper A R1 m) : Proper R0 m.
  <span class="kn">Proof</span>.
    <span class="nb">red</span> <span class="kr">in</span> H, H0.
    <span class="nb">rewrite</span> H.
    <span class="bp">assumption</span>.
  <span class="kn">Qed</span>.

  <span class="kn">Lemma</span> <span class="nf">flip_atom</span> <span class="nv">R</span> : Normalizes R (flip (flip R)).
  <span class="kn">Proof</span>.
    <span class="nb">firstorder</span>.
  <span class="kn">Qed</span>.

<span class="kn">End</span> <span class="nf">Normalize</span>.

<span class="kn">Lemma</span> <span class="nf">flip_arrow</span> {<span class="nv">A</span> : <span class="kt">Type</span>} {<span class="nv">B</span> : <span class="kt">Type</span>}
      `(NA : Normalizes A R (flip R&#39;&#39;&#39;), NB : Normalizes B R&#39; (flip R&#39;&#39;)) :
  Normalizes (A -&gt; B) (R ==&gt; R&#39;) (flip (R&#39;&#39;&#39; ==&gt; R&#39;&#39;)%signature).
<span class="kn">Proof</span>. 
  <span class="nb">unfold</span> Normalizes <span class="kr">in</span> *. <span class="nb">intros</span>.
  <span class="nb">unfold</span> relation_equivalence <span class="kr">in</span> *. 
  <span class="nb">unfold</span> predicate_equivalence <span class="kr">in</span> *. <span class="nb">simpl</span> <span class="kr">in</span> *.
  <span class="nb">unfold</span> respectful. <span class="nb">unfold</span> flip <span class="kr">in</span> *. <span class="nb">firstorder</span>.
  - <span class="nb">apply</span> NB. <span class="nb">apply</span> H. <span class="nb">apply</span> NA. <span class="nb">apply</span> H0.
  - <span class="nb">apply</span> NB. <span class="nb">apply</span> H. <span class="nb">apply</span> NA. <span class="nb">apply</span> H0.
<span class="kn">Qed</span>.

<span class="kn">Ltac</span> <span class="nf">normalizes</span> :=
  <span class="kr">match goal with</span>
    | [ |- Normalizes _ (respectful _ _) _ ] =&gt; class_apply @flip_arrow
    | _ =&gt; class_apply @flip_atom
  <span class="kr">end</span>.

<span class="kn">Ltac</span> <span class="nf">proper_normalization</span> :=
  <span class="kr">match goal with</span>
    | [ _ : normalization_done |- _ ] =&gt; <span class="kp">fail</span> <span class="mi">1</span>
    | [ _ : apply_subrelation |- @Proper _ ?R _ ] =&gt; 
      <span class="kr">let</span> <span class="nv">H</span> := <span class="kp">fresh</span> <span class="s2">&quot;H&quot;</span> <span class="kr">in</span>
      <span class="nb">set</span>(H:=did_normalization) ; class_apply @proper_normalizes_proper
  <span class="kr">end</span>.

<span class="kn">Hint Extern</span> <span class="mi">1</span> (Normalizes _ _ _) =&gt; normalizes : typeclass_instances.
<span class="kn">Hint Extern</span> <span class="mi">6</span> (@Proper _ _ _) =&gt; proper_normalization 
  : typeclass_instances.</span></span></pre><div class="doc">
When the relation on the domain is symmetric, we can
    flip the relation on the codomain. Same for binary functions. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">proper_sym_flip</span> :
 <span class="kr">forall</span> `(Symmetric A R1)`(Proper (A-&gt;B) (R1==&gt;R2) f),
 Proper (R1==&gt;flip R2) f.
<span class="kn">Proof</span>.
<span class="nb">intros</span> A R1 Sym B R2 f Hf.
<span class="nb">intros</span> x x&#39; Hxx&#39;. <span class="nb">apply</span> Hf, Sym, Hxx&#39;.
<span class="kn">Qed</span>.

<span class="kn">Lemma</span> <span class="nf">proper_sym_flip_2</span> :
 <span class="kr">forall</span> `(Symmetric A R1)`(Symmetric B R2)`(Proper (A-&gt;B-&gt;C) (R1==&gt;R2==&gt;R3) f),
 Proper (R1==&gt;R2==&gt;flip R3) f.
<span class="kn">Proof</span>.
<span class="nb">intros</span> A R1 Sym1 B R2 Sym2 C R3 f Hf.
<span class="nb">intros</span> x x&#39; Hxx&#39; y y&#39; Hyy&#39;. <span class="nb">apply</span> Hf; <span class="nb">auto</span>.
<span class="kn">Qed</span>.</span></span></pre><div class="doc">
When the relation on the domain is symmetric, a predicate is
  compatible with <span class="inlinecode"><span class="id" title="var">iff</span></span> as soon as it is compatible with <span class="inlinecode"><span class="id" title="var">impl</span></span>.
  Same with a binary relation. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">proper_sym_impl_iff</span> : <span class="kr">forall</span> `(Symmetric A R)`(Proper _ (R==&gt;impl) f),
 Proper (R==&gt;iff) f.
<span class="kn">Proof</span>.
<span class="nb">intros</span> A R Sym f Hf x x&#39; Hxx&#39;. <span class="kp">repeat</span> <span class="nb">red</span> <span class="kr">in</span> Hf. <span class="nb">split</span>; <span class="nb">eauto</span>.
<span class="kn">Qed</span>.

<span class="kn">Lemma</span> <span class="nf">proper_sym_impl_iff_2</span> :
 <span class="kr">forall</span> `(Symmetric A R)`(Symmetric B R&#39;)`(Proper _ (R==&gt;R&#39;==&gt;impl) f),
 Proper (R==&gt;R&#39;==&gt;iff) f.
<span class="kn">Proof</span>.
<span class="nb">intros</span> A R Sym B R&#39; Sym&#39; f Hf x x&#39; Hxx&#39; y y&#39; Hyy&#39;.
<span class="kp">repeat</span> <span class="nb">red</span> <span class="kr">in</span> Hf. <span class="nb">split</span>; <span class="nb">eauto</span>.
<span class="kn">Qed</span>.</span></span></pre><div class="doc">
A <span class="inlinecode"><span class="id" title="var">PartialOrder</span></span> is compatible with its underlying equivalence. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight"><span class="kn">Instance</span> <span class="nf">PartialOrder_proper</span> `(PartialOrder A eqA R) :
  Proper (eqA==&gt;eqA==&gt;iff) R.
<span class="kn">Proof</span>.
<span class="nb">intros</span>.
<span class="nb">apply</span> proper_sym_impl_iff_2; <span class="nb">auto with</span> *.
<span class="nb">intros</span> x x&#39; Hx y y&#39; Hy Hr.
<span class="nb">transitivity</span> x.
- <span class="nb">generalize</span> (partial_order_equivalence x x&#39;); <span class="nb">compute</span>; <span class="nb">intuition</span>.
- <span class="nb">transitivity</span> y; <span class="nb">auto</span>.
  <span class="nb">generalize</span> (partial_order_equivalence y y&#39;); <span class="nb">compute</span>; <span class="nb">intuition</span>.
<span class="kn">Qed</span>.</span></span></pre><div class="doc">
From a <span class="inlinecode"><span class="id" title="var">PartialOrder</span></span> to the corresponding <span class="inlinecode"><span class="id" title="var">StrictOrder</span></span>:
     <span class="inlinecode"><span class="id" title="var">lt</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">le</span></span> <span class="inlinecode">‚àß</span> <span class="inlinecode">¬¨<span class="id" title="var">eq</span></span>.
    If the order is total, we could also say <span class="inlinecode"><span class="id" title="var">gt</span></span> <span class="inlinecode">=</span> <span class="inlinecode">¬¨<span class="id" title="var">le</span></span>. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">PartialOrder_StrictOrder</span> `(PartialOrder A eqA R) :
  StrictOrder (relation_conjunction R (complement eqA)).
<span class="kn">Proof</span>.
<span class="nb">split</span>; <span class="nb">compute</span>.
- <span class="nb">intros</span> x (_,Hx). <span class="nb">apply</span> Hx, Equivalence_Reflexive.
- <span class="nb">intros</span> x y z (Hxy,Hxy&#39;) (Hyz,Hyz&#39;). <span class="nb">split</span>.
  + <span class="nb">apply</span> PreOrder_Transitive <span class="kr">with</span> y; <span class="bp">assumption</span>.
  + <span class="nb">intro</span> Hxz.
    <span class="nb">apply</span> Hxy&#39;.
    <span class="nb">apply</span> partial_order_antisym; <span class="nb">auto</span>.
    <span class="nb">rewrite</span> Hxz; <span class="nb">auto</span>.
<span class="kn">Qed</span>.</span></span></pre><div class="doc">
From a <span class="inlinecode"><span class="id" title="var">StrictOrder</span></span> to the corresponding <span class="inlinecode"><span class="id" title="var">PartialOrder</span></span>:
     <span class="inlinecode"><span class="id" title="var">le</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">lt</span></span> <span class="inlinecode">‚à®</span> <span class="inlinecode"><span class="id" title="var">eq</span></span>.
    If the order is total, we could also say <span class="inlinecode"><span class="id" title="var">ge</span></span> <span class="inlinecode">=</span> <span class="inlinecode">¬¨<span class="id" title="var">lt</span></span>. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-nc"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">StrictOrder_PreOrder</span>
 `(Equivalence A eqA, StrictOrder A R, Proper _ (eqA==&gt;eqA==&gt;iff) R) :
 PreOrder (relation_disjunction R eqA).
<span class="kn">Proof</span>.
<span class="nb">split</span>.
- <span class="nb">intros</span> x. <span class="nb">right</span>. <span class="bp">reflexivity</span>.
- <span class="nb">intros</span> x y z [Hxy|Hxy] [Hyz|Hyz].
  + <span class="nb">left</span>. <span class="nb">transitivity</span> y; <span class="nb">auto</span>.
  + <span class="nb">left</span>. <span class="nb">rewrite</span> &lt;- Hyz; <span class="nb">auto</span>.
  + <span class="nb">left</span>. <span class="nb">rewrite</span> Hxy; <span class="nb">auto</span>.
  + <span class="nb">right</span>. <span class="nb">transitivity</span> y; <span class="nb">auto</span>.
<span class="kn">Qed</span>.

<span class="kn">Hint Extern</span> <span class="mi">4</span> (PreOrder (relation_disjunction _ _)) =&gt; 
  class_apply StrictOrder_PreOrder : typeclass_instances.

<span class="kn">Lemma</span> <span class="nf">StrictOrder_PartialOrder</span>
  `(Equivalence A eqA, StrictOrder A R, Proper _ (eqA==&gt;eqA==&gt;iff) R) :
  PartialOrder eqA (relation_disjunction R eqA).
<span class="kn">Proof</span>.
<span class="nb">intros</span>. <span class="nb">intros</span> x y. <span class="nb">compute</span>. <span class="nb">intuition</span>.
<span class="nb">elim</span> (StrictOrder_Irreflexive x).
<span class="nb">transitivity</span> y; <span class="nb">auto</span>.
<span class="kn">Qed</span>.

<span class="kn">Hint Extern</span> <span class="mi">4</span> (StrictOrder (relation_conjunction _ _)) =&gt; 
  class_apply PartialOrder_StrictOrder : typeclass_instances.

<span class="kn">Hint Extern</span> <span class="mi">4</span> (PartialOrder _ (relation_disjunction _ _)) =&gt; 
  class_apply StrictOrder_PartialOrder : typeclass_instances.</span></span></pre></article></body></html>