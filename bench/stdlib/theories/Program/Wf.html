<!DOCTYPE html>
<html><head><title>Wf.v</title><meta charset="utf-8"><meta content="Alectryon v0.2" name="generator"><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Serif:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" rel="stylesheet"><link href="https://unpkg.com/firacode/distr/fira_code.css" rel="stylesheet"><link href="alectryon.css" rel="stylesheet"><script src="alectryon.js"></script><style type="text/css">.highlight .hll { background-color: #ffffcc }
.highlight .c { color: #555753; font-style: italic } /* Comment */
.highlight .err { color: #a40000; border: 1px solid #cc0000 } /* Error */
.highlight .g { color: #000000 } /* Generic */
.highlight .k { color: #8f5902 } /* Keyword */
.highlight .l { color: #2e3436 } /* Literal */
.highlight .n { color: #000000 } /* Name */
.highlight .o { color: #000000 } /* Operator */
.highlight .x { color: #2e3436 } /* Other */
.highlight .p { color: #000000 } /* Punctuation */
.highlight .ch { color: #555753; font-weight: bold; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #555753; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #3465a4; font-style: italic } /* Comment.Preproc */
.highlight .cpf { color: #555753; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #555753; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3465a4; font-weight: bold; font-style: italic } /* Comment.Special */
.highlight .gd { color: #a40000 } /* Generic.Deleted */
.highlight .ge { color: #000000; font-style: italic } /* Generic.Emph */
.highlight .gr { color: #a40000 } /* Generic.Error */
.highlight .gh { color: #a40000; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #4e9a06 } /* Generic.Inserted */
.highlight .go { color: #000000; font-style: italic } /* Generic.Output */
.highlight .gp { color: #8f5902 } /* Generic.Prompt */
.highlight .gs { color: #000000; font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #000000; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #000000; font-style: italic } /* Generic.Traceback */
.highlight .kc { color: #204a87; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #4e9a06; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #4e9a06; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #204a87 } /* Keyword.Pseudo */
.highlight .kr { color: #8f5902 } /* Keyword.Reserved */
.highlight .kt { color: #204a87 } /* Keyword.Type */
.highlight .ld { color: #2e3436 } /* Literal.Date */
.highlight .m { color: #2e3436 } /* Literal.Number */
.highlight .s { color: #ad7fa8 } /* Literal.String */
.highlight .na { color: #c4a000 } /* Name.Attribute */
.highlight .nb { color: #75507b } /* Name.Builtin */
.highlight .nc { color: #204a87 } /* Name.Class */
.highlight .no { color: #ce5c00 } /* Name.Constant */
.highlight .nd { color: #3465a4; font-weight: bold } /* Name.Decorator */
.highlight .ni { color: #c4a000; text-decoration: underline } /* Name.Entity */
.highlight .ne { color: #cc0000 } /* Name.Exception */
.highlight .nf { color: #a40000 } /* Name.Function */
.highlight .nl { color: #3465a4; font-weight: bold } /* Name.Label */
.highlight .nn { color: #000000 } /* Name.Namespace */
.highlight .nx { color: #000000 } /* Name.Other */
.highlight .py { color: #000000 } /* Name.Property */
.highlight .nt { color: #a40000 } /* Name.Tag */
.highlight .nv { color: #ce5c00 } /* Name.Variable */
.highlight .ow { color: #8f5902 } /* Operator.Word */
.highlight .w { color: #d3d7cf; text-decoration: underline } /* Text.Whitespace */
.highlight .mb { color: #2e3436 } /* Literal.Number.Bin */
.highlight .mf { color: #2e3436 } /* Literal.Number.Float */
.highlight .mh { color: #2e3436 } /* Literal.Number.Hex */
.highlight .mi { color: #2e3436 } /* Literal.Number.Integer */
.highlight .mo { color: #2e3436 } /* Literal.Number.Oct */
.highlight .sa { color: #ad7fa8 } /* Literal.String.Affix */
.highlight .sb { color: #ad7fa8 } /* Literal.String.Backtick */
.highlight .sc { color: #ad7fa8; font-weight: bold } /* Literal.String.Char */
.highlight .dl { color: #ad7fa8 } /* Literal.String.Delimiter */
.highlight .sd { color: #ad7fa8 } /* Literal.String.Doc */
.highlight .s2 { color: #ad7fa8 } /* Literal.String.Double */
.highlight .se { color: #ad7fa8; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #ad7fa8; text-decoration: underline } /* Literal.String.Heredoc */
.highlight .si { color: #ce5c00 } /* Literal.String.Interpol */
.highlight .sx { color: #ad7fa8 } /* Literal.String.Other */
.highlight .sr { color: #ad7fa8 } /* Literal.String.Regex */
.highlight .s1 { color: #ad7fa8 } /* Literal.String.Single */
.highlight .ss { color: #8f5902 } /* Literal.String.Symbol */
.highlight .bp { color: #5c35cc } /* Name.Builtin.Pseudo */
.highlight .fm { color: #a40000 } /* Name.Function.Magic */
.highlight .vc { color: #ce5c00 } /* Name.Variable.Class */
.highlight .vg { color: #ce5c00; text-decoration: underline } /* Name.Variable.Global */
.highlight .vi { color: #ce5c00 } /* Name.Variable.Instance */
.highlight .vm { color: #ce5c00 } /* Name.Variable.Magic */
.highlight .il { color: #2e3436 } /* Literal.Number.Integer.Long */</style></head><body><article class="alectryon-root alectryon-standalone alectryon-centered alectryon-coqdoc"><div class="alectryon-header">Built with <a href="https://github.com/cpitclaudel/alectryon/">Alectryon</a>, running <a href="https://coq.inria.fr/">Coq</a>+<a href="https://github.com/ejgallego/coq-serapi">SerAPI</a> v8.10.0+0.7.0. Coq sources are in this panel; goals and messages will appear in the other. Bubbles (<span class="alectryon-bubble"></span>) indicate interactive fragments: hover for details, tap to reveal contents. Use <kbd>Ctrl+‚Üë</kbd> <kbd>Ctrl+‚Üì</kbd> to navigate, <kbd>Ctrl+üñ±Ô∏è</kbd> to focus.</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight"><span class="sd">(************************************************************************)</span>
<span class="c">(*         *   The Coq Proof Assistant / The Coq Development Team       *)</span>
<span class="c">(*  v      *   INRIA, CNRS and contributors - Copyright 1999-2018       *)</span>
<span class="c">(* &lt;O___,, *       (see CREDITS file for the list of authors)           *)</span>
<span class="c">(*   \VV/  **************************************************************)</span>
<span class="c">(*    //   *    This file is distributed under the terms of the         *)</span>
<span class="c">(*         *     GNU Lesser General Public License Version 2.1          *)</span>
<span class="c">(*         *     (see LICENSE file for the text of the license)         *)</span>
<span class="sd">(************************************************************************)</span></span></span></pre><div class="doc">
Reformulation of the Wf module using subsets where possible, providing
   the support for <span class="inlinecode"><span class="id" title="var">Program</span></span>'s treatment of well-founded definitions. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Require Import</span> Coq.Init.Wf.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Require Import</span> Coq.Program.Utils.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Require Import</span> ProofIrrelevance.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Require Import</span> FunctionalExtensionality.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Local Open Scope</span> program_scope.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Section</span> <span class="nf">Well_founded</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Variable</span> <span class="nv">A</span> : <span class="kt">Type</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Variable</span> <span class="nv">R</span> : A -&gt; A -&gt; <span class="kt">Prop</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Hypothesis</span> <span class="nv">Rwf</span> : well_founded R.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Variable</span> <span class="nv">P</span> : A -&gt; <span class="kt">Type</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Variable</span> <span class="nv">F_sub</span> : <span class="kr">forall</span> <span class="nv">x</span>:A, (<span class="kr">forall</span> <span class="nv">y</span>: { y : A | R y x }, P (proj1_sig y)) -&gt; P x.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Fixpoint</span> <span class="nf">Fix_F_sub</span> (<span class="nv">x</span> : A) (<span class="nv">r</span> : Acc R x) : P x :=
    F_sub x (<span class="kr">fun</span> <span class="nv">y</span>: { y : A | R y x}  =&gt; Fix_F_sub (proj1_sig y)
      (Acc_inv r (proj2_sig y))).</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">Fix_sub</span> (<span class="nv">x</span> : A) := Fix_F_sub x (Rwf x).</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Register</span> Fix_sub <span class="kr">as</span> program.<span class="kn">wf</span>.fix_sub.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
  <span class="c">(* Notation Fix_F := (Fix_F_sub P F_sub) (only parsing). (* alias *) *)</span>
  <span class="c">(* Definition Fix (x:A) := Fix_F_sub P F_sub x (Rwf x). *)</span>

</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Hypothesis</span> <span class="nv">F_ext</span> :
    <span class="kr">forall</span> (<span class="nv">x</span>:A) (<span class="nv">f</span> <span class="nv">g</span>:<span class="kr">forall</span> <span class="nv">y</span>:{y:A | R y x}, P (`y)),
      (<span class="kr">forall</span> <span class="nv">y</span>:{y : A | R y x}, f y = g y) -&gt; F_sub x f = F_sub x g.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk0" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk0"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">Fix_F_eq</span> :
    <span class="kr">forall</span> (<span class="nv">x</span>:A) (<span class="nv">r</span>:Acc R x),
      F_sub x (<span class="kr">fun</span> <span class="nv">y</span>:{y:A | R y x} =&gt; Fix_F_sub (`y) (Acc_inv r (proj2_sig y))) = Fix_F_sub x r.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_sub</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)) -&gt; P x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_ext</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x</span> : A)
  (<span class="nv">f</span> <span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)),
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, f y = g y) -&gt;
F_sub x f = F_sub x g</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">r</span> : Acc R x),
F_sub x
  (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x} =&gt;
   Fix_F_sub (` y) (Acc_inv r (proj2_sig y))) =
Fix_F_sub x r</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk1" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk1"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_sub</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)) -&gt; P x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_ext</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x</span> : A)
  (<span class="nv">f</span> <span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)),
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, f y = g y) -&gt;
F_sub x f = F_sub x g</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">r</span> : Acc R x),
F_sub x
  (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x} =&gt;
   Fix_F_sub (` y) (Acc_inv r (proj2_sig y))) =
Fix_F_sub x r</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">destruct</span> r <span class="nb">using</span> Acc_inv_dep; <span class="nb">auto</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk2" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk2"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">Fix_F_inv</span> : <span class="kr">forall</span> (<span class="nv">x</span>:A) (<span class="nv">r</span> <span class="nv">s</span>:Acc R x), Fix_F_sub x r = Fix_F_sub x s.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_sub</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)) -&gt; P x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_ext</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x</span> : A)
  (<span class="nv">f</span> <span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)),
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, f y = g y) -&gt;
F_sub x f = F_sub x g</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">r</span> <span class="nv">s</span> : Acc R x),
Fix_F_sub x r = Fix_F_sub x s</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk3" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk3"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_sub</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)) -&gt; P x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_ext</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x</span> : A)
  (<span class="nv">f</span> <span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)),
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, f y = g y) -&gt;
F_sub x f = F_sub x g</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">r</span> <span class="nv">s</span> : Acc R x),
Fix_F_sub x r = Fix_F_sub x s</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk4" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk4"><span class="highlight"><span class="nb">intro</span> x; <span class="nb">induction</span> (Rwf x); <span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_sub</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, P (` y)) -&gt; P x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_ext</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : A)
  (<span class="nv">f</span> <span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, P (` y)),
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, f y = g y) -&gt;
F_sub x0 f = F_sub x0 g</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : A, R y x -&gt; Acc R y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : A,
R y x -&gt;
<span class="kr">forall</span> <span class="nv">r0</span> <span class="nv">s0</span> : Acc R y,
Fix_F_sub y r0 = Fix_F_sub y s0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r, s</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Acc R x</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Fix_F_sub x r = Fix_F_sub x s</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">rewrite</span> (proof_irrelevance (Acc R x) r s) ; <span class="nb">auto</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk5" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk5"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">Fix_eq</span> : <span class="kr">forall</span> <span class="nv">x</span>:A, Fix_sub x = F_sub x (<span class="kr">fun</span> <span class="nv">y</span>:{ y:A | R y x} =&gt; Fix_sub (proj1_sig y)).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_sub</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)) -&gt; P x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_ext</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x</span> : A)
  (<span class="nv">f</span> <span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)),
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, f y = g y) -&gt;
F_sub x f = F_sub x g</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
Fix_sub x =
F_sub x (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x} =&gt; Fix_sub (` y))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk6" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk6"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_sub</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)) -&gt; P x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_ext</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x</span> : A)
  (<span class="nv">f</span> <span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)),
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, f y = g y) -&gt;
F_sub x f = F_sub x g</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
Fix_sub x =
F_sub x (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x} =&gt; Fix_sub (` y))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk7" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk7"><span class="highlight"><span class="nb">intro</span> x; <span class="nb">unfold</span> Fix_sub.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_sub</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, P (` y)) -&gt; P x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_ext</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : A)
  (<span class="nv">f</span> <span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, P (` y)),
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, f y = g y) -&gt;
F_sub x0 f = F_sub x0 g</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Fix_F_sub x (Rwf x) =
F_sub x
  (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x} =&gt;
   Fix_F_sub (` y) (Rwf (` y)))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk8" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk8"><span class="highlight"><span class="nb">rewrite</span> &lt;- (Fix_F_eq ).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_sub</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, P (` y)) -&gt; P x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_ext</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : A)
  (<span class="nv">f</span> <span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, P (` y)),
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, f y = g y) -&gt;
F_sub x0 f = F_sub x0 g</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">F_sub x
  (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x} =&gt;
   Fix_F_sub (` y) (Acc_inv (Rwf x) (proj2_sig y))) =
F_sub x
  (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x} =&gt;
   Fix_F_sub (` y) (Rwf (` y)))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk9" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk9"><span class="highlight"><span class="nb">apply</span> F_ext; <span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_sub</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A,
(<span class="kr">forall</span> <span class="nv">y0</span> : {y0 : A | R y0 x0}, P (` y0)) -&gt;
P x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_ext</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : A)
  (<span class="nv">f</span>
   <span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y0</span> : {y0 : A | R y0 x0},
       P (` y0)),
(<span class="kr">forall</span> <span class="nv">y0</span> : {y0 : A | R y0 x0}, f y0 = g y0) -&gt;
F_sub x0 f = F_sub x0 g</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">{y0 : A | R y0 x}</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Fix_F_sub (` y) (Acc_inv (Rwf x) (proj2_sig y)) =
Fix_F_sub (` y) (Rwf (` y))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> Fix_F_inv.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chka" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chka"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">fix_sub_eq</span> :
    <span class="kr">forall</span> <span class="nv">x</span> : A,
      Fix_sub x =
      <span class="kr">let</span> <span class="nv">f_sub</span> := F_sub <span class="kr">in</span>
        f_sub x (<span class="kr">fun</span> <span class="nv">y</span>: {y : A | R y x} =&gt; Fix_sub (`y)).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_sub</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)) -&gt; P x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_ext</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x</span> : A)
  (<span class="nv">f</span> <span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)),
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, f y = g y) -&gt;
F_sub x f = F_sub x g</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
Fix_sub x =
(<span class="kr">let</span> <span class="nv">f_sub</span> := F_sub <span class="kr">in</span>
 f_sub x (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x} =&gt; Fix_sub (` y)))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chkb" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chkb"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_sub</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)) -&gt; P x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_ext</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x</span> : A)
  (<span class="nv">f</span> <span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)),
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, f y = g y) -&gt;
F_sub x f = F_sub x g</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
Fix_sub x =
(<span class="kr">let</span> <span class="nv">f_sub</span> := F_sub <span class="kr">in</span>
 f_sub x (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x} =&gt; Fix_sub (` y)))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">exact</span> Fix_eq.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">End</span> <span class="nf">Well_founded</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Require</span> Coq.extraction.<span class="kn">Extraction</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Extraction Inline</span> Fix_F_sub Fix_sub.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Set Implicit Arguments</span>.</span></span></span></pre><div class="doc">
Reasoning about well-founded fixpoints on measures. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Section</span> <span class="nf">Measure_well_founded</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
  <span class="c">(* Measure relations are well-founded if the underlying relation is well-founded. *)</span>

</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Variables</span> <span class="nv">T</span> <span class="nv">M</span>: <span class="kt">Type</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Variable</span> <span class="nv">R</span>: M -&gt; M -&gt; <span class="kt">Prop</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Hypothesis</span> <span class="nv">wf</span>: well_founded R.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Variable</span> <span class="nv">m</span>: T -&gt; M.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Definition</span> <span class="nf">MR</span> (<span class="nv">x</span> <span class="nv">y</span>: T): <span class="kt">Prop</span> := R (m x) (m y).</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Register</span> MR <span class="kr">as</span> program.<span class="kn">wf</span>.mr.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chkc" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chkc"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">measure_wf</span>: well_founded MR.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">T, M</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">M -&gt; M -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">wf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">T -&gt; M</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">well_founded MR</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chkd" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chkd"><span class="highlight"><span class="kn">Proof with</span> <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">T, M</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">M -&gt; M -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">wf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">T -&gt; M</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">well_founded MR</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chke" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chke"><span class="highlight"><span class="nb">unfold</span> well_founded.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">T, M</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">M -&gt; M -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">wf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">T -&gt; M</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">a</span> : T, Acc MR a</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chkf" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chkf"><span class="highlight"><span class="nb">cut</span> (<span class="kr">forall</span> (<span class="nv">a</span>: M) (<span class="nv">a0</span>: T), m a0 = a -&gt; Acc MR a0).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">T, M</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">M -&gt; M -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">wf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">T -&gt; M</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">forall</span> (<span class="nv">a</span> : M) (<span class="nv">a0</span> : T), m a0 = a -&gt; Acc MR a0) -&gt;
<span class="kr">forall</span> <span class="nv">a</span> : T, Acc MR a</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Wf-v-chk10" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">T, M</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">M -&gt; M -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">wf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">T -&gt; M</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Wf-v-chk10"><hr></label><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">a</span> : M) (<span class="nv">a0</span> : T), m a0 = a -&gt; Acc MR a0</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk11" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk11"><span class="highlight">+</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">T, M</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">M -&gt; M -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">wf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">T -&gt; M</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">forall</span> (<span class="nv">a</span> : M) (<span class="nv">a0</span> : T), m a0 = a -&gt; Acc MR a0) -&gt;
<span class="kr">forall</span> <span class="nv">a</span> : T, Acc MR a</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk12" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk12"><span class="highlight"><span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">T, M</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">M -&gt; M -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">wf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">T -&gt; M</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">a0</span> : M) (<span class="nv">a1</span> : T), m a1 = a0 -&gt; Acc MR a1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">T</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Acc MR a</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> (H (m a))...</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk13" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk13"><span class="highlight">+</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">T, M</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">M -&gt; M -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">wf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">T -&gt; M</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">a</span> : M) (<span class="nv">a0</span> : T), m a0 = a -&gt; Acc MR a0</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk14" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk14"><span class="highlight"><span class="nb">apply</span> (@well_founded_ind M R <span class="kn">wf</span> (<span class="kr">fun</span> <span class="nv">mm</span> =&gt; <span class="kr">forall</span> <span class="nv">a</span>, m a = mm -&gt; Acc MR a)).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">T, M</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">M -&gt; M -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">wf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">T -&gt; M</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : M,
(<span class="kr">forall</span> <span class="nv">y</span> : M,
 R y x -&gt; <span class="kr">forall</span> <span class="nv">a</span> : T, m a = y -&gt; Acc MR a) -&gt;
<span class="kr">forall</span> <span class="nv">a</span> : T, m a = x -&gt; Acc MR a</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk15" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk15"><span class="highlight"><span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">T, M</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">M -&gt; M -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">wf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">T -&gt; M</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">M</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : M,
R y x -&gt; <span class="kr">forall</span> <span class="nv">a0</span> : T, m a0 = y -&gt; Acc MR a0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">T</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m a = x</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Acc MR a</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk16" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk16"><span class="highlight"><span class="nb">apply</span> Acc_intro.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">T, M</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">M -&gt; M -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">wf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">T -&gt; M</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">M</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : M,
R y x -&gt; <span class="kr">forall</span> <span class="nv">a0</span> : T, m a0 = y -&gt; Acc MR a0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">T</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m a = x</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : T, MR y a -&gt; Acc MR y</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk17" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk17"><span class="highlight"><span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">T, M</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">M -&gt; M -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">wf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">T -&gt; M</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">M</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : M,
R y0 x -&gt; <span class="kr">forall</span> <span class="nv">a0</span> : T, m a0 = y0 -&gt; Acc MR a0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">T</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m a = x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">T</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">MR y a</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Acc MR y</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk18" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk18"><span class="highlight"><span class="nb">unfold</span> MR <span class="kr">in</span> H1.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">T, M</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">M -&gt; M -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">wf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">T -&gt; M</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">M</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : M,
R y0 x -&gt; <span class="kr">forall</span> <span class="nv">a0</span> : T, m a0 = y0 -&gt; Acc MR a0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">T</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m a = x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">T</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R (m y) (m a)</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Acc MR y</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk19" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk19"><span class="highlight"><span class="nb">rewrite</span> H0 <span class="kr">in</span> H1.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">T, M</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">M -&gt; M -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">wf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">m</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">T -&gt; M</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">M</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y0</span> : M,
R y0 x -&gt; <span class="kr">forall</span> <span class="nv">a0</span> : T, m a0 = y0 -&gt; Acc MR a0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">T</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">m a = x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">y</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">T</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R (m y) x</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Acc MR y</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">      </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> (H (m y))...</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Defined</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">End</span> <span class="nf">Measure_well_founded</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Hint Resolve</span> measure_wf : core.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Section</span> <span class="nf">Fix_rects</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Variable</span> <span class="nv">A</span>: <span class="kt">Type</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Variable</span> <span class="nv">P</span>: A -&gt; <span class="kt">Type</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Variable</span> <span class="nv">R</span> : A -&gt; A -&gt; <span class="kt">Prop</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Variable</span> <span class="nv">Rwf</span> : well_founded R.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Variable</span> <span class="nv">f</span>: <span class="kr">forall</span> (<span class="nv">x</span> : A), (<span class="kr">forall</span> <span class="nv">y</span>: { y: A | R y x }, P (proj1_sig y)) -&gt; P x.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk1a" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk1a"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">F_unfold</span> <span class="nv">x</span> <span class="nv">r</span>:
    Fix_F_sub A R P f x r =
    f (<span class="kr">fun</span> <span class="nv">y</span> =&gt; Fix_F_sub A R P f (proj1_sig y) (Acc_inv r (proj2_sig y))).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, P (` y)) -&gt; P x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Acc R x</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Fix_F_sub A R P f x r =
f
  (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x} =&gt;
   Fix_F_sub A R P f (` y) (Acc_inv r (proj2_sig y)))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk1b" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk1b"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, P (` y)) -&gt; P x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Acc R x</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Fix_F_sub A R P f x r =
f
  (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x} =&gt;
   Fix_F_sub A R P f (` y) (Acc_inv r (proj2_sig y)))</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk1c" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk1c"><span class="highlight"><span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, P (` y)) -&gt; P x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">r</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Acc R x</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Fix_F_sub A R P f x r =
f
  (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x} =&gt;
   Fix_F_sub A R P f (` y) (Acc_inv r (proj2_sig y)))</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">case</span> r; <span class="nb">auto</span>.</span></span><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
  <span class="c">(* Fix_F_sub_rect lets one prove a property of</span>
<span class="c">  functions defined using Fix_F_sub by showing</span>
<span class="c">  that property to be invariant over single application of the</span>
<span class="c">  function body (f in our case). *)</span>

</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk1d" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk1d"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">Fix_F_sub_rect</span>
    (<span class="nv">Q</span>: <span class="kr">forall</span> <span class="nv">x</span>, P x -&gt; <span class="kt">Type</span>)
    (<span class="nv">inv</span>: <span class="kr">forall</span> <span class="nv">x</span>: A,
     (<span class="kr">forall</span> (<span class="nv">y</span>: A) (<span class="nv">H</span>: R y x) (<span class="nv">a</span>: Acc R y),
        Q y (Fix_F_sub A R P f y a)) -&gt;
        <span class="kr">forall</span> (<span class="nv">a</span>: Acc R x),
          Q x (f (<span class="kr">fun</span> <span class="nv">y</span>: {y: A | R y x} =&gt;
            Fix_F_sub A R P f (proj1_sig y) (Acc_inv a (proj2_sig y)))))
    : <span class="kr">forall</span> <span class="nv">x</span> <span class="nv">a</span>, Q _ (Fix_F_sub A R P f x a).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)) -&gt; P x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Q</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A, P x -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">inv</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : A, R y x -&gt; <span class="kr">forall</span> <span class="nv">a</span> : Acc R y, Q y (Fix_F_sub A R P f y a)) -&gt;
<span class="kr">forall</span> <span class="nv">a</span> : Acc R x,
Q x
(f
(<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x} =&gt;
Fix_F_sub A R P f (` y) (Acc_inv a (proj2_sig y))))</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">a</span> : Acc R x),
Q x (Fix_F_sub A R P f x a)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk1e" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk1e"><span class="highlight"><span class="kn">Proof with</span> <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)) -&gt; P x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Q</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A, P x -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">inv</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : A, R y x -&gt; <span class="kr">forall</span> <span class="nv">a</span> : Acc R y, Q y (Fix_F_sub A R P f y a)) -&gt;
<span class="kr">forall</span> <span class="nv">a</span> : Acc R x,
Q x
(f
(<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x} =&gt;
Fix_F_sub A R P f (` y) (Acc_inv a (proj2_sig y))))</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">a</span> : Acc R x),
Q x (Fix_F_sub A R P f x a)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk1f" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk1f"><span class="highlight"><span class="nb">set</span> (R&#39; := <span class="kr">fun</span> (<span class="nv">x</span>: A) =&gt; <span class="kr">forall</span> <span class="nv">a</span>, Q _ (Fix_F_sub A R P f x a)).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)) -&gt; P x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Q</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A, P x -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">inv</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : A, R y x -&gt; <span class="kr">forall</span> <span class="nv">a</span> : Acc R y, Q y (Fix_F_sub A R P f y a)) -&gt;
<span class="kr">forall</span> <span class="nv">a</span> : Acc R x,
Q x
(f
(<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x} =&gt;
Fix_F_sub A R P f (` y) (Acc_inv a (proj2_sig y))))</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R'</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">a</span> : Acc R x, Q x (Fix_F_sub A R P f x a)</span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">a</span> : Acc R x),
Q x (Fix_F_sub A R P f x a)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk20" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk20"><span class="highlight"><span class="nb">cut</span> (<span class="kr">forall</span> <span class="nv">x</span>, R&#39; x)...</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)) -&gt; P x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Q</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A, P x -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">inv</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : A, R y x -&gt; <span class="kr">forall</span> <span class="nv">a</span> : Acc R y, Q y (Fix_F_sub A R P f y a)) -&gt;
<span class="kr">forall</span> <span class="nv">a</span> : Acc R x,
Q x
(f
(<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x} =&gt;
Fix_F_sub A R P f (` y) (Acc_inv a (proj2_sig y))))</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R'</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">a</span> : Acc R x, Q x (Fix_F_sub A R P f x a)</span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A, R&#39; x</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk21" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk21"><span class="highlight"><span class="nb">apply</span> (well_founded_induction_type Rwf).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)) -&gt; P x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Q</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A, P x -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">inv</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : A, R y x -&gt; <span class="kr">forall</span> <span class="nv">a</span> : Acc R y, Q y (Fix_F_sub A R P f y a)) -&gt;
<span class="kr">forall</span> <span class="nv">a</span> : Acc R x,
Q x
(f
(<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x} =&gt;
Fix_F_sub A R P f (` y) (Acc_inv a (proj2_sig y))))</span></span></span></div><div class="goal-hyp"><span class="hyp-names">R'</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight"><span class="kr">fun</span> <span class="nv">x</span> : A =&gt;
<span class="kr">forall</span> <span class="nv">a</span> : Acc R x, Q x (Fix_F_sub A R P f x a)</span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A, (<span class="kr">forall</span> <span class="nv">y</span> : A, R y x -&gt; R&#39; y) -&gt; R&#39; x</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk22" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk22"><span class="highlight"><span class="nb">subst</span> R&#39;.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)) -&gt; P x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Q</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A, P x -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">inv</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : A, R y x -&gt; <span class="kr">forall</span> <span class="nv">a</span> : Acc R y, Q y (Fix_F_sub A R P f y a)) -&gt;
<span class="kr">forall</span> <span class="nv">a</span> : Acc R x,
Q x
(f
(<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x} =&gt;
Fix_F_sub A R P f (` y) (Acc_inv a (proj2_sig y))))</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : A,
 R y x -&gt;
 (<span class="kr">fun</span> <span class="nv">x0</span> : A =&gt;
  <span class="kr">forall</span> <span class="nv">a</span> : Acc R x0, Q x0 (Fix_F_sub A R P f x0 a))
   y) -&gt;
(<span class="kr">fun</span> <span class="nv">x0</span> : A =&gt;
 <span class="kr">forall</span> <span class="nv">a</span> : Acc R x0, Q x0 (Fix_F_sub A R P f x0 a)) x</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk23" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk23"><span class="highlight"><span class="nb">simpl</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)) -&gt; P x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Q</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A, P x -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">inv</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : A, R y x -&gt; <span class="kr">forall</span> <span class="nv">a</span> : Acc R y, Q y (Fix_F_sub A R P f y a)) -&gt;
<span class="kr">forall</span> <span class="nv">a</span> : Acc R x,
Q x
(f
(<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x} =&gt;
Fix_F_sub A R P f (` y) (Acc_inv a (proj2_sig y))))</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : A,
 R y x -&gt;
 <span class="kr">forall</span> <span class="nv">a</span> : Acc R y, Q y (Fix_F_sub A R P f y a)) -&gt;
<span class="kr">forall</span> <span class="nv">a</span> : Acc R x, Q x (Fix_F_sub A R P f x a)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk24" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk24"><span class="highlight"><span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, P (` y)) -&gt; P x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Q</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A, P x0 -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">inv</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : A, R y x0 -&gt; <span class="kr">forall</span> <span class="nv">a0</span> : Acc R y, Q y (Fix_F_sub A R P f y a0)) -&gt;
<span class="kr">forall</span> <span class="nv">a0</span> : Acc R x0,
Q x0
(f
(<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x0} =&gt;
Fix_F_sub A R P f (` y) (Acc_inv a0 (proj2_sig y))))</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : A,
R y x -&gt;
<span class="kr">forall</span> <span class="nv">a0</span> : Acc R y, Q y (Fix_F_sub A R P f y a0)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Acc R x</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Q x (Fix_F_sub A R P f x a)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">rewrite</span> F_unfold...</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
  <span class="c">(* Let&#39;s call f&#39;s second parameter its &quot;lowers&quot; function, since it</span>
<span class="c">  provides it access to results for inputs with a lower measure.</span>

<span class="c">  In preparation of lemma similar to Fix_F_sub_rect, but</span>
<span class="c">  for Fix_sub, we first</span>
<span class="c">  need an extra hypothesis stating that the function body has the</span>
<span class="c">  same result for different &quot;lowers&quot; functions (g and h below) as long</span>
<span class="c">  as those produce the same results for lower inputs, regardless</span>
<span class="c">  of the lt proofs. *)</span>

</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Hypothesis</span> <span class="nv">equiv_lowers</span>:
    <span class="kr">forall</span> <span class="nv">x0</span> (<span class="nv">g</span> <span class="nv">h</span>: <span class="kr">forall</span> <span class="nv">x</span>: {y: A | R y x0}, P (proj1_sig x)),
    (<span class="kr">forall</span> <span class="nv">x</span> <span class="nv">p</span> <span class="nv">p&#39;</span>, g (exist (<span class="kr">fun</span> <span class="nv">y</span>: A =&gt; R y x0) x p) = h (exist <span class="c">(*FIXME shouldn&#39;t be needed *)</span> (<span class="kr">fun</span> <span class="nv">y</span> =&gt; R y x0) x p&#39;)) -&gt;
      f g = f h.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
  <span class="c">(* From equiv_lowers, it follows that</span>
<span class="c">   [Fix_F_sub A R P f x] applications do not not</span>
<span class="c">  depend on the Acc proofs. *)</span>

</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk25" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk25"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">eq_Fix_F_sub</span> <span class="nv">x</span> (<span class="nv">a</span> <span class="nv">a&#39;</span>: Acc R x):
    Fix_F_sub A R P f x a =
    Fix_F_sub A R P f x a&#39;.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, P (` y)) -&gt; P x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">equiv_lowers</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : A)
  (<span class="nv">g</span>
   <span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">x1</span> : {y : A | R y x0},
       P (` x1)),
(<span class="kr">forall</span> (<span class="nv">x1</span> : A) (<span class="nv">p</span> <span class="nv">p&#39;</span> : R x1 x0),
 g (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p) =
 h (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p&#39;)) -&gt;
f g = f h</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a, a'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Acc R x</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Fix_F_sub A R P f x a = Fix_F_sub A R P f x a&#39;</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk26" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk26"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, P (` y)) -&gt; P x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">equiv_lowers</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : A)
  (<span class="nv">g</span>
   <span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">x1</span> : {y : A | R y x0},
       P (` x1)),
(<span class="kr">forall</span> (<span class="nv">x1</span> : A) (<span class="nv">p</span> <span class="nv">p&#39;</span> : R x1 x0),
 g (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p) =
 h (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p&#39;)) -&gt;
f g = f h</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a, a'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Acc R x</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Fix_F_sub A R P f x a = Fix_F_sub A R P f x a&#39;</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk27" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk27"><span class="highlight"><span class="nb">revert</span> a&#39;.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, P (` y)) -&gt; P x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">equiv_lowers</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : A)
  (<span class="nv">g</span>
   <span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">x1</span> : {y : A | R y x0},
       P (` x1)),
(<span class="kr">forall</span> (<span class="nv">x1</span> : A) (<span class="nv">p</span> <span class="nv">p&#39;</span> : R x1 x0),
 g (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p) =
 h (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p&#39;)) -&gt;
f g = f h</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Acc R x</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">a&#39;</span> : Acc R x,
Fix_F_sub A R P f x a = Fix_F_sub A R P f x a&#39;</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk28" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk28"><span class="highlight"><span class="nb">pattern</span> x, (Fix_F_sub A R P f x a).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, P (` y)) -&gt; P x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">equiv_lowers</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : A)
  (<span class="nv">g</span>
   <span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">x1</span> : {y : A | R y x0},
       P (` x1)),
(<span class="kr">forall</span> (<span class="nv">x1</span> : A) (<span class="nv">p</span> <span class="nv">p&#39;</span> : R x1 x0),
 g (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p) =
 h (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p&#39;)) -&gt;
f g = f h</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Acc R x</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">(<span class="kr">fun</span> (<span class="nv">a0</span> : A) (<span class="nv">p</span> : P a0) =&gt;
 <span class="kr">forall</span> <span class="nv">a&#39;</span> : Acc R a0, p = Fix_F_sub A R P f a0 a&#39;) x
  (Fix_F_sub A R P f x a)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk29" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk29"><span class="highlight"><span class="nb">apply</span> Fix_F_sub_rect.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, P (` y)) -&gt; P x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">equiv_lowers</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : A)
  (<span class="nv">g</span>
   <span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">x1</span> : {y : A | R y x0},
       P (` x1)),
(<span class="kr">forall</span> (<span class="nv">x1</span> : A) (<span class="nv">p</span> <span class="nv">p&#39;</span> : R x1 x0),
 g (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p) =
 h (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p&#39;)) -&gt;
f g = f h</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Acc R x</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : A,
 R y x0 -&gt;
 <span class="kr">forall</span> <span class="nv">a0</span> <span class="nv">a&#39;</span> : Acc R y,
 Fix_F_sub A R P f y a0 = Fix_F_sub A R P f y a&#39;) -&gt;
<span class="kr">forall</span> <span class="nv">a0</span> <span class="nv">a&#39;</span> : Acc R x0,
f
  (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x0} =&gt;
   Fix_F_sub A R P f (` y) (Acc_inv a0 (proj2_sig y))) =
Fix_F_sub A R P f x0 a&#39;</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk2a" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk2a"><span class="highlight"><span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x1</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x1}, P (` y)) -&gt; P x1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">equiv_lowers</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : A)
  (<span class="nv">g</span>
   <span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">x2</span> : {y : A | R y x1},
       P (` x2)),
(<span class="kr">forall</span> (<span class="nv">x2</span> : A) (<span class="nv">p</span> <span class="nv">p&#39;</span> : R x2 x1),
 g (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x1) x2 p) =
 h (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x1) x2 p&#39;)) -&gt;
f g = f h</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Acc R x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : A,
R y x0 -&gt;
<span class="kr">forall</span> <span class="nv">a1</span> <span class="nv">a&#39;0</span> : Acc R y,
Fix_F_sub A R P f y a1 = Fix_F_sub A R P f y a&#39;0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a0, a'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Acc R x0</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">f
  (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x0} =&gt;
   Fix_F_sub A R P f (` y) (Acc_inv a0 (proj2_sig y))) =
Fix_F_sub A R P f x0 a&#39;</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk2b" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk2b"><span class="highlight"><span class="nb">rewrite</span> F_unfold.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x1</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x1}, P (` y)) -&gt; P x1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">equiv_lowers</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : A)
  (<span class="nv">g</span>
   <span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">x2</span> : {y : A | R y x1},
       P (` x2)),
(<span class="kr">forall</span> (<span class="nv">x2</span> : A) (<span class="nv">p</span> <span class="nv">p&#39;</span> : R x2 x1),
 g (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x1) x2 p) =
 h (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x1) x2 p&#39;)) -&gt;
f g = f h</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Acc R x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : A,
R y x0 -&gt;
<span class="kr">forall</span> <span class="nv">a1</span> <span class="nv">a&#39;0</span> : Acc R y,
Fix_F_sub A R P f y a1 = Fix_F_sub A R P f y a&#39;0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a0, a'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Acc R x0</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">f
  (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x0} =&gt;
   Fix_F_sub A R P f (` y) (Acc_inv a0 (proj2_sig y))) =
f
  (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x0} =&gt;
   Fix_F_sub A R P f (` y) (Acc_inv a&#39; (proj2_sig y)))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk2c" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk2c"><span class="highlight"><span class="nb">apply</span> equiv_lowers.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x1</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x1}, P (` y)) -&gt; P x1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">equiv_lowers</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : A)
  (<span class="nv">g</span>
   <span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">x2</span> : {y : A | R y x1},
       P (` x2)),
(<span class="kr">forall</span> (<span class="nv">x2</span> : A) (<span class="nv">p</span> <span class="nv">p&#39;</span> : R x2 x1),
 g (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x1) x2 p) =
 h (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x1) x2 p&#39;)) -&gt;
f g = f h</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Acc R x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : A,
R y x0 -&gt;
<span class="kr">forall</span> <span class="nv">a1</span> <span class="nv">a&#39;0</span> : Acc R y,
Fix_F_sub A R P f y a1 = Fix_F_sub A R P f y a&#39;0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a0, a'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Acc R x0</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : A) (<span class="nv">p</span> <span class="nv">p&#39;</span> : R x1 x0),
Fix_F_sub A R P f
  (` (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p))
  (Acc_inv a0
     (proj2_sig (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p))) =
Fix_F_sub A R P f
  (` (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p&#39;))
  (Acc_inv a&#39;
     (proj2_sig (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p&#39;)))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk2d" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk2d"><span class="highlight"><span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x2</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x2}, P (` y)) -&gt; P x2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">equiv_lowers</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x2</span> : A)
  (<span class="nv">g</span>
   <span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">x3</span> : {y : A | R y x2},
       P (` x3)),
(<span class="kr">forall</span> (<span class="nv">x3</span> : A) (<span class="nv">p0</span> <span class="nv">p&#39;0</span> : R x3 x2),
 g (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x2) x3 p0) =
 h (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x2) x3 p&#39;0)) -&gt;
f g = f h</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Acc R x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : A,
R y x0 -&gt;
<span class="kr">forall</span> <span class="nv">a1</span> <span class="nv">a&#39;0</span> : Acc R y,
Fix_F_sub A R P f y a1 = Fix_F_sub A R P f y a&#39;0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a0, a'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Acc R x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">p, p'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x1 x0</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Fix_F_sub A R P f
  (` (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p))
  (Acc_inv a0
     (proj2_sig (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p))) =
Fix_F_sub A R P f
  (` (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p&#39;))
  (Acc_inv a&#39;
     (proj2_sig (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p&#39;)))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk2e" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk2e"><span class="highlight"><span class="nb">apply</span> H.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x2</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x2}, P (` y)) -&gt; P x2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">equiv_lowers</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x2</span> : A)
  (<span class="nv">g</span>
   <span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">x3</span> : {y : A | R y x2},
       P (` x3)),
(<span class="kr">forall</span> (<span class="nv">x3</span> : A) (<span class="nv">p0</span> <span class="nv">p&#39;0</span> : R x3 x2),
 g (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x2) x3 p0) =
 h (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x2) x3 p&#39;0)) -&gt;
f g = f h</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Acc R x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : A,
R y x0 -&gt;
<span class="kr">forall</span> <span class="nv">a1</span> <span class="nv">a&#39;0</span> : Acc R y,
Fix_F_sub A R P f y a1 = Fix_F_sub A R P f y a&#39;0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a0, a'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Acc R x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">p, p'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x1 x0</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">R (` (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p&#39;)) x0</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="bp">assumption</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
  <span class="c">(* Finally, Fix_F_rect lets one prove a property of</span>
<span class="c">  functions defined using Fix_F_sub by showing that</span>
<span class="c">  property to be invariant over single application of the function</span>
<span class="c">  body (f). *)</span>

</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk2f" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk2f"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">Fix_sub_rect</span>
    (<span class="nv">Q</span>: <span class="kr">forall</span> <span class="nv">x</span>, P x -&gt; <span class="kt">Type</span>)
    (<span class="nv">inv</span>: <span class="kr">forall</span>
      (<span class="nv">x</span>: A)
      (<span class="nv">H</span>: <span class="kr">forall</span> (<span class="nv">y</span>: A), R y x -&gt; Q y (Fix_sub A R Rwf P f y))
      (<span class="nv">a</span>: Acc R x),
        Q x (f (<span class="kr">fun</span> <span class="nv">y</span>: {y: A | R y x} =&gt; Fix_sub A R Rwf P f (proj1_sig y))))
    : <span class="kr">forall</span> <span class="nv">x</span>, Q _ (Fix_sub A R Rwf P f x).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)) -&gt; P x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">equiv_lowers</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : A)
  (<span class="nv">g</span>
   <span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">x</span> : {y : A | R y x0},
       P (` x)),
(<span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">p</span> <span class="nv">p&#39;</span> : R x x0),
 g (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x p) =
 h (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x p&#39;)) -&gt;
f g = f h</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Q</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A, P x -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">inv</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : A,
 R y x -&gt; Q y (Fix_sub A R Rwf P f y)) -&gt;
Acc R x -&gt;
Q x
  (f
     (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x} =&gt;
      Fix_sub A R Rwf P f (` y)))</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A, Q x (Fix_sub A R Rwf P f x)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk30" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk30"><span class="highlight"><span class="kn">Proof with</span> <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)) -&gt; P x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">equiv_lowers</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : A)
  (<span class="nv">g</span>
   <span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">x</span> : {y : A | R y x0},
       P (` x)),
(<span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">p</span> <span class="nv">p&#39;</span> : R x x0),
 g (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x p) =
 h (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x p&#39;)) -&gt;
f g = f h</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Q</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A, P x -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">inv</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : A,
 R y x -&gt; Q y (Fix_sub A R Rwf P f y)) -&gt;
Acc R x -&gt;
Q x
  (f
     (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x} =&gt;
      Fix_sub A R Rwf P f (` y)))</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A, Q x (Fix_sub A R Rwf P f x)</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk31" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk31"><span class="highlight"><span class="nb">unfold</span> Fix_sub.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)) -&gt; P x</span></span></span></div><div class="goal-hyp"><span class="hyp-names">equiv_lowers</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : A)
  (<span class="nv">g</span>
   <span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">x</span> : {y : A | R y x0},
       P (` x)),
(<span class="kr">forall</span> (<span class="nv">x</span> : A) (<span class="nv">p</span> <span class="nv">p&#39;</span> : R x x0),
 g (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x p) =
 h (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x p&#39;)) -&gt;
f g = f h</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Q</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A, P x -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">inv</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : A,
 R y x -&gt; Q y (Fix_sub A R Rwf P f y)) -&gt;
Acc R x -&gt;
Q x
  (f
     (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x} =&gt;
      Fix_sub A R Rwf P f (` y)))</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">x</span> : A, Q x (Fix_F_sub A R P f x (Rwf x))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk32" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk32"><span class="highlight"><span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, P (` y)) -&gt; P x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">equiv_lowers</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : A)
  (<span class="nv">g</span>
   <span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">x1</span> : {y : A | R y x0},
       P (` x1)),
(<span class="kr">forall</span> (<span class="nv">x1</span> : A) (<span class="nv">p</span> <span class="nv">p&#39;</span> : R x1 x0),
 g (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p) =
 h (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p&#39;)) -&gt;
f g = f h</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Q</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A, P x0 -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">inv</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : A,
 R y x0 -&gt; Q y (Fix_sub A R Rwf P f y)) -&gt;
Acc R x0 -&gt;
Q x0
  (f
     (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x0} =&gt;
      Fix_sub A R Rwf P f (` y)))</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Q x (Fix_F_sub A R P f x (Rwf x))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk33" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk33"><span class="highlight"><span class="nb">apply</span> Fix_F_sub_rect.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, P (` y)) -&gt; P x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">equiv_lowers</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : A)
  (<span class="nv">g</span>
   <span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">x1</span> : {y : A | R y x0},
       P (` x1)),
(<span class="kr">forall</span> (<span class="nv">x1</span> : A) (<span class="nv">p</span> <span class="nv">p&#39;</span> : R x1 x0),
 g (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p) =
 h (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p&#39;)) -&gt;
f g = f h</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Q</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A, P x0 -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">inv</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : A,
 R y x0 -&gt; Q y (Fix_sub A R Rwf P f y)) -&gt;
Acc R x0 -&gt;
Q x0
  (f
     (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x0} =&gt;
      Fix_sub A R Rwf P f (` y)))</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : A,
 R y x0 -&gt;
 <span class="kr">forall</span> <span class="nv">a</span> : Acc R y, Q y (Fix_F_sub A R P f y a)) -&gt;
<span class="kr">forall</span> <span class="nv">a</span> : Acc R x0,
Q x0
  (f
     (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x0} =&gt;
      Fix_F_sub A R P f (` y)
        (Acc_inv a (proj2_sig y))))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk34" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk34"><span class="highlight"><span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x1</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x1}, P (` y)) -&gt; P x1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">equiv_lowers</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : A)
  (<span class="nv">g</span>
   <span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">x2</span> : {y : A | R y x1},
       P (` x2)),
(<span class="kr">forall</span> (<span class="nv">x2</span> : A) (<span class="nv">p</span> <span class="nv">p&#39;</span> : R x2 x1),
 g (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x1) x2 p) =
 h (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x1) x2 p&#39;)) -&gt;
f g = f h</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Q</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x1</span> : A, P x1 -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">inv</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x1</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : A,
 R y x1 -&gt; Q y (Fix_sub A R Rwf P f y)) -&gt;
Acc R x1 -&gt;
Q x1
  (f
     (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x1} =&gt;
      Fix_sub A R Rwf P f (` y)))</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : A,
R y x0 -&gt;
<span class="kr">forall</span> <span class="nv">a0</span> : Acc R y, Q y (Fix_F_sub A R P f y a0)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Acc R x0</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Q x0
  (f
     (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x0} =&gt;
      Fix_F_sub A R P f (` y)
        (Acc_inv a (proj2_sig y))))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk35" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk35"><span class="highlight"><span class="nb">assert</span> (<span class="kr">forall</span> <span class="nv">y</span>: A, R y x0 -&gt; Q y (Fix_F_sub A R P f y (Rwf y)))...</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x1</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x1}, P (` y)) -&gt; P x1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">equiv_lowers</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : A)
  (<span class="nv">g</span>
   <span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">x2</span> : {y : A | R y x1},
       P (` x2)),
(<span class="kr">forall</span> (<span class="nv">x2</span> : A) (<span class="nv">p</span> <span class="nv">p&#39;</span> : R x2 x1),
 g (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x1) x2 p) =
 h (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x1) x2 p&#39;)) -&gt;
f g = f h</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Q</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x1</span> : A, P x1 -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">inv</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x1</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : A,
 R y x1 -&gt; Q y (Fix_sub A R Rwf P f y)) -&gt;
Acc R x1 -&gt;
Q x1
  (f
     (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x1} =&gt;
      Fix_sub A R Rwf P f (` y)))</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : A,
R y x0 -&gt;
<span class="kr">forall</span> <span class="nv">a0</span> : Acc R y, Q y (Fix_F_sub A R P f y a0)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Acc R x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">X0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : A,
R y x0 -&gt; Q y (Fix_F_sub A R P f y (Rwf y))</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Q x0
  (f
     (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x0} =&gt;
      Fix_F_sub A R P f (` y)
        (Acc_inv a (proj2_sig y))))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk36" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk36"><span class="highlight"><span class="nb">set</span> (inv x0 X0 a).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x1</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x1}, P (` y)) -&gt; P x1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">equiv_lowers</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : A)
  (<span class="nv">g</span>
   <span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">x2</span> : {y : A | R y x1},
       P (` x2)),
(<span class="kr">forall</span> (<span class="nv">x2</span> : A) (<span class="nv">p</span> <span class="nv">p&#39;</span> : R x2 x1),
 g (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x1) x2 p) =
 h (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x1) x2 p&#39;)) -&gt;
f g = f h</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Q</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x1</span> : A, P x1 -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">inv</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x1</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : A,
 R y x1 -&gt; Q y (Fix_sub A R Rwf P f y)) -&gt;
Acc R x1 -&gt;
Q x1
  (f
     (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x1} =&gt;
      Fix_sub A R Rwf P f (` y)))</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : A,
R y x0 -&gt;
<span class="kr">forall</span> <span class="nv">a0</span> : Acc R y, Q y (Fix_F_sub A R P f y a0)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Acc R x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">X0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : A,
R y x0 -&gt; Q y (Fix_F_sub A R P f y (Rwf y))</span></span></span></div><div class="goal-hyp"><span class="hyp-names">q</span><span><span class="hyp-body"><span class="hyp-punct">:=</span><span class="highlight">inv x0 X0 a</span></span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Q x0
  (f
     (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x0} =&gt;
      Fix_sub A R Rwf P f (` y)))</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Q x0
  (f
     (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x0} =&gt;
      Fix_F_sub A R P f (` y)
        (Acc_inv a (proj2_sig y))))</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk37" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk37"><span class="highlight"><span class="nb">clearbody</span> q.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x1</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x1}, P (` y)) -&gt; P x1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">equiv_lowers</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : A)
  (<span class="nv">g</span>
   <span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">x2</span> : {y : A | R y x1},
       P (` x2)),
(<span class="kr">forall</span> (<span class="nv">x2</span> : A) (<span class="nv">p</span> <span class="nv">p&#39;</span> : R x2 x1),
 g (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x1) x2 p) =
 h (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x1) x2 p&#39;)) -&gt;
f g = f h</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Q</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x1</span> : A, P x1 -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">inv</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x1</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : A,
 R y x1 -&gt; Q y (Fix_sub A R Rwf P f y)) -&gt;
Acc R x1 -&gt;
Q x1
  (f
     (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x1} =&gt;
      Fix_sub A R Rwf P f (` y)))</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : A,
R y x0 -&gt;
<span class="kr">forall</span> <span class="nv">a0</span> : Acc R y, Q y (Fix_F_sub A R P f y a0)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Acc R x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">X0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : A,
R y x0 -&gt; Q y (Fix_F_sub A R P f y (Rwf y))</span></span></span></div><div class="goal-hyp"><span class="hyp-names">q</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Q x0
  (f
     (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x0} =&gt;
      Fix_sub A R Rwf P f (` y)))</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Q x0
  (f
     (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x0} =&gt;
      Fix_F_sub A R P f (` y)
        (Acc_inv a (proj2_sig y))))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk38" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk38"><span class="highlight"><span class="nb">rewrite</span> &lt;- (equiv_lowers (<span class="kr">fun</span> <span class="nv">y</span>: {y: A | R y x0} =&gt;
      Fix_F_sub A R P f (proj1_sig y) (Rwf (proj1_sig y)))
    (<span class="kr">fun</span> <span class="nv">y</span>: {y: A | R y x0} =&gt; Fix_F_sub A R P f (proj1_sig y) (Acc_inv a (proj2_sig y))))...</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x1</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x1}, P (` y)) -&gt; P x1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">equiv_lowers</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : A)
  (<span class="nv">g</span>
   <span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">x2</span> : {y : A | R y x1},
       P (` x2)),
(<span class="kr">forall</span> (<span class="nv">x2</span> : A) (<span class="nv">p</span> <span class="nv">p&#39;</span> : R x2 x1),
 g (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x1) x2 p) =
 h (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x1) x2 p&#39;)) -&gt;
f g = f h</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Q</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x1</span> : A, P x1 -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">inv</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x1</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : A,
 R y x1 -&gt; Q y (Fix_sub A R Rwf P f y)) -&gt;
Acc R x1 -&gt;
Q x1
  (f
     (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x1} =&gt;
      Fix_sub A R Rwf P f (` y)))</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : A,
R y x0 -&gt;
<span class="kr">forall</span> <span class="nv">a0</span> : Acc R y, Q y (Fix_F_sub A R P f y a0)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Acc R x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">X0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : A,
R y x0 -&gt; Q y (Fix_F_sub A R P f y (Rwf y))</span></span></span></div><div class="goal-hyp"><span class="hyp-names">q</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Q x0
  (f
     (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x0} =&gt;
      Fix_sub A R Rwf P f (` y)))</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">x1</span> : A) (<span class="nv">p</span> <span class="nv">p&#39;</span> : R x1 x0),
Fix_F_sub A R P f
  (` (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p))
  (Rwf (` (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p))) =
Fix_F_sub A R P f
  (` (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p&#39;))
  (Acc_inv a
     (proj2_sig (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p&#39;)))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk39" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk39"><span class="highlight"><span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x2</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x2}, P (` y)) -&gt; P x2</span></span></span></div><div class="goal-hyp"><span class="hyp-names">equiv_lowers</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> (<span class="nv">x2</span> : A)
  (<span class="nv">g</span>
   <span class="nv">h</span> : <span class="kr">forall</span> <span class="nv">x3</span> : {y : A | R y x2},
       P (` x3)),
(<span class="kr">forall</span> (<span class="nv">x3</span> : A) (<span class="nv">p0</span> <span class="nv">p&#39;0</span> : R x3 x2),
 g (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x2) x3 p0) =
 h (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x2) x3 p&#39;0)) -&gt;
f g = f h</span></span></span></div><div class="goal-hyp"><span class="hyp-names">Q</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x2</span> : A, P x2 -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">inv</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x2</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : A,
 R y x2 -&gt; Q y (Fix_sub A R Rwf P f y)) -&gt;
Acc R x2 -&gt;
Q x2
  (f
     (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x2} =&gt;
      Fix_sub A R Rwf P f (` y)))</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">X</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : A,
R y x0 -&gt;
<span class="kr">forall</span> <span class="nv">a0</span> : Acc R y, Q y (Fix_F_sub A R P f y a0)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">a</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Acc R x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">X0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : A,
R y x0 -&gt; Q y (Fix_F_sub A R P f y (Rwf y))</span></span></span></div><div class="goal-hyp"><span class="hyp-names">q</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">Q x0
  (f
     (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x0} =&gt;
      Fix_sub A R Rwf P f (` y)))</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x1</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">p, p'</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">R x1 x0</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">Fix_F_sub A R P f
  (` (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p))
  (Rwf (` (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p))) =
Fix_F_sub A R P f
  (` (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p&#39;))
  (Acc_inv a
     (proj2_sig (exist (<span class="kr">fun</span> <span class="nv">y</span> : A =&gt; R y x0) x1 p&#39;)))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">apply</span> eq_Fix_F_sub.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">End</span> <span class="nf">Fix_rects</span>.</span></span></span></pre><div class="doc">
Tactic to fold a definition based on <span class="inlinecode"><span class="id" title="var">Fix_measure_sub</span></span>. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Ltac</span> <span class="nf">fold_sub</span> f :=
  <span class="kr">match goal with</span>
    | [ |- ?T ] =&gt;
      <span class="kr">match</span> T <span class="kr">with</span>
        <span class="kp">context</span> C [ @Fix_sub _ _ _ _ _ ?arg ] =&gt;
        <span class="kr">let</span> <span class="nv">app</span> := <span class="kp">context</span> C [ f arg ] <span class="kr">in</span>
          <span class="nb">change</span> app
      <span class="kr">end</span>
  <span class="kr">end</span>.</span></span></span></pre><div class="doc">
This module provides the fixpoint equation provided one assumes
   functional extensionality. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Module</span> <span class="nf">WfExtensionality</span>.</span></span></span></pre><div class="doc">
The two following lemmas allow to unfold a well-founded fixpoint definition without
     restriction using the functional extensionality axiom. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight">  </span></span></pre><div class="doc">
For a function defined with Program using a well-founded order. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight">  </span></span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk3a" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk3a"><span class="highlight"><span class="kn">Lemma</span> <span class="nf">fix_sub_eq_ext</span> :
    <span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">R</span> : A -&gt; A -&gt; <span class="kt">Prop</span>) (<span class="nv">Rwf</span> : well_founded R)
      (<span class="nv">P</span> : A -&gt; <span class="kt">Type</span>)
      (<span class="nv">F_sub</span> : <span class="kr">forall</span> <span class="nv">x</span> : A, (<span class="kr">forall</span> <span class="nv">y</span>:{y : A | R y x}, P (` y)) -&gt; P x),
      <span class="kr">forall</span> <span class="nv">x</span> : A,
        Fix_sub A R Rwf P F_sub x =
          F_sub x (<span class="kr">fun</span> <span class="nv">y</span>:{y : A | R y x} =&gt; Fix_sub A R Rwf P F_sub (` y)).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">R</span> : A -&gt; A -&gt; <span class="kt">Prop</span>)
  (<span class="nv">Rwf</span> : well_founded R) (<span class="nv">P</span> : A -&gt; <span class="kt">Type</span>)
  (<span class="nv">F_sub</span> : <span class="kr">forall</span> <span class="nv">x</span> : A,
           (<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)) -&gt;
           P x) (<span class="nv">x</span> : A),
Fix_sub A R Rwf P F_sub x =
F_sub x
  (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x} =&gt;
   Fix_sub A R Rwf P F_sub (` y))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk3b" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk3b"><span class="highlight"><span class="kn">Proof</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">A</span> : <span class="kt">Type</span>) (<span class="nv">R</span> : A -&gt; A -&gt; <span class="kt">Prop</span>)
  (<span class="nv">Rwf</span> : well_founded R) (<span class="nv">P</span> : A -&gt; <span class="kt">Type</span>)
  (<span class="nv">F_sub</span> : <span class="kr">forall</span> <span class="nv">x</span> : A,
           (<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x}, P (` y)) -&gt;
           P x) (<span class="nv">x</span> : A),
Fix_sub A R Rwf P F_sub x =
F_sub x
  (<span class="kr">fun</span> <span class="nv">y</span> : {y : A | R y x} =&gt;
   Fix_sub A R Rwf P F_sub (` y))</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk3c" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk3c"><span class="highlight"><span class="nb">intros</span> ; <span class="nb">apply</span> Fix_eq ; <span class="nb">auto</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_sub</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x0</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, P (` y)) -&gt; P x0</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight"><span class="kr">forall</span> (<span class="nv">x0</span> : A)
  (<span class="nv">f</span> <span class="nv">g</span> : <span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, P (` y)),
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, f y = g y) -&gt;
F_sub x0 f = F_sub x0 g</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk3d" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk3d"><span class="highlight"><span class="nb">intros</span>.</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_sub</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x1</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x1}, P (` y)) -&gt; P x1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f, g</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, P (` y)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, f y = g y</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">F_sub x0 f = F_sub x0 g</span></div></blockquote></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk3e" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk3e"><span class="highlight"><span class="nb">assert</span>(f = g).</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_sub</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x1</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x1}, P (` y)) -&gt; P x1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f, g</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, P (` y)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, f y = g y</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">f = g</span></div></blockquote><div class="coq-extra-goals"><input class="coq-extra-goal-toggle" id="Wf-v-chk3f" style="display: none" type="checkbox"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_sub</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x1</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x1}, P (` y)) -&gt; P x1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f, g</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, P (` y)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, f y = g y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">f = g</span></span></span></div></div><label class="goal-separator coq-extra-goal-label" for="Wf-v-chk3f"><hr></label><div class="goal-conclusion"><span class="highlight">F_sub x0 f = F_sub x0 g</span></div></blockquote></div></div></div></small><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk40" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk40"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_sub</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x1</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x1}, P (` y)) -&gt; P x1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f, g</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, P (` y)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, f y = g y</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">f = g</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight">extensionality y ; <span class="nb">apply</span> H.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">    </span><span class="coq-sentence"><input class="coq-toggle" id="Wf-v-chk41" style="display: none" type="checkbox"><label class="coq-input" for="Wf-v-chk41"><span class="highlight">-</span></label><small class="coq-output"><div class="coq-output-sticky-wrapper"><div class="coq-goals"><blockquote class="coq-goal"><div class="goal-hyps"><div class="goal-hyp"><span class="hyp-names">A</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">R</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; A -&gt; <span class="kt">Prop</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">Rwf</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">well_founded R</span></span></span></div><div class="goal-hyp"><span class="hyp-names">P</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A -&gt; <span class="kt">Type</span></span></span></span></div><div class="goal-hyp"><span class="hyp-names">F_sub</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">x1</span> : A,
(<span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x1}, P (` y)) -&gt; P x1</span></span></span></div><div class="goal-hyp"><span class="hyp-names">x, x0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">A</span></span></span></div><div class="goal-hyp"><span class="hyp-names">f, g</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, P (` y)</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight"><span class="kr">forall</span> <span class="nv">y</span> : {y : A | R y x0}, f y = g y</span></span></span></div><div class="goal-hyp"><span class="hyp-names">H0</span><span><span class="hyp-type"><span class="hyp-punct">:</span><span class="highlight">f = g</span></span></span></div></div><span class="goal-separator"><hr></span><div class="goal-conclusion"><span class="highlight">F_sub x0 f = F_sub x0 g</span></div></blockquote></div></div></small><span class="coq-wsp"> </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="nb">rewrite</span> H0 ; <span class="nb">auto</span>.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp">  </span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Qed</span>.</span></span></span></pre><div class="doc">
Tactic to unfold once a definition based on <span class="inlinecode"><span class="id" title="var">Fix_sub</span></span>. 
</div><pre class="alectryon-io"><!-- Generator: Alectryon v0.2 --><span class="coq-wsp"><span class="highlight">  </span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">Ltac</span> <span class="nf">unfold_sub</span> f fargs :=
    <span class="nb">set</span> (call:=fargs) ; <span class="nb">unfold</span> f <span class="kr">in</span> call ; <span class="nb">unfold</span> call ; <span class="nb">clear</span> call ;
      <span class="nb">rewrite</span> fix_sub_eq_ext ; <span class="kp">repeat</span> fold_sub f ; <span class="nb">simpl</span> proj1_sig.</span></span><span class="coq-wsp">
</span></span><span class="coq-wsp"><span class="highlight">
</span></span><span class="coq-sentence"><span class="coq-input"><span class="highlight"><span class="kn">End</span> <span class="nf">WfExtensionality</span>.</span></span></span></pre></article></body></html>